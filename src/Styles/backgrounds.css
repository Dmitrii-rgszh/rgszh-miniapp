/* ============================================================================
   backgrounds.css - ВЕРСИЯ С PNG ФОНОМ
   ----------------------------------------------------------------------------
   ✅ Заменен background2.webp на background2.png
   ✅ Плавная смена opacity
   ✅ Оптимизировано для быстрой загрузки
   ============================================================================ */

/* ======================================
   БАЗОВЫЕ СТИЛИ ДЛЯ ФОНОВЫХ СЛОЕВ
   ====================================== */
.background-layer {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  opacity: 0;
  transition: opacity 2s ease-in-out;
  pointer-events: none; /* ВАЖНО: фоны не перехватывают клики */
  z-index: -1; /* УПРОЩЕНО: все фоны имеют z-index -1 */
  will-change: opacity;
  transform: translateZ(0); /* GPU ускорение */
}

/* Активный фон */
.background-layer.active {
  opacity: 1;
}

.background-layer[data-bg="2"] {
  background-image: url('../components/background/background2.png'); /* ← ЗАМЕНЕНО НА PNG */
}

/* ======================================
   FALLBACK ГРАДИЕНТ
   ====================================== */
.background-layer.gradient-fallback {
  background-image: linear-gradient(135deg, 
    rgb(180, 0, 55) 0%, 
    rgb(153, 0, 55) 25%, 
    rgb(152, 164, 174) 50%, 
    rgb(118, 143, 146) 75%, 
    rgb(0, 40, 130) 100%
  ) !important;
}

/* ======================================
   КОНТЕЙНЕР ДЛЯ ФОНОВ
   ====================================== */
.backgrounds-container {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: -5; /* ИСПРАВЛЕНО: отрицательный z-index */
  pointer-events: none;
}

/* ======================================
   ОПТИМИЗАЦИЯ ДЛЯ МОБИЛЬНЫХ
   ====================================== */
@media (max-width: 768px) {
  .background-layer {
    background-attachment: scroll;
  }
}

/* ======================================
   ПРЕДЗАГРУЗКА ПЕРВОГО ФОНА
   ====================================== */
body::after {
  position: absolute;
  width: 0;
  height: 0;
  overflow: hidden;
  z-index: -1;
  content: url('../components/background/background1.webp');
}

/* ======================================
   CSS АНИМАЦИЯ СМЕНЫ ФОНОВ
   ====================================== */
@keyframes fadeBackground {
  0%, 20%, 100% { opacity: 0; }
  5%, 15% { opacity: 1; }
}

/* Основные стили контейнеров */
.main-app-container {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
  font-family: "Segoe UI", sans-serif;
}

.main-content-container {
  position: relative;
  z-index: 1; /* ИСПРАВЛЕНО: нормальный z-index вместо 100 */
  width: 100%;
  height: 100%;
}

/* Применяем анимацию к каждому фону с задержкой */
.background-layer[data-bg="1"] {
  animation: fadeBackground 60s infinite;
  animation-delay: 0s;
}

.background-layer[data-bg="2"] {
  animation: fadeBackground 60s infinite;
  animation-delay: 15s;
}

.background-layer[data-bg="3"] {
  animation: fadeBackground 60s infinite;
  animation-delay: 30s;
}

.background-layer[data-bg="4"] {
  animation: fadeBackground 60s infinite;
  animation-delay: 45s;
}

/* Градиентный фон всегда видим как базовый слой */
.background-layer.gradient-fallback {
  opacity: 1 !important;
  animation: none !important;
  z-index: -10;
}

/* Отключаем анимации для производительности на мобильных */
@media (max-width: 768px) {
  .background-layer[data-bg] {
    animation: none;
    opacity: 0;
  }
  
  .background-layer[data-bg="1"] {
    opacity: 1;
  }
}

/* Для пользователей с настройкой reduced motion */
@media (prefers-reduced-motion: reduce) {
  .background-layer[data-bg] {
    animation: none;
  }
  
  .background-layer[data-bg="1"] {
    opacity: 1;
  }
}