{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'/Register.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[email,setEmail]=useState('');const[status,setStatus]=useState('');const[emailValid,setEmailValid]=useState(false);const[verificationCode,setVerificationCode]=useState('');const[generatedCode,setGeneratedCode]=useState('');const[level,setLevel]=useState('');const handleEmailChange=e=>{setEmail(e.target.value);};const handleEmailSubmit=async()=>{const domain=email.split('@')[1];// Получаем домен из email\ntry{const response=await axios.post('http://127.0.0.1:5000/check_email',{domain});if(response.data.isValid){setEmailValid(true);setLevel(response.data.level);const code=Math.random().toString(36).slice(-12);setGeneratedCode(code);// Отправка кода на почту\nsendEmail(email,code);setStatus('На ваш email отправлен код регистрации.');}else{setStatus('Увы, ваш домен не зарегистрирован в нашей системе.');}}catch(error){console.error('Ошибка при проверке email',error);setStatus('Произошла ошибка при проверке email. Попробуйте снова.');}};const handleCodeSubmit=()=>{if(verificationCode===generatedCode){setStatus('Регистрация успешна!');console.log('Пользователь имеет уровень:',level);}else{setStatus('Неверный код, попробуйте снова.');}};const sendEmail=(toEmail,code)=>{console.log(`Sending email to: ${toEmail} with code: ${code}`);};return/*#__PURE__*/_jsx(\"div\",{className:\"register\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"Logo\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0443 \\u043A\\u043E\\u0440\\u043F\\u043E\\u0440\\u0430\\u0442\\u0438\\u0432\\u043D\\u0443\\u044E \\u043F\\u043E\\u0447\\u0442\\u0443\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:handleEmailChange,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 email\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEmailSubmit,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),emailValid&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:status}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:verificationCode,onChange:e=>setVerificationCode(e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCodeSubmit,children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C \\u043A\\u043E\\u0434\"})]}),!emailValid&&/*#__PURE__*/_jsx(\"h3\",{children:status})]})});};export default Register;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Register","email","setEmail","status","setStatus","emailValid","setEmailValid","verificationCode","setVerificationCode","generatedCode","setGeneratedCode","level","setLevel","handleEmailChange","e","target","value","handleEmailSubmit","domain","split","response","post","data","isValid","code","Math","random","toString","slice","sendEmail","error","console","handleCodeSubmit","log","toEmail","className","children","src","alt","type","onChange","placeholder","onClick"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport '/Register.css';\r\n\r\nconst Register = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [status, setStatus] = useState('');\r\n  const [emailValid, setEmailValid] = useState(false);\r\n  const [verificationCode, setVerificationCode] = useState('');\r\n  const [generatedCode, setGeneratedCode] = useState('');\r\n  const [level, setLevel] = useState('');\r\n\r\n  const handleEmailChange = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n\r\n  const handleEmailSubmit = async () => {\r\n    const domain = email.split('@')[1];  // Получаем домен из email\r\n\r\n    try {\r\n      const response = await axios.post('http://127.0.0.1:5000/check_email', { domain });\r\n\r\n      if (response.data.isValid) {\r\n        setEmailValid(true);\r\n        setLevel(response.data.level);\r\n        const code = Math.random().toString(36).slice(-12);\r\n        setGeneratedCode(code);\r\n\r\n        // Отправка кода на почту\r\n        sendEmail(email, code);\r\n        setStatus('На ваш email отправлен код регистрации.');\r\n      } else {\r\n        setStatus('Увы, ваш домен не зарегистрирован в нашей системе.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка при проверке email', error);\r\n      setStatus('Произошла ошибка при проверке email. Попробуйте снова.');\r\n    }\r\n  };\r\n\r\n  const handleCodeSubmit = () => {\r\n    if (verificationCode === generatedCode) {\r\n      setStatus('Регистрация успешна!');\r\n      console.log('Пользователь имеет уровень:', level);\r\n    } else {\r\n      setStatus('Неверный код, попробуйте снова.');\r\n    }\r\n  };\r\n\r\n  const sendEmail = (toEmail, code) => {\r\n    console.log(`Sending email to: ${toEmail} with code: ${code}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <div className=\"container\">\r\n        <div className=\"logo\">\r\n          <img src=\"/logo.png\" alt=\"Logo\" />\r\n        </div>\r\n        <h2>Введите вашу корпоративную почту</h2>\r\n        <input\r\n          type=\"email\"\r\n          value={email}\r\n          onChange={handleEmailChange}\r\n          placeholder=\"Введите email\"\r\n        />\r\n        <button onClick={handleEmailSubmit}>Зарегистрироваться</button>\r\n\r\n        {emailValid && (\r\n          <>\r\n            <h3>{status}</h3>\r\n            <input\r\n              type=\"text\"\r\n              value={verificationCode}\r\n              onChange={(e) => setVerificationCode(e.target.value)}\r\n              placeholder=\"Введите код\"\r\n            />\r\n            <button onClick={handleCodeSubmit}>Подтвердить код</button>\r\n          </>\r\n        )}\r\n\r\n        {!emailValid && <h3>{status}</h3>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}