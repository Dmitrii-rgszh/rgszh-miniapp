{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';// Импортируем видео. Если оно лежит в src/adaptation/1 day, путь может быть таким:\nimport videoSource from'./adaptation/1 day/1 день - Знакомство.mp4';import'./ZnakomstvoPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ZnakomstvoPage=()=>{const videoRef=useRef(null);const[maxTime,setMaxTime]=useState(0);const[videoEnded,setVideoEnded]=useState(false);const[loadedProgress,setLoadedProgress]=useState(false);const navigate=useNavigate();// При монтировании загружаем сохранённое время из localStorage\nuseEffect(()=>{const savedTime=localStorage.getItem('znakomstvo_video_progress');if(savedTime&&videoRef.current){videoRef.current.currentTime=parseFloat(savedTime);}setLoadedProgress(true);},[]);// Обновляем максимальное время воспроизведения и сохраняем прогресс\nconst handleTimeUpdate=e=>{const current=e.target.currentTime;if(current>maxTime){setMaxTime(current);}localStorage.setItem('znakomstvo_video_progress',current);};// Если пользователь пытается перемотать видео вперёд за пределы максимального просмотренного времени, возвращаем назад\nconst handleSeeking=e=>{const current=e.target.currentTime;if(current>maxTime){e.target.currentTime=maxTime;}};// По окончании видео показываем опрос\nconst handleVideoEnded=()=>{setVideoEnded(true);};// Пример обработки отправки опроса\nconst handleSurveySubmit=e=>{e.preventDefault();// Здесь можно сохранить результаты опроса или отправить их на сервер\nalert('Спасибо за прохождение опроса!');// Например, можно перенаправить пользователя на следующую страницу:\n// navigate('/nextPage');\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"znakomstvo-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"znakomstvo-title\",children:\"\\u0417\\u043D\\u0430\\u043A\\u043E\\u043C\\u0441\\u0442\\u0432\\u043E \\u0441 \\u0420\\u0413\\u0421\\u0416\"}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"znakomstvo-video\",src:videoSource,controls:true,onTimeUpdate:handleTimeUpdate,onSeeking:handleSeeking,onEnded:handleVideoEnded,children:\"\\u0412\\u0430\\u0448 \\u0431\\u0440\\u0430\\u0443\\u0437\\u0435\\u0440 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0432\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u0435 \\u0432\\u0438\\u0434\\u0435\\u043E.\"}),videoEnded&&/*#__PURE__*/_jsxs(\"form\",{className:\"znakomstvo-survey\",onSubmit:handleSurveySubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041E\\u043F\\u0440\\u043E\\u0441 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0439\\u0434\\u0435\\u043D\\u043D\\u043E\\u043C\\u0443 \\u043C\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043B\\u0443\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0430\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u043E \\u043F\\u043E\\u043D\\u044F\\u0442\\u0435\\u043D \\u043C\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043B?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"survey-options\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"clarity\",value:\"\\u043E\\u0442\\u043B\\u0438\\u0447\\u043D\\u043E\",required:true}),\" \\u041E\\u0442\\u043B\\u0438\\u0447\\u043D\\u043E\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"clarity\",value:\"\\u0445\\u043E\\u0440\\u043E\\u0448\\u043E\"}),\" \\u0425\\u043E\\u0440\\u043E\\u0448\\u043E\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"clarity\",value:\"\\u0443\\u0434\\u043E\\u0432\\u043B\\u0435\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\"}),\" \\u0423\\u0434\\u043E\\u0432\\u043B\\u0435\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"clarity\",value:\"\\u043F\\u043B\\u043E\\u0445\\u043E\"}),\" \\u041F\\u043B\\u043E\\u0445\\u043E\"]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u043F\\u0440\\u043E\\u0441\"})]})]});};export default ZnakomstvoPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","videoSource","jsx","_jsx","jsxs","_jsxs","ZnakomstvoPage","videoRef","maxTime","setMaxTime","videoEnded","setVideoEnded","loadedProgress","setLoadedProgress","navigate","savedTime","localStorage","getItem","current","currentTime","parseFloat","handleTimeUpdate","e","target","setItem","handleSeeking","handleVideoEnded","handleSurveySubmit","preventDefault","alert","className","children","ref","src","controls","onTimeUpdate","onSeeking","onEnded","onSubmit","type","name","value","required"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/ZnakomstvoPage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n// Импортируем видео. Если оно лежит в src/adaptation/1 day, путь может быть таким:\r\nimport videoSource from './adaptation/1 day/1 день - Знакомство.mp4';\r\nimport './ZnakomstvoPage.css';\r\n\r\nconst ZnakomstvoPage = () => {\r\n  const videoRef = useRef(null);\r\n  const [maxTime, setMaxTime] = useState(0);\r\n  const [videoEnded, setVideoEnded] = useState(false);\r\n  const [loadedProgress, setLoadedProgress] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // При монтировании загружаем сохранённое время из localStorage\r\n  useEffect(() => {\r\n    const savedTime = localStorage.getItem('znakomstvo_video_progress');\r\n    if (savedTime && videoRef.current) {\r\n      videoRef.current.currentTime = parseFloat(savedTime);\r\n    }\r\n    setLoadedProgress(true);\r\n  }, []);\r\n\r\n  // Обновляем максимальное время воспроизведения и сохраняем прогресс\r\n  const handleTimeUpdate = (e) => {\r\n    const current = e.target.currentTime;\r\n    if (current > maxTime) {\r\n      setMaxTime(current);\r\n    }\r\n    localStorage.setItem('znakomstvo_video_progress', current);\r\n  };\r\n\r\n  // Если пользователь пытается перемотать видео вперёд за пределы максимального просмотренного времени, возвращаем назад\r\n  const handleSeeking = (e) => {\r\n    const current = e.target.currentTime;\r\n    if (current > maxTime) {\r\n      e.target.currentTime = maxTime;\r\n    }\r\n  };\r\n\r\n  // По окончании видео показываем опрос\r\n  const handleVideoEnded = () => {\r\n    setVideoEnded(true);\r\n  };\r\n\r\n  // Пример обработки отправки опроса\r\n  const handleSurveySubmit = (e) => {\r\n    e.preventDefault();\r\n    // Здесь можно сохранить результаты опроса или отправить их на сервер\r\n    alert('Спасибо за прохождение опроса!');\r\n    // Например, можно перенаправить пользователя на следующую страницу:\r\n    // navigate('/nextPage');\r\n  };\r\n\r\n  return (\r\n    <div className=\"znakomstvo-container\">\r\n      <h1 className=\"znakomstvo-title\">Знакомство с РГСЖ</h1>\r\n      <video\r\n        ref={videoRef}\r\n        className=\"znakomstvo-video\"\r\n        src={videoSource}\r\n        controls\r\n        onTimeUpdate={handleTimeUpdate}\r\n        onSeeking={handleSeeking}\r\n        onEnded={handleVideoEnded}\r\n      >\r\n        Ваш браузер не поддерживает воспроизведение видео.\r\n      </video>\r\n      {videoEnded && (\r\n        <form className=\"znakomstvo-survey\" onSubmit={handleSurveySubmit}>\r\n          <h2>Опрос по пройденному материалу</h2>\r\n          <p>Насколько понятен материал?</p>\r\n          <div className=\"survey-options\">\r\n            <label>\r\n              <input type=\"radio\" name=\"clarity\" value=\"отлично\" required /> Отлично\r\n            </label>\r\n            <label>\r\n              <input type=\"radio\" name=\"clarity\" value=\"хорошо\" /> Хорошо\r\n            </label>\r\n            <label>\r\n              <input type=\"radio\" name=\"clarity\" value=\"удовлетворительно\" /> Удовлетворительно\r\n            </label>\r\n            <label>\r\n              <input type=\"radio\" name=\"clarity\" value=\"плохо\" /> Плохо\r\n            </label>\r\n          </div>\r\n          <button type=\"submit\">Отправить опрос</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ZnakomstvoPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}