{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./NewsTicker.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewsTicker=()=>{const[posts,setPosts]=useState([]);useEffect(()=>{const fetchPosts=async()=>{try{const response=await fetch('/api/proxy/telegram-posts');const data=await response.json();let postsArray=Array.isArray(data.posts)?data.posts:[];if(postsArray.length>3){postsArray=postsArray.slice(-3);}if(postsArray.length===1){postsArray=[...postsArray,...postsArray];}setPosts(postsArray);}catch(error){console.error(\"Ошибка при получении новостей:\",error);setPosts([\"Пока нет новостей\"]);}};fetchPosts();const interval=setInterval(fetchPosts,60000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"news-ticker-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"news-ticker\",children:posts.map((post,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"news-item\",children:typeof post==='object'&&post.caption?/*#__PURE__*/_jsxs(\"div\",{className:\"caption-news\",children:[/*#__PURE__*/_jsx(\"img\",{src:post.image,alt:\"News\",className:\"news-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"news-caption-text\",children:post.text})]}):/*#__PURE__*/_jsx(\"span\",{className:\"news-text\",children:post})},index))})});};export default NewsTicker;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","NewsTicker","posts","setPosts","fetchPosts","response","fetch","data","json","postsArray","Array","isArray","length","slice","error","console","interval","setInterval","clearInterval","className","children","map","post","index","caption","src","image","alt","text"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/NewsTicker.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './NewsTicker.css';\r\n\r\nconst NewsTicker = () => {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const response = await fetch('/api/proxy/telegram-posts');\r\n        const data = await response.json();\r\n        let postsArray = Array.isArray(data.posts) ? data.posts : [];\r\n        if (postsArray.length > 3) {\r\n          postsArray = postsArray.slice(-3);\r\n        }\r\n        if (postsArray.length === 1) {\r\n          postsArray = [...postsArray, ...postsArray];\r\n        }\r\n        setPosts(postsArray);\r\n      } catch (error) {\r\n        console.error(\"Ошибка при получении новостей:\", error);\r\n        setPosts([\"Пока нет новостей\"]);\r\n      }\r\n    };\r\n\r\n    fetchPosts();\r\n    const interval = setInterval(fetchPosts, 60000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"news-ticker-container\">\r\n      <div className=\"news-ticker\">\r\n        {posts.map((post, index) => (\r\n          <div key={index} className=\"news-item\">\r\n            {typeof post === 'object' && post.caption ? (\r\n              <div className=\"caption-news\">\r\n                <img src={post.image} alt=\"News\" className=\"news-image\" />\r\n                <div className=\"news-caption-text\">\r\n                  {post.text}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <span className=\"news-text\">\r\n                {post}\r\n              </span>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewsTicker;\r\n\r\n\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGP,QAAQ,CAAC,EAAE,CAAC,CAEtCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAS,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CACzD,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAClC,GAAI,CAAAC,UAAU,CAAGC,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACL,KAAK,CAAC,CAAGK,IAAI,CAACL,KAAK,CAAG,EAAE,CAC5D,GAAIO,UAAU,CAACG,MAAM,CAAG,CAAC,CAAE,CACzBH,UAAU,CAAGA,UAAU,CAACI,KAAK,CAAC,CAAC,CAAC,CAAC,CACnC,CACA,GAAIJ,UAAU,CAACG,MAAM,GAAK,CAAC,CAAE,CAC3BH,UAAU,CAAG,CAAC,GAAGA,UAAU,CAAE,GAAGA,UAAU,CAAC,CAC7C,CACAN,QAAQ,CAACM,UAAU,CAAC,CACtB,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDX,QAAQ,CAAC,CAAC,mBAAmB,CAAC,CAAC,CACjC,CACF,CAAC,CAEDC,UAAU,CAAC,CAAC,CACZ,KAAM,CAAAY,QAAQ,CAAGC,WAAW,CAACb,UAAU,CAAE,KAAK,CAAC,CAC/C,MAAO,IAAMc,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN,mBACElB,IAAA,QAAKqB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCtB,IAAA,QAAKqB,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzBlB,KAAK,CAACmB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBACrBzB,IAAA,QAAiBqB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACnC,MAAO,CAAAE,IAAI,GAAK,QAAQ,EAAIA,IAAI,CAACE,OAAO,cACvCxB,KAAA,QAAKmB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BtB,IAAA,QAAK2B,GAAG,CAAEH,IAAI,CAACI,KAAM,CAACC,GAAG,CAAC,MAAM,CAACR,SAAS,CAAC,YAAY,CAAE,CAAC,cAC1DrB,IAAA,QAAKqB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/BE,IAAI,CAACM,IAAI,CACP,CAAC,EACH,CAAC,cAEN9B,IAAA,SAAMqB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACxBE,IAAI,CACD,CACP,EAZOC,KAaL,CACN,CAAC,CACC,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}