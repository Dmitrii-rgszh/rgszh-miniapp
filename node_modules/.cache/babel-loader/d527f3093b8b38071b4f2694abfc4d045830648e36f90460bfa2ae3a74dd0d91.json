{"ast":null,"code":"// src/SNPPage.js\nimport React,{useState}from'react';import{useNavigate}from'react-router-dom';import logoImage from'./components/logo.png';import backgroundImage from'./components/background.png';import DateWheelPicker from'./DateWheelPicker';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function SNPPage(){const navigate=useNavigate();// ===== –°–æ—Å—Ç–æ—è–Ω–∏—è =====\nconst[step,setStep]=useState(1);const[email,setEmail]=useState('');const[emailError,setEmailError]=useState('');const[birthDate,setBirthDate]=useState(new Date());const[gender,setGender]=useState(null);// '–º—É–∂—Å–∫–æ–π' | '–∂–µ–Ω—Å–∫–∏–π' | null\nconst[calcType,setCalcType]=useState(null);// 'premium' | 'sum' | null\nconst[amountRaw,setAmountRaw]=useState('');// —á–∏—Å—Ç—ã–µ —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä \"60000\")\nconst[amountDisplay,setAmountDisplay]=useState('');// —Å —Ç–æ—á–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä \"60.000\")\nconst[amountError,setAmountError]=useState('');const[isProcessing,setIsProcessing]=useState(false);const[resultData,setResultData]=useState(null);const[carouselIndex,setCarouselIndex]=useState(0);// —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ä—É—Å–µ–ª–∏ (0,1,2)\nconst[contactMode,setContactMode]=useState(false);// –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ —Ñ–æ—Ä–º—É ¬´–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª\nconst[contactSending,setContactSending]=useState(false);const[contactSent,setContactSent]=useState(false);// –ü–æ–ª—è —Ñ–æ—Ä–º—ã ¬´–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª\nconst[lastName,setLastName]=useState('');const[firstName,setFirstName]=useState('');const[middleName,setMiddleName]=useState('');const[workCity,setWorkCity]=useState('');// Email –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å: –æ–∫, –µ—Å–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ \"@vtb.ru\"\nconst emailValid=email.toLowerCase().endsWith('@vtb.ru');// ===== –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ =====\nfunction getAge(d){if(!(d instanceof Date))return 0;const today=new Date();let age=today.getFullYear()-d.getFullYear();if(today.getMonth()<d.getMonth()||today.getMonth()===d.getMonth()&&today.getDate()<d.getDate()){age--;}return age;}function isAmountValid(){const n=parseInt(amountRaw,10)||0;return calcType==='premium'&&n>=60000||calcType==='sum'&&n>=450000;}function canGoNext(){return step===2&&getAge(birthDate)>=18&&gender&&calcType&&amountRaw&&isAmountValid();}// ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫: –®–∞–≥ 1 ‚Üí –®–∞–≥ 2 =====\nfunction handleEmailNext(){if(!emailValid){setEmailError('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–æ—á—Ç—É –¥–æ–º–µ–Ω–∞ @vtb.ru');return;}setEmailError('');// –°–±—Ä–æ—Å —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ª–µ–π –ø–µ—Ä–µ–¥ –≤—Ç–æ—Ä—ã–º —à–∞–≥–æ–º\nsetGender(null);setCalcType(null);setAmountRaw('');setAmountDisplay('');setAmountError('');setStep(2);}// ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É–º–º—ã: —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å —Ç–æ—á–∫–∞–º–∏ =====\nfunction onAmountChange(e){const raw=e.target.value.replace(/\\D/g,'');// –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã\nsetAmountRaw(raw);// –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º display —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ç—ã—Å—è—á —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É\nlet d=raw,o='';while(d.length>3){o='.'+d.slice(-3)+o;d=d.slice(0,-3);}setAmountDisplay(d+o);const n=parseInt(raw,10)||0;if(calcType==='premium'&&n<60000){setAmountError('–ú–∏–Ω. 60 000 ‚ÇΩ');}else if(calcType==='sum'&&n<450000){setAmountError('–ú–∏–Ω. 450 000 ‚ÇΩ');}else{setAmountError('');}}// ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫: –®–∞–≥ 2 ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä =====\nasync function handleNext(){if(!canGoNext())return;setIsProcessing(true);const dateStr=birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});const payload={email,birthdate:dateStr,age:getAge(birthDate),gender,payment:calcType==='premium'?'–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞':'–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã',sum:parseInt(amountRaw,10)};try{const res=await fetch('/api/proxy/snp/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!res.ok){console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞',res.status,await res.text());alert(`–û—à–∏–±–∫–∞ ${res.status}: —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å`);}else{const data=await res.json();/*\n          –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:\n          {\n            calculationDate: \"...\",\n            gender: \"...\",\n            age: ...,\n            payment: \"...\",\n            contribution: rv(\"C13\"),            // C13\n            totalContribution: rv(\"C16\"),       // C16\n            accrualPercent: rv(\"H12\"),          // H12 (–Ω–∞–ø—Ä–∏–º–µ—Ä 0.44)\n            accrualAmount: rv(\"H13\"),           // H13\n            totalAccrual: rv(\"H16\"),            // H16\n            finalAnnual: rv(\"M13\"),             // M13\n            finalTotal: rv(\"M16\")               // M16\n          }\n        */setResultData(data);setCarouselIndex(0);}}catch(err){console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:',err);alert('–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å');}finally{setIsProcessing(false);}}function goHome(){navigate(-1);}// ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫: ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É¬ª =====\nasync function handleSendToManager(){// –í–∞–ª–∏–¥–∏—Ä—É–µ–º –ø–æ–ª—è\nif(!lastName.trim()||!firstName.trim()||!workCity.trim()){alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã.');return;}setContactSending(true);// –°–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–º—É –∏ —Ç–µ–ª–æ –ø–∏—Å—å–º–∞\nconst fullName=`${lastName.trim()} ${firstName.trim()} ${middleName.trim()}`;const subject=`–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–ª–∏—Å \"–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç\" ‚Äì ${fullName}`;const bodyLines=['–î–æ–±—Ä—ã–π –¥–µ–Ω—å, –∫–æ–ª–ª–µ–≥–∞!','','–ö –í–∞–º –ø–æ—Å—Ç—É–ø–∏–ª–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–ª–∏—Å–∞ \"–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç\"','',`–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: ${fullName}`,`–ü–æ–ª: ${gender}`,`–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: ${birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'})}`,`–í–æ–∑—Ä–∞—Å—Ç: ${getAge(birthDate)}`,`–ü–æ—á—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: ${email}`,`–ì–æ—Ä–æ–¥ —Ä–∞–±–æ—Ç—ã: ${workCity.trim()}`,'',`–†–∞–∑–º–µ—Ä –≤–∑–Ω–æ—Å–∞: ${amountDisplay} ‚ÇΩ`];const body=bodyLines.join('\\r\\n');const payload={subject,body};try{// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ –ø—Ä–æ–∫—Å–∏, –∞ –∑–∞—Ç–µ–º –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π endpoint\nconst res=await fetch('/api/proxy/snp/send_manager',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!res.ok){console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É:',res.status,await res.text());alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É: ${res.status}`);setContactSending(false);}else{setContactSending(false);setContactSent(true);// –ß–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\nsetTimeout(()=>navigate(-1),4000);}}catch(err){console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É:',err);alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É');setContactSending(false);}}// ===== –≠–∫—Ä–∞–Ω ¬´–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á—ë—Ç‚Ä¶¬ª =====\nif(isProcessing){return/*#__PURE__*/_jsxs(\"div\",{className:\"processing-screen\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"processing-title\",children:\"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442\\u0441\\u044F \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\xAB\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\xBB\"}),/*#__PURE__*/_jsx(\"div\",{className:\"arrow-animation\",children:\"\\u2192\"})]});}// ===== –≠–∫—Ä–∞–Ω ¬´–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É‚Ä¶¬ª =====\nif(contactSending){return/*#__PURE__*/_jsxs(\"div\",{className:\"processing-screen\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"processing-title\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u044F\\u044E\\u0442\\u0441\\u044F \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430 \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u0443...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"arrow-animation\",children:\"\\u2192\"})]});}// ===== –≠–∫—Ä–∞–Ω ¬´–£—Å–ø–µ—Ö –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É¬ª =====\nif(contactSent){const fullName=`${lastName.trim()} ${firstName.trim()} ${middleName.trim()}`;return/*#__PURE__*/_jsxs(\"div\",{className:\"processing-screen\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"processing-title\",children:[fullName,\", \\u043D\\u0430\\u0448 \\u044D\\u043A\\u0441\\u043F\\u0435\\u0440\\u0442 \\u0441\\u0432\\u044F\\u0436\\u0435\\u0442\\u0441\\u044F \\u0441 \\u0412\\u0430\\u043C\\u0438 \\u0432 \\u0431\\u043B\\u0438\\u0436\\u0430\\u0439\\u0448\\u0435\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F!\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u041E\\u0442\\u043B\\u0438\\u0447\\u043D\\u043E\\u0433\\u043E \\u0434\\u043D\\u044F, \\u043A\\u043E\\u043B\\u043B\\u0435\\u0433\\u0430!\"]})]});}// ===== –ï—Å–ª–∏ resultData –µ—Å—Ç—å ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ + –∫–∞—Ä—É—Å–µ–ª—å –∏–ª–∏ —Ñ–æ—Ä–º—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ =====\nif(resultData){// –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞\nconst todayStr=new Date().toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});const{gender:resGender,payment:resPayment,contribution,// C13\ntotalContribution,// C16\naccrualPercent,// H12 (0.44)\naccrualAmount,// H13\ntotalAccrual,// H16\nfinalAnnual,// M13\nfinalTotal// M16\n}=resultData;// –ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑ 0.44 ‚Üí 44\nconst accrualPercentDisplay=Math.round(Number(accrualPercent)*100);// –§–æ—Ä–º–∞—Ç—Ç–µ—Ä ¬´100000¬ª ‚Üí ¬´100 000¬ª\nfunction fmt(number){return Number(number).toLocaleString('ru-RU',{minimumFractionDigits:0});}// ===== –ï—Å–ª–∏ contactMode=true, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É ¬´–í–≤–µ–¥–∏—Ç–µ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ¬ª =====\nif(contactMode){return/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"polls-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:goHome,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"forward-btn\",onClick:()=>setContactMode(false),children:/*#__PURE__*/_jsx(\"span\",{className:\"arrow-icon\",children:\"\\u2190\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"contact-title\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0412\\u0430\\u0448\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-form\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0444\\u0430\\u043C\\u0438\\u043B\\u0438\\u044E\",value:lastName,onChange:e=>setLastName(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F\",value:firstName,onChange:e=>setFirstName(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\",value:middleName,onChange:e=>setMiddleName(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0413\\u043E\\u0440\\u043E\\u0434 \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\",value:workCity,onChange:e=>setWorkCity(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"contact-btn\",onClick:handleSendToManager,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\"})]})]});}// ===== –ò–Ω–∞—á–µ (contactMode=false) ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã + –∫–∞—Ä—É—Å–µ–ª—å =====\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"polls-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:goHome,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"repeat-btn\",onClick:()=>{// –°–±—Ä–æ—Å –∫ —à–∞–≥—É 2\nsetResultData(null);setGender(null);setCalcType(null);setAmountRaw('');setAmountDisplay('');setAmountError('');setStep(2);setContactMode(false);},children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 4V1L8 5l4 4V6 c4.41 0 8 3.59 8 8 s-3.59 8-8 8-8-3.59-8-8h2 c0 3.31 2.69 6 6 6s6-2.69 6-6 -2.69-6-6-6v3l-4-4 4-4z\",fill:\"#fff\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"polls-title\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\xAB\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\xBB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"params-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430: \",todayStr]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442: \",getAge(birthDate),\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041F\\u043E\\u043B: \",resGender]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043E\\u0442: \",resPayment]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-indicators\",children:[/*#__PURE__*/_jsx(\"span\",{className:carouselIndex===0?'active':''}),/*#__PURE__*/_jsx(\"span\",{className:carouselIndex===1?'active':''}),/*#__PURE__*/_jsx(\"span\",{className:carouselIndex===2?'active':''})]}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-clipper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-wrapper\",style:{transform:`translateX(-${carouselIndex*100}%)`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"first-line\",children:\"\\u0412 \\u0442\\u0435\\u0447\\u0435\\u043D\\u0438\\u0435 5 \\u043B\\u0435\\u0442\"}),/*#__PURE__*/_jsx(\"div\",{className:\"unit\",children:\"\\u0412\\u044B \\u0432\\u043D\\u043E\\u0441\\u0438\\u0442\\u0435 \\u0441\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432\\u0430 \\u0432 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0443\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[fmt(contribution),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"unit\",children:\"\\u0415\\u0436\\u0435\\u0433\\u043E\\u0434\\u043D\\u043E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[fmt(totalContribution),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-label\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0432\\u0430\\u0448\\u0438\\u0445 \\u0432\\u0437\\u043D\\u043E\\u0441\\u043E\\u0432\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"first-line\",children:\"\\u041D\\u0430\\u0447\\u0438\\u0441\\u043B\\u044F\\u0435\\u043C \\u0434\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"unit\",children:[accrualPercentDisplay,\"% \\u043E\\u0442 \\u043A\\u0430\\u0436\\u0434\\u043E\\u0433\\u043E \\u0432\\u0437\\u043D\\u043E\\u0441\\u0430\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[fmt(accrualAmount),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"unit\",children:\"\\u0415\\u0436\\u0435\\u0433\\u043E\\u0434\\u043D\\u043E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[fmt(totalAccrual),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-label\",children:\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430 \\u043D\\u0430\\u0447\\u0438\\u0441\\u043B\\u0435\\u043D\\u0438\\u0439\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"first-line\",children:\"\\u0418\\u0442\\u043E\\u0433\\u043E\\u0432\\u0430\\u044F \\u0433\\u043E\\u0434\\u043E\\u0432\\u0430\\u044F \\u0432\\u044B\\u043F\\u043B\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"unit\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0441 \\u043D\\u0430\\u0447\\u0438\\u0441\\u043B\\u0435\\u043D\\u0438\\u044F\\u043C\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[fmt(finalAnnual),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"unit\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0437\\u0430 5 \\u043B\\u0435\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[fmt(finalTotal),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-label\",children:\"\\u0412\\u0430\\u0448 \\u043A\\u0430\\u043F\\u0438\\u0442\\u0430\\u043B \\u0447\\u0435\\u0440\\u0435\\u0437 5 \\u043B\\u0435\\u0442\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"carousel-control prev\",onClick:()=>setCarouselIndex(idx=>idx-1),disabled:carouselIndex===0,children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"button\",{className:\"carousel-control next\",onClick:()=>setCarouselIndex(idx=>idx+1),disabled:carouselIndex===2,children:\"\\u203A\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"contact-btn\",onClick:()=>setContactMode(true),children:\"\\u0421\\u0432\\u044F\\u0437\\u0430\\u0442\\u044C\\u0441\\u044F \\u0441 \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u043E\\u043C\"})]})]});}// ===== –û–°–ù–û–í–ù–û–ô UI (–®–∞–≥ 1 –∏ –®–∞–≥ 2) =====\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"polls-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:goHome,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"forward-btn\",onClick:step===1?handleEmailNext:handleNext,disabled:step===1?!emailValid:!canGoNext(),children:/*#__PURE__*/_jsx(\"span\",{className:\"arrow-icon\",children:\"\\u2192\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[step===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"email-step\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"email-label\",children:\"\\u041A\\u043E\\u0440\\u043F\\u043E\\u0440\\u0430\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430 \\u0412\\u0422\\u0411:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",inputMode:\"email\",autoComplete:\"email\",autoCapitalize:\"none\",spellCheck:\"false\",placeholder:\"example@vtb.ru\",value:email,onChange:e=>setEmail(e.target.value)})]}),emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error\",children:emailError}),/*#__PURE__*/_jsx(\"button\",{className:\"polls-btn btn1\",onClick:handleEmailNext,disabled:!emailValid,children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"})]}),step===2&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"polls-title\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\xAB\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\xBB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"section-label\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(DateWheelPicker,{value:birthDate,onChange:val=>{if(val instanceof Date){setBirthDate(val);}else if(val!==null&&val!==void 0&&val.day){setBirthDate(new Date(val.year,val.month-1,val.day));}}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${gender==='–º—É–∂—Å–∫–æ–π'?'selected':''}`,onClick:()=>setGender('–º—É–∂—Å–∫–æ–π'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u041C\\u0443\\u0436\\u0441\\u043A\\u043E\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDC68\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${gender==='–∂–µ–Ω—Å–∫–∏–π'?'selected':''}`,onClick:()=>setGender('–∂–µ–Ω—Å–∫–∏–π'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0416\\u0435\\u043D\\u0441\\u043A\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDC69\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043E\\u0442\\u2026\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${calcType==='premium'?'selected':''}`,onClick:()=>setCalcType('premium'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0433\\u043E\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0432\\u0437\\u043D\\u043E\\u0441\\u0430\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${calcType==='sum'?'selected':''}`,onClick:()=>setCalcType('sum'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0441\\u0443\\u043C\\u043C\\u044B\"})]})]}),calcType&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 (\\u20BD):\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sum-section\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:calcType==='premium'?'–ú–∏–Ω. 60 000':'–ú–∏–Ω. 450 000',value:amountDisplay,onChange:onAmountChange})}),amountError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error\",children:amountError})]})]})]})]});}","map":{"version":3,"names":["React","useState","useNavigate","logoImage","backgroundImage","DateWheelPicker","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SNPPage","navigate","step","setStep","email","setEmail","emailError","setEmailError","birthDate","setBirthDate","Date","gender","setGender","calcType","setCalcType","amountRaw","setAmountRaw","amountDisplay","setAmountDisplay","amountError","setAmountError","isProcessing","setIsProcessing","resultData","setResultData","carouselIndex","setCarouselIndex","contactMode","setContactMode","contactSending","setContactSending","contactSent","setContactSent","lastName","setLastName","firstName","setFirstName","middleName","setMiddleName","workCity","setWorkCity","emailValid","toLowerCase","endsWith","getAge","d","today","age","getFullYear","getMonth","getDate","isAmountValid","n","parseInt","canGoNext","handleEmailNext","onAmountChange","e","raw","target","value","replace","o","length","slice","handleNext","dateStr","toLocaleDateString","day","month","year","payload","birthdate","payment","sum","res","fetch","method","headers","body","JSON","stringify","ok","console","error","status","text","alert","data","json","err","goHome","handleSendToManager","trim","fullName","subject","bodyLines","join","setTimeout","className","style","children","src","alt","todayStr","resGender","resPayment","contribution","totalContribution","accrualPercent","accrualAmount","totalAccrual","finalAnnual","finalTotal","accrualPercentDisplay","Math","round","Number","fmt","number","toLocaleString","minimumFractionDigits","onClick","viewBox","type","placeholder","onChange","fill","transform","idx","disabled","inputMode","autoComplete","autoCapitalize","spellCheck","val"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/SNPPage.js"],"sourcesContent":["// src/SNPPage.js\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport logoImage       from './components/logo.png';\nimport backgroundImage from './components/background.png';\nimport DateWheelPicker from './DateWheelPicker';\n\nexport default function SNPPage() {\n  const navigate = useNavigate();\n\n  // ===== –°–æ—Å—Ç–æ—è–Ω–∏—è =====\n  const [step, setStep]                   = useState(1);\n  const [email, setEmail]                 = useState('');\n  const [emailError, setEmailError]       = useState('');\n  const [birthDate, setBirthDate]         = useState(new Date());\n  const [gender, setGender]               = useState(null);    // '–º—É–∂—Å–∫–æ–π' | '–∂–µ–Ω—Å–∫–∏–π' | null\n  const [calcType, setCalcType]           = useState(null);    // 'premium' | 'sum' | null\n  const [amountRaw, setAmountRaw]         = useState('');      // —á–∏—Å—Ç—ã–µ —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä \"60000\")\n  const [amountDisplay, setAmountDisplay] = useState('');      // —Å —Ç–æ—á–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä \"60.000\")\n  const [amountError, setAmountError]     = useState('');\n  const [isProcessing, setIsProcessing]   = useState(false);\n  const [resultData, setResultData]       = useState(null);\n\n  const [carouselIndex, setCarouselIndex] = useState(0);       // —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ä—É—Å–µ–ª–∏ (0,1,2)\n  const [contactMode, setContactMode]     = useState(false);   // –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ —Ñ–æ—Ä–º—É ¬´–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª\n  const [contactSending, setContactSending] = useState(false);\n  const [contactSent, setContactSent]     = useState(false);\n\n  // –ü–æ–ª—è —Ñ–æ—Ä–º—ã ¬´–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª\n  const [lastName, setLastName]           = useState('');\n  const [firstName, setFirstName]         = useState('');\n  const [middleName, setMiddleName]       = useState('');\n  const [workCity, setWorkCity]           = useState('');\n\n  // Email –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å: –æ–∫, –µ—Å–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ \"@vtb.ru\"\n  const emailValid = email.toLowerCase().endsWith('@vtb.ru');\n\n  // ===== –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ =====\n  function getAge(d) {\n    if (!(d instanceof Date)) return 0;\n    const today = new Date();\n    let age = today.getFullYear() - d.getFullYear();\n    if (\n      today.getMonth() < d.getMonth() ||\n      (today.getMonth() === d.getMonth() && today.getDate() < d.getDate())\n    ) {\n      age--;\n    }\n    return age;\n  }\n\n  function isAmountValid() {\n    const n = parseInt(amountRaw, 10) || 0;\n    return (calcType === 'premium' && n >= 60000) ||\n           (calcType === 'sum'     && n >= 450000);\n  }\n\n  function canGoNext() {\n    return (\n      step === 2 &&\n      getAge(birthDate) >= 18 &&\n      gender &&\n      calcType &&\n      amountRaw &&\n      isAmountValid()\n    );\n  }\n\n  // ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫: –®–∞–≥ 1 ‚Üí –®–∞–≥ 2 =====\n  function handleEmailNext() {\n    if (!emailValid) {\n      setEmailError('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–æ—á—Ç—É –¥–æ–º–µ–Ω–∞ @vtb.ru');\n      return;\n    }\n    setEmailError('');\n    // –°–±—Ä–æ—Å —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ª–µ–π –ø–µ—Ä–µ–¥ –≤—Ç–æ—Ä—ã–º —à–∞–≥–æ–º\n    setGender(null);\n    setCalcType(null);\n    setAmountRaw('');\n    setAmountDisplay('');\n    setAmountError('');\n    setStep(2);\n  }\n\n  // ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É–º–º—ã: —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å —Ç–æ—á–∫–∞–º–∏ =====\n  function onAmountChange(e) {\n    const raw = e.target.value.replace(/\\D/g, ''); // –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã\n    setAmountRaw(raw);\n    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º display —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ç—ã—Å—è—á —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É\n    let d = raw, o = '';\n    while (d.length > 3) {\n      o = '.' + d.slice(-3) + o;\n      d = d.slice(0, -3);\n    }\n    setAmountDisplay(d + o);\n\n    const n = parseInt(raw, 10) || 0;\n    if (calcType === 'premium' && n < 60000) {\n      setAmountError('–ú–∏–Ω. 60 000 ‚ÇΩ');\n    } else if (calcType === 'sum' && n < 450000) {\n      setAmountError('–ú–∏–Ω. 450 000 ‚ÇΩ');\n    } else {\n      setAmountError('');\n    }\n  }\n\n  // ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫: –®–∞–≥ 2 ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä =====\n  async function handleNext() {\n    if (!canGoNext()) return;\n    setIsProcessing(true);\n\n    const dateStr = birthDate.toLocaleDateString('ru-RU', {\n      day: '2-digit', month: '2-digit', year: 'numeric'\n    });\n    const payload = {\n      email,\n      birthdate: dateStr,\n      age:        getAge(birthDate),\n      gender,\n      payment:    calcType === 'premium' ? '–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞' : '–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã',\n      sum:        parseInt(amountRaw, 10)\n    };\n\n    try {\n      const res = await fetch('/api/proxy/snp/save', {\n        method:  'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body:    JSON.stringify(payload)\n      });\n      if (!res.ok) {\n        console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞', res.status, await res.text());\n        alert(`–û—à–∏–±–∫–∞ ${res.status}: —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å`);\n      } else {\n        const data = await res.json();\n        /*\n          –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:\n          {\n            calculationDate: \"...\",\n            gender: \"...\",\n            age: ...,\n            payment: \"...\",\n            contribution: rv(\"C13\"),            // C13\n            totalContribution: rv(\"C16\"),       // C16\n            accrualPercent: rv(\"H12\"),          // H12 (–Ω–∞–ø—Ä–∏–º–µ—Ä 0.44)\n            accrualAmount: rv(\"H13\"),           // H13\n            totalAccrual: rv(\"H16\"),            // H16\n            finalAnnual: rv(\"M13\"),             // M13\n            finalTotal: rv(\"M16\")               // M16\n          }\n        */\n        setResultData(data);\n        setCarouselIndex(0);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', err);\n      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å');\n    } finally {\n      setIsProcessing(false);\n    }\n  }\n\n  function goHome() {\n    navigate(-1);\n  }\n\n  // ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫: ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É¬ª =====\n  async function handleSendToManager() {\n    // –í–∞–ª–∏–¥–∏—Ä—É–µ–º –ø–æ–ª—è\n    if (!lastName.trim() || !firstName.trim() || !workCity.trim()) {\n      alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã.');\n      return;\n    }\n    setContactSending(true);\n\n    // –°–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–º—É –∏ —Ç–µ–ª–æ –ø–∏—Å—å–º–∞\n    const fullName = `${lastName.trim()} ${firstName.trim()} ${middleName.trim()}`;\n    const subject = `–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–ª–∏—Å \"–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç\" ‚Äì ${fullName}`;\n    const bodyLines = [\n      '–î–æ–±—Ä—ã–π –¥–µ–Ω—å, –∫–æ–ª–ª–µ–≥–∞!',\n      '',\n      '–ö –í–∞–º –ø–æ—Å—Ç—É–ø–∏–ª–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–ª–∏—Å–∞ \"–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç\"',\n      '',\n      `–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: ${fullName}`,\n      `–ü–æ–ª: ${gender}`,\n      `–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: ${birthDate.toLocaleDateString('ru-RU', { day:'2-digit', month:'2-digit', year:'numeric' })}`,\n      `–í–æ–∑—Ä–∞—Å—Ç: ${getAge(birthDate)}`,\n      `–ü–æ—á—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: ${email}`,\n      `–ì–æ—Ä–æ–¥ —Ä–∞–±–æ—Ç—ã: ${workCity.trim()}`,\n      '',\n      `–†–∞–∑–º–µ—Ä –≤–∑–Ω–æ—Å–∞: ${amountDisplay} ‚ÇΩ`\n    ];\n    const body = bodyLines.join('\\r\\n');\n\n    const payload = {\n      subject,\n      body\n    };\n\n    try {\n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ –ø—Ä–æ–∫—Å–∏, –∞ –∑–∞—Ç–µ–º –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π endpoint\n      const res = await fetch('/api/proxy/snp/send_manager', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) {\n        console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É:', res.status, await res.text());\n        alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É: ${res.status}`);\n        setContactSending(false);\n      } else {\n        setContactSending(false);\n        setContactSent(true);\n        // –ß–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n        setTimeout(() => navigate(-1), 4000);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É:', err);\n      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É');\n      setContactSending(false);\n    }\n  }\n\n  // ===== –≠–∫—Ä–∞–Ω ¬´–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á—ë—Ç‚Ä¶¬ª =====\n  if (isProcessing) {\n    return (\n      <div className=\"processing-screen\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n        <div className=\"logo-wrapper animate-logo\">\n          <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n        </div>\n        <p className=\"processing-title\">\n          –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á—ë—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç¬ª\n        </p>\n        <div className=\"arrow-animation\">‚Üí</div>\n      </div>\n    );\n  }\n\n  // ===== –≠–∫—Ä–∞–Ω ¬´–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É‚Ä¶¬ª =====\n  if (contactSending) {\n    return (\n      <div className=\"processing-screen\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n        <div className=\"logo-wrapper animate-logo\">\n          <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n        </div>\n        <p className=\"processing-title\">\n          –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á—ë—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É...\n        </p>\n        <div className=\"arrow-animation\">‚Üí</div>\n      </div>\n    );\n  }\n\n  // ===== –≠–∫—Ä–∞–Ω ¬´–£—Å–ø–µ—Ö –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É¬ª =====\n  if (contactSent) {\n    const fullName = `${lastName.trim()} ${firstName.trim()} ${middleName.trim()}`;\n    return (\n      <div className=\"processing-screen\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n        <div className=\"logo-wrapper animate-logo\">\n          <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n        </div>\n        <p className=\"processing-title\">\n          {fullName}, –Ω–∞—à —ç–∫—Å–ø–µ—Ä—Ç —Å–≤—è–∂–µ—Ç—Å—è —Å –í–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!<br/>–û—Ç–ª–∏—á–Ω–æ–≥–æ –¥–Ω—è, –∫–æ–ª–ª–µ–≥–∞!\n        </p>\n      </div>\n    );\n  }\n\n  // ===== –ï—Å–ª–∏ resultData –µ—Å—Ç—å ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ + –∫–∞—Ä—É—Å–µ–ª—å –∏–ª–∏ —Ñ–æ—Ä–º—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ =====\n  if (resultData) {\n    // –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞\n    const todayStr = new Date().toLocaleDateString('ru-RU', {\n      day: '2-digit', month: '2-digit', year: 'numeric'\n    });\n\n    const {\n      gender:            resGender,\n      payment:           resPayment,\n      contribution,      // C13\n      totalContribution, // C16\n      accrualPercent,    // H12 (0.44)\n      accrualAmount,     // H13\n      totalAccrual,      // H16\n      finalAnnual,       // M13\n      finalTotal         // M16\n    } = resultData;\n\n    // –ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑ 0.44 ‚Üí 44\n    const accrualPercentDisplay = Math.round(Number(accrualPercent) * 100);\n\n    // –§–æ—Ä–º–∞—Ç—Ç–µ—Ä ¬´100000¬ª ‚Üí ¬´100 000¬ª\n    function fmt(number) {\n      return Number(number).toLocaleString('ru-RU', { minimumFractionDigits: 0 });\n    }\n\n    // ===== –ï—Å–ª–∏ contactMode=true, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É ¬´–í–≤–µ–¥–∏—Ç–µ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ¬ª =====\n    if (contactMode) {\n      return (\n        <div className=\"snp-container\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n          <div className=\"polls-header\">\n            <button className=\"back-btn\" onClick={goHome}>\n              <svg viewBox=\"0 0 24 24\">\n                <path d=\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\" />\n              </svg>\n            </button>\n            <div className=\"logo-wrapper animate-logo\">\n              <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n            </div>\n            <button\n              className=\"forward-btn\"\n              onClick={() => setContactMode(false)}\n            >\n              <span className=\"arrow-icon\">‚Üê</span>\n            </button>\n          </div>\n\n          <div className=\"content-wrapper\">\n            <h2 className=\"contact-title\">\n              –í–≤–µ–¥–∏—Ç–µ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ:\n            </h2>\n            <div className=\"contact-form\">\n              <label>–§–∞–º–∏–ª–∏—è:</label>\n              <input\n                type=\"text\"\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é\"\n                value={lastName}\n                onChange={e => setLastName(e.target.value)}\n              />\n\n              <label>–ò–º—è:</label>\n              <input\n                type=\"text\"\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ –∏–º—è\"\n                value={firstName}\n                onChange={e => setFirstName(e.target.value)}\n              />\n\n              <label>–û—Ç—á–µ—Å—Ç–≤–æ:</label>\n              <input\n                type=\"text\"\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ –æ—Ç—á–µ—Å—Ç–≤–æ\"\n                value={middleName}\n                onChange={e => setMiddleName(e.target.value)}\n              />\n\n              <label>–ì–æ—Ä–æ–¥ —Ä–∞–±–æ—Ç—ã:</label>\n              <input\n                type=\"text\"\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥\"\n                value={workCity}\n                onChange={e => setWorkCity(e.target.value)}\n              />\n            </div>\n\n            <button\n              className=\"contact-btn\"\n              onClick={handleSendToManager}\n            >\n              –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    // ===== –ò–Ω–∞—á–µ (contactMode=false) ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã + –∫–∞—Ä—É—Å–µ–ª—å =====\n    return (\n      <div className=\"snp-container\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n        <div className=\"polls-header\">\n          <button className=\"back-btn\" onClick={goHome}>\n            <svg viewBox=\"0 0 24 24\">\n              <path d=\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\" />\n            </svg>\n          </button>\n          <div className=\"logo-wrapper animate-logo\">\n            <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n          </div>\n          <button\n            className=\"repeat-btn\"\n            onClick={() => {\n              // –°–±—Ä–æ—Å –∫ —à–∞–≥—É 2\n              setResultData(null);\n              setGender(null);\n              setCalcType(null);\n              setAmountRaw('');\n              setAmountDisplay('');\n              setAmountError('');\n              setStep(2);\n              setContactMode(false);\n            }}\n          >\n            <svg viewBox=\"0 0 24 24\">\n              <path\n                d=\"M12 4V1L8 5l4 4V6\n                   c4.41 0 8 3.59 8 8\n                   s-3.59 8-8 8-8-3.59-8-8h2\n                   c0 3.31 2.69 6 6 6s6-2.69 6-6\n                   -2.69-6-6-6v3l-4-4 4-4z\"\n                fill=\"#fff\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"content-wrapper\">\n          <h1 className=\"polls-title\">\n            –†–∞—Å—á—ë—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç¬ª\n          </h1>\n\n          <div className=\"params-container\">\n            <h2>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>\n            <p>–î–∞—Ç–∞ —Ä–∞—Å—á—ë—Ç–∞: {todayStr}</p>\n            <p>–í–æ–∑—Ä–∞—Å—Ç: {getAge(birthDate)} –ª–µ—Ç</p>\n            <p>–ü–æ–ª: {resGender}</p>\n            <p>–†–∞—Å—á—ë—Ç –æ—Ç: {resPayment}</p>\n          </div>\n\n          {/* ==== –ö–ê–†–£–°–ï–õ–¨ ==== */}\n          <div className=\"carousel-container\">\n            {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã */}\n            <div className=\"carousel-indicators\">\n              <span className={carouselIndex === 0 ? 'active' : ''}></span>\n              <span className={carouselIndex === 1 ? 'active' : ''}></span>\n              <span className={carouselIndex === 2 ? 'active' : ''}></span>\n            </div>\n\n            {/* –û–±—Ä–µ–∑–∞—é—â–µ–µ –æ–∫–Ω–æ */}\n            <div className=\"carousel-clipper\">\n              <div\n                className=\"carousel-wrapper\"\n                style={{ transform: `translateX(-${carouselIndex * 100}%)` }}\n              >\n                {/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 */}\n                <div className=\"carousel-page\">\n                  <div className=\"first-line\">–í —Ç–µ—á–µ–Ω–∏–µ 5 –ª–µ—Ç</div>\n                  <div className=\"unit\">–í—ã –≤–Ω–æ—Å–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É</div>\n                  <div className=\"value\">{fmt(contribution)} ‚ÇΩ</div>\n                  <div className=\"unit\">–ï–∂–µ–≥–æ–¥–Ω–æ</div>\n                  <div className=\"value\">{fmt(totalContribution)} ‚ÇΩ</div>\n                  <div className=\"footer-label\">–°—É–º–º–∞ –≤–∞—à–∏—Ö –≤–∑–Ω–æ—Å–æ–≤</div>\n                </div>\n\n                {/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2 */}\n                <div className=\"carousel-page\">\n                  <div className=\"first-line\">–ù–∞—á–∏—Å–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</div>\n                  <div className=\"unit\">{accrualPercentDisplay}% –æ—Ç –∫–∞–∂–¥–æ–≥–æ –≤–∑–Ω–æ—Å–∞</div>\n                  <div className=\"value\">{fmt(accrualAmount)} ‚ÇΩ</div>\n                  <div className=\"unit\">–ï–∂–µ–≥–æ–¥–Ω–æ</div>\n                  <div className=\"value\">{fmt(totalAccrual)} ‚ÇΩ</div>\n                  <div className=\"footer-label\">–û–±—â–∞—è —Å—É–º–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π</div>\n                </div>\n\n                {/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ 3 */}\n                <div className=\"carousel-page\">\n                  <div className=\"first-line\">–ò—Ç–æ–≥–æ–≤–∞—è –≥–æ–¥–æ–≤–∞—è –≤—ã–ø–ª–∞—Ç–∞</div>\n                  <div className=\"unit\">–°—É–º–º–∞ —Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è–º–∏</div>\n                  <div className=\"value\">{fmt(finalAnnual)} ‚ÇΩ</div>\n                  <div className=\"unit\">–°—É–º–º–∞ –∑–∞ 5 –ª–µ—Ç</div>\n                  <div className=\"value\">{fmt(finalTotal)} ‚ÇΩ</div>\n                  <div className=\"footer-label\">–í–∞—à –∫–∞–ø–∏—Ç–∞–ª —á–µ—Ä–µ–∑ 5 –ª–µ—Ç</div>\n                </div>\n              </div>\n            </div>\n\n            {/* –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∫–∞—Ä—É—Å–µ–ª–∏ */}\n            <button\n              className=\"carousel-control prev\"\n              onClick={() => setCarouselIndex(idx => idx - 1)}\n              disabled={carouselIndex === 0}\n            >\n              ‚Äπ\n            </button>\n            <button\n              className=\"carousel-control next\"\n              onClick={() => setCarouselIndex(idx => idx + 1)}\n              disabled={carouselIndex === 2}\n            >\n              ‚Ä∫\n            </button>\n          </div>\n          {/* ==== –∫–æ–Ω–µ—Ü –ö–ê–†–£–°–ï–õ–ò ==== */}\n\n          {/* –ö–Ω–æ–ø–∫–∞ ¬´–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª */}\n          <button\n            className=\"contact-btn\"\n            onClick={() => setContactMode(true)}\n          >\n            –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // ===== –û–°–ù–û–í–ù–û–ô UI (–®–∞–≥ 1 –∏ –®–∞–≥ 2) =====\n  return (\n    <div className=\"snp-container\" style={{ backgroundImage:`url(${backgroundImage})` }}>\n      <div className=\"polls-header\">\n        <button className=\"back-btn\" onClick={goHome}>\n          <svg viewBox=\"0 0 24 24\">\n            <path d=\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\" />\n          </svg>\n        </button>\n        <div className=\"logo-wrapper animate-logo\">\n          <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n        </div>\n        <button\n          className=\"forward-btn\"\n          onClick={step === 1 ? handleEmailNext : handleNext}\n          disabled={step === 1 ? !emailValid : !canGoNext()}\n        >\n          <span className=\"arrow-icon\">‚Üí</span>\n        </button>\n      </div>\n\n      <div className=\"content-wrapper\">\n        {/* ===== –®–∞–≥ 1: –í–≤–æ–¥ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–æ—á—Ç—ã ===== */}\n        {step === 1 && (\n          <>\n            <div className=\"email-step\">\n              <label className=\"email-label\">–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ—á—Ç–∞ –í–¢–ë:</label>\n              <input\n                type=\"email\"\n                inputMode=\"email\"\n                autoComplete=\"email\"\n                autoCapitalize=\"none\"\n                spellCheck=\"false\"\n                placeholder=\"example@vtb.ru\"\n                value={email}\n                onChange={e => setEmail(e.target.value)}\n              />\n            </div>\n            {emailError && <div className=\"input-error\">{emailError}</div>}\n\n            <button\n              className=\"polls-btn btn1\"\n              onClick={handleEmailNext}\n              disabled={!emailValid}\n            >\n              –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å\n            </button>\n          </>\n        )}\n\n        {/* ===== –®–∞–≥ 2: –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ===== */}\n        {step === 2 && (\n          <>\n            <h1 className=\"polls-title\">\n              –†–∞—Å—á—ë—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç¬ª\n            </h1>\n\n            <div className=\"date-section\">\n              <label className=\"section-label\">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>\n              <DateWheelPicker\n                value={birthDate}\n                onChange={val => {\n                  if (val instanceof Date) {\n                    setBirthDate(val);\n                  } else if (val?.day) {\n                    setBirthDate(new Date(val.year, val.month - 1, val.day));\n                  }\n                }}\n              />\n            </div>\n\n            <div className=\"section-subtitle\">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª:</div>\n            <div className=\"gender-section\">\n              <button\n                className={`insurance-btn ${gender === '–º—É–∂—Å–∫–æ–π' ? 'selected' : ''}`}\n                onClick={() => setGender('–º—É–∂—Å–∫–æ–π')}\n              >\n                <div>–ú—É–∂—Å–∫–æ–π</div>\n                <div className=\"emoji\">üë®</div>\n              </button>\n              <button\n                className={`insurance-btn ${gender === '–∂–µ–Ω—Å–∫–∏–π' ? 'selected' : ''}`}\n                onClick={() => setGender('–∂–µ–Ω—Å–∫–∏–π')}\n              >\n                <div>–ñ–µ–Ω—Å–∫–∏–π</div>\n                <div className=\"emoji\">üë©</div>\n              </button>\n            </div>\n\n            <div className=\"section-subtitle\">–†–∞—Å—á—ë—Ç –æ—Ç‚Ä¶</div>\n            <div className=\"insurance-options\">\n              <button\n                className={`insurance-btn ${calcType === 'premium' ? 'selected' : ''}`}\n                onClick={() => setCalcType('premium')}\n              >\n                <div>–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ</div>\n                <div>–≤–∑–Ω–æ—Å–∞</div>\n              </button>\n              <button\n                className={`insurance-btn ${calcType === 'sum' ? 'selected' : ''}`}\n                onClick={() => setCalcType('sum')}\n              >\n                <div>–°—Ç—Ä–∞—Ö–æ–≤–æ–π</div>\n                <div>—Å—É–º–º—ã</div>\n              </button>\n            </div>\n\n            {calcType && (\n              <>\n                <div className=\"section-subtitle\">–°—É–º–º–∞ (‚ÇΩ):</div>\n                <div className=\"sum-section\">\n                  <input\n                    type=\"text\"\n                    placeholder={calcType === 'premium' ? '–ú–∏–Ω. 60 000' : '–ú–∏–Ω. 450 000'}\n                    value={amountDisplay}\n                    onChange={onAmountChange}\n                  />\n                </div>\n                {amountError && <div className=\"input-error\">{amountError}</div>}\n              </>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}