{"ast":null,"code":"// src/SNPPage.js\nimport React,{useState}from'react';import{useNavigate}from'react-router-dom';import mainmenuIcon from'./components/icons/mainmenu.png';import logoImage from'./components/logo.png';import backgroundImage from'./components/background.png';import DateWheelPicker from'./DateWheelPicker';import'./PollsPage.css';import'./SNPPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function SNPPage(){const navigate=useNavigate();// состояния\nconst[step,setStep]=useState(1);const[email,setEmail]=useState('');const[emailError,setEmailError]=useState('');const[birthDate,setBirthDate]=useState(new Date());const[gender,setGender]=useState(null);const[calcType,setCalcType]=useState(null);const[amountRaw,setAmountRaw]=useState('');const[amountDisplay,setAmountDisplay]=useState('');const[amountError,setAmountError]=useState('');const[isProcessing,setIsProcessing]=useState(false);const[resultData,setResultData]=useState(null);// подсчет возраста\nconst getAge=d=>{if(!(d instanceof Date))return 0;const today=new Date();let age=today.getFullYear()-d.getFullYear();if(today.getMonth()<d.getMonth()||today.getMonth()===d.getMonth()&&today.getDate()<d.getDate())age--;return age;};// проверка суммы для выбранного типа\nconst isAmountValid=()=>{const n=parseInt(amountRaw,10)||0;return calcType==='premium'&&n>=60000||calcType==='sum'&&n>=450000;};// можно ли нажать «Далее →»\nconst canGoNext=()=>step===2&&getAge(birthDate)>=18&&Boolean(gender)&&Boolean(calcType)&&Boolean(amountRaw)&&isAmountValid();// Шаг 1: проверка почты\nconst handleEmailNext=()=>{if(!email.toLowerCase().endsWith('@vtb.ru')){setEmailError('Используйте корпоративную почту домена @vtb.ru');return;}setEmailError('');setStep(2);};// ввод суммы: raw + визуальный display\nconst onAmountChange=e=>{const raw=e.target.value.replace(/\\D/g,'');setAmountRaw(raw);let d=raw,o='';while(d.length>3){o='.'+d.slice(-3)+o;d=d.slice(0,-3);}setAmountDisplay(d+o);const n=parseInt(raw,10)||0;if(calcType==='premium'&&n<60000)setAmountError('Мин. 60 000 ₽');else if(calcType==='sum'&&n<450000)setAmountError('Мин. 450 000 ₽');else setAmountError('');};// Шаг 2: «Далее →» — теперь GET с query string\nconst handleNext=async()=>{setIsProcessing(true);const dateStr=birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});const params=new URLSearchParams({email,birthdate:dateStr,age:getAge(birthDate).toString(),gender,payment:calcType==='premium'?'Страхового взноса':'Страховой суммы',sum:amountRaw});try{var _res$headers$get;const res=await fetch(`/api/proxy/snp/save?${params.toString()}`,{method:'GET'});if(!res.ok){const text=await res.text();console.error('Ошибка сервера:',res.status,text);alert(`Сервер вернул ошибку ${res.status}`);}else if((_res$headers$get=res.headers.get('content-type'))!==null&&_res$headers$get!==void 0&&_res$headers$get.includes('application/json')){const data=await res.json();setResultData(data);}else{const text=await res.text();console.error('Ожидали JSON, получили:',text);alert('Неправильный ответ сервера');}}catch(err){console.error('Ошибка запроса:',err);alert('Не удалось отправить запрос');}finally{setIsProcessing(false);}};const goHome=()=>navigate('/MainMenu');// экран «Выполняется расчёт…»\nif(isProcessing){return/*#__PURE__*/_jsxs(\"div\",{className:\"processing-screen\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442\\u0441\\u044F \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"arrow-animation\",children:\"\\u2192\"})]});}// экран результатов\nif(resultData){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442:\"}),\" \",resultData.age,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u043E\\u043B:\"}),\" \",resultData.gender]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0438\\u043F \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430:\"}),\" \",resultData.payment]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u0443\\u043C\\u043C\\u0430:\"}),\" \",amountDisplay,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0418\\u0442\\u043E\\u0433\\u043E\\u0432\\u0430\\u044F \\u043F\\u0440\\u0435\\u043C\\u0438\\u044F:\"}),\" \",resultData.totalPremium,\" \\u20BD\"]})]});}// основной UI\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"polls-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:goHome,children:/*#__PURE__*/_jsx(\"img\",{src:mainmenuIcon,alt:\"\\u0414\\u043E\\u043C\\u043E\\u0439\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),step===2&&/*#__PURE__*/_jsx(\"button\",{className:\"forward-btn\",onClick:handleNext,disabled:!canGoNext(),children:/*#__PURE__*/_jsx(\"span\",{className:\"arrow-icon\",children:\"\\u2192\"})})]}),step===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"email-step\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"email-label\",children:\"\\u041A\\u043E\\u0440\\u043F\\u043E\\u0440\\u0430\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430 \\u0412\\u0422\\u0411:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"example@vtb.ru\",value:email,onChange:e=>setEmail(e.target.value)})]}),emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error\",children:emailError}),/*#__PURE__*/_jsx(\"div\",{className:\"polls-buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"polls-btn animate-btn btn1\",onClick:handleEmailNext,children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"})})]}),step===2&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"polls-title\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\xAB\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\xBB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"section-label\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"date-wheels\",children:/*#__PURE__*/_jsx(DateWheelPicker,{value:birthDate,onChange:val=>{if(val instanceof Date)setBirthDate(val);else if(val!==null&&val!==void 0&&val.day)setBirthDate(new Date(val.year,val.month-1,val.day));}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"section-gap\"}),/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${gender==='male'?'selected':''}`,onClick:()=>setGender(prev=>prev==='male'?null:'male'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u041C\\u0443\\u0436\\u0441\\u043A\\u043E\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDC68\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${gender==='female'?'selected':''}`,onClick:()=>setGender(prev=>prev==='female'?null:'female'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0416\\u0435\\u043D\\u0441\\u043A\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDC69\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"section-gap\"}),/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043E\\u0442\\u2026\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${calcType==='premium'?'selected':''}`,onClick:()=>setCalcType(prev=>prev==='premium'?null:'premium'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0433\\u043E\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0432\\u0437\\u043D\\u043E\\u0441\\u0430\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${calcType==='sum'?'selected':''}`,onClick:()=>setCalcType(prev=>prev==='sum'?null:'sum'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0441\\u0443\\u043C\\u043C\\u044B\"})]})]}),calcType&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-gap\"}),/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 (\\u20BD):\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sum-section\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:calcType==='premium'?'Мин. 60 000':'Мин. 450 000',value:amountDisplay,onChange:onAmountChange})}),amountError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error\",children:amountError})]})]})]});}","map":{"version":3,"names":["React","useState","useNavigate","mainmenuIcon","logoImage","backgroundImage","DateWheelPicker","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SNPPage","navigate","step","setStep","email","setEmail","emailError","setEmailError","birthDate","setBirthDate","Date","gender","setGender","calcType","setCalcType","amountRaw","setAmountRaw","amountDisplay","setAmountDisplay","amountError","setAmountError","isProcessing","setIsProcessing","resultData","setResultData","getAge","d","today","age","getFullYear","getMonth","getDate","isAmountValid","n","parseInt","canGoNext","Boolean","handleEmailNext","toLowerCase","endsWith","onAmountChange","e","raw","target","value","replace","o","length","slice","handleNext","dateStr","toLocaleDateString","day","month","year","params","URLSearchParams","birthdate","toString","payment","sum","_res$headers$get","res","fetch","method","ok","text","console","error","status","alert","headers","get","includes","data","json","err","goHome","className","children","totalPremium","style","onClick","src","alt","disabled","type","placeholder","onChange","val","prev"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/SNPPage.js"],"sourcesContent":["// src/SNPPage.js\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport mainmenuIcon    from './components/icons/mainmenu.png';\nimport logoImage       from './components/logo.png';\nimport backgroundImage from './components/background.png';\nimport DateWheelPicker from './DateWheelPicker';\n\nimport './PollsPage.css';\nimport './SNPPage.css';\n\nexport default function SNPPage() {\n  const navigate = useNavigate();\n\n  // состояния\n  const [step, setStep]                   = useState(1);\n  const [email, setEmail]                 = useState('');\n  const [emailError, setEmailError]       = useState('');\n  const [birthDate, setBirthDate]         = useState(new Date());\n  const [gender, setGender]               = useState(null);\n  const [calcType, setCalcType]           = useState(null);\n  const [amountRaw, setAmountRaw]         = useState('');\n  const [amountDisplay, setAmountDisplay] = useState('');\n  const [amountError, setAmountError]     = useState('');\n  const [isProcessing, setIsProcessing]   = useState(false);\n  const [resultData, setResultData]       = useState(null);\n\n  // подсчет возраста\n  const getAge = d => {\n    if (!(d instanceof Date)) return 0;\n    const today = new Date();\n    let age = today.getFullYear() - d.getFullYear();\n    if (\n      today.getMonth() < d.getMonth() ||\n      (today.getMonth() === d.getMonth() && today.getDate() < d.getDate())\n    ) age--;\n    return age;\n  };\n\n  // проверка суммы для выбранного типа\n  const isAmountValid = () => {\n    const n = parseInt(amountRaw, 10) || 0;\n    return (calcType === 'premium' && n >= 60000) || (calcType === 'sum' && n >= 450000);\n  };\n\n  // можно ли нажать «Далее →»\n  const canGoNext = () =>\n    step === 2 &&\n    getAge(birthDate) >= 18 &&\n    Boolean(gender) &&\n    Boolean(calcType) &&\n    Boolean(amountRaw) &&\n    isAmountValid();\n\n  // Шаг 1: проверка почты\n  const handleEmailNext = () => {\n    if (!email.toLowerCase().endsWith('@vtb.ru')) {\n      setEmailError('Используйте корпоративную почту домена @vtb.ru');\n      return;\n    }\n    setEmailError('');\n    setStep(2);\n  };\n\n  // ввод суммы: raw + визуальный display\n  const onAmountChange = e => {\n    const raw = e.target.value.replace(/\\D/g, '');\n    setAmountRaw(raw);\n    let d = raw, o = '';\n    while (d.length > 3) {\n      o = '.' + d.slice(-3) + o;\n      d = d.slice(0, -3);\n    }\n    setAmountDisplay(d + o);\n\n    const n = parseInt(raw, 10) || 0;\n    if (calcType === 'premium' && n < 60000)      setAmountError('Мин. 60 000 ₽');\n    else if (calcType === 'sum' && n < 450000)    setAmountError('Мин. 450 000 ₽');\n    else                                          setAmountError('');\n  };\n\n  // Шаг 2: «Далее →» — теперь GET с query string\n  const handleNext = async () => {\n    setIsProcessing(true);\n\n    const dateStr = birthDate.toLocaleDateString('ru-RU', {\n      day: '2-digit', month: '2-digit', year: 'numeric'\n    });\n\n    const params = new URLSearchParams({\n      email,\n      birthdate: dateStr,\n      age:        getAge(birthDate).toString(),\n      gender,\n      payment:    calcType === 'premium' ? 'Страхового взноса' : 'Страховой суммы',\n      sum:        amountRaw\n    });\n\n    try {\n      const res = await fetch(`/api/proxy/snp/save?${params.toString()}`, {\n        method: 'GET'\n      });\n\n      if (!res.ok) {\n        const text = await res.text();\n        console.error('Ошибка сервера:', res.status, text);\n        alert(`Сервер вернул ошибку ${res.status}`);\n      } else if (res.headers.get('content-type')?.includes('application/json')) {\n        const data = await res.json();\n        setResultData(data);\n      } else {\n        const text = await res.text();\n        console.error('Ожидали JSON, получили:', text);\n        alert('Неправильный ответ сервера');\n      }\n    } catch (err) {\n      console.error('Ошибка запроса:', err);\n      alert('Не удалось отправить запрос');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const goHome = () => navigate('/MainMenu');\n\n  // экран «Выполняется расчёт…»\n  if (isProcessing) {\n    return (\n      <div className=\"processing-screen\">\n        <p>Выполняется расчёт...</p>\n        <div className=\"arrow-animation\">→</div>\n      </div>\n    );\n  }\n\n  // экран результатов\n  if (resultData) {\n    return (\n      <div className=\"result-container\">\n        <h2>Результаты расчёта</h2>\n        <p><strong>Возраст:</strong> {resultData.age} лет</p>\n        <p><strong>Пол:</strong> {resultData.gender}</p>\n        <p><strong>Тип расчёта:</strong> {resultData.payment}</p>\n        <p><strong>Сумма:</strong> {amountDisplay} ₽</p>\n        <p><strong>Итоговая премия:</strong> {resultData.totalPremium} ₽</p>\n      </div>\n    );\n  }\n\n  // основной UI\n  return (\n    <div\n      className=\"snp-container\"\n      style={{ backgroundImage: `url(${backgroundImage})` }}\n    >\n      {/* HEADER */}\n      <div className=\"polls-header\">\n        <button className=\"back-btn\" onClick={goHome}>\n          <img src={mainmenuIcon} alt=\"Домой\" />\n        </button>\n        <div className=\"logo-wrapper animate-logo\">\n          <img className=\"poll-logo\" src={logoImage} alt=\"Логотип\" />\n        </div>\n        {step === 2 && (\n          <button\n            className=\"forward-btn\"\n            onClick={handleNext}\n            disabled={!canGoNext()}\n          >\n            <span className=\"arrow-icon\">→</span>\n          </button>\n        )}\n      </div>\n\n      {/* Step 1 */}\n      {step === 1 && (\n        <>\n          <div className=\"email-step\">\n            <label className=\"email-label\">Корпоративная почта ВТБ:</label>\n            <input\n              type=\"email\"\n              placeholder=\"example@vtb.ru\"\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n            />\n          </div>\n          {emailError && <div className=\"input-error\">{emailError}</div>}\n          <div className=\"polls-buttons\">\n            <button\n              className=\"polls-btn animate-btn btn1\"\n              onClick={handleEmailNext}\n            >\n              Продолжить\n            </button>\n          </div>\n        </>\n      )}\n\n      {/* Step 2 */}\n      {step === 2 && (\n        <>\n          <h1 className=\"polls-title\">\n            Расчёт по программе «Стратегия на пять. Гарант»\n          </h1>\n\n          <div className=\"date-section\">\n            <label className=\"section-label\">Дата рождения:</label>\n            <div className=\"date-wheels\">\n              <DateWheelPicker\n                value={birthDate}\n                onChange={val => {\n                  if (val instanceof Date) setBirthDate(val);\n                  else if (val?.day)\n                    setBirthDate(new Date(val.year, val.month - 1, val.day));\n                }}\n              />\n            </div>\n          </div>\n\n          <div className=\"section-gap\" />\n          <div className=\"section-subtitle\">Выберите пол:</div>\n          <div className=\"gender-section\">\n            <button\n              className={`insurance-btn ${gender==='male'?'selected':''}`}\n              onClick={()=>setGender(prev=>prev==='male'?null:'male')}\n            >\n              <div>Мужской</div><div className=\"emoji\">👨</div>\n            </button>\n            <button\n              className={`insurance-btn ${gender==='female'?'selected':''}`}\n              onClick={()=>setGender(prev=>prev==='female'?null:'female')}\n            >\n              <div>Женский</div><div className=\"emoji\">👩</div>\n            </button>\n          </div>\n\n          <div className=\"section-gap\" />\n          <div className=\"section-subtitle\">Расчёт от…</div>\n          <div className=\"insurance-options\">\n            <button\n              className={`insurance-btn ${calcType==='premium'?'selected':''}`}\n              onClick={()=>setCalcType(prev=>prev==='premium'?null:'premium')}\n            >\n              <div>Страхового</div><div>взноса</div>\n            </button>\n            <button\n              className={`insurance-btn ${calcType==='sum'?'selected':''}`}\n              onClick={()=>setCalcType(prev=>prev==='sum'?null:'sum')}\n            >\n              <div>Страховой</div><div>суммы</div>\n            </button>\n          </div>\n\n          {calcType && (\n            <>\n              <div className=\"section-gap\" />\n              <div className=\"section-subtitle\">Сумма (₽):</div>\n              <div className=\"sum-section\">\n                <input\n                  type=\"text\"\n                  placeholder={calcType==='premium'?'Мин. 60 000':'Мин. 450 000'}\n                  value={amountDisplay}\n                  onChange={onAmountChange}\n                />\n              </div>\n              {amountError && <div className=\"input-error\">{amountError}</div>}\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}