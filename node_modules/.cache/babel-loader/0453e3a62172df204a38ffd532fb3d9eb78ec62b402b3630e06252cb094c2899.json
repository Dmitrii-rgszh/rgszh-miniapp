{"ast":null,"code":"import React,{useState,useEffect}from'react';import backgroundImage from'./components/background.png';import DateWheelPicker from'./DateWheelPicker';import logo from'./components/logo.png';import'./JustincasePage.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const JustincasePage=()=>{// 1) Общее состояние пользователя\nconst[userName,setUserName]=useState('');useEffect(()=>{const storedName=localStorage.getItem('userName');setUserName(storedName||'Гость');},[]);// 2) Собираемые данные\nconst[birthDate,setBirthDate]=useState(null);// формат \"dd/mm/yyyy\"\nconst[gender,setGender]=useState(null);// 'male' / 'female'\nconst[insuranceInfo,setInsuranceInfo]=useState(null);// 'yes' / 'no'\nconst[insuranceTerm,setInsuranceTerm]=useState('1');// срок страхования (лет)\nconst[insuranceSum,setInsuranceSum]=useState('');// форматированная сумма\nconst[insuranceFrequency,setInsuranceFrequency]=useState('');// периодичность оплаты\n// Ветка \"Да\" – пакеты\nconst[accidentPackage,setAccidentPackage]=useState(null);// 'yes' / 'no'\nconst[criticalPackage,setCriticalPackage]=useState(null);// 'yes' / 'no'\nconst[treatmentRegion,setTreatmentRegion]=useState(null);// 'russia' / 'abroad'\nconst[sportPackage,setSportPackage]=useState(null);// 'yes' / 'no'\n// Ветка \"Нет\" – вопросы о работе и доходах\nconst[hasJob,setHasJob]=useState(null);const[income2021,setIncome2021]=useState('');const[income2022,setIncome2022]=useState('');const[income2023,setIncome2023]=useState('');const[scholarship,setScholarship]=useState('');const[unsecuredLoans,setUnsecuredLoans]=useState('');// Новые состояния для дополнительного шага (при insuranceInfo === 'no')\nconst[breadwinnerStatus,setBreadwinnerStatus]=useState(null);// \"yes\", \"no\", \"notMe\"\nconst[incomeShare,setIncomeShare]=useState('');const[childrenCount,setChildrenCount]=useState('0');const[specialCareRelatives,setSpecialCareRelatives]=useState(null);// 'yes' / 'no'\n// 3) Шаги:\n// Шаг 1 – дата рождения, пол, знание параметров страхового полиса.\n// Шаг 2 – если insuranceInfo === 'yes': детали страхования, иначе: вопросы о работе и доходах.\n// Шаг 3 – если insuranceInfo === 'yes': вопросы по пакетам, иначе: дополнительные вопросы про семейный бюджет.\n// Шаг 4 – результат расчёта (после сохранения в Excel)\nconst[currentStep,setCurrentStep]=useState(1);const[isFinished,setIsFinished]=useState(false);// Новые состояния для процесса расчёта\nconst[isProcessing,setIsProcessing]=useState(false);const[resultData,setResultData]=useState(null);// ---------- Вспомогательные функции ----------\nconst parseDate=dateStr=>{const[day,month,year]=dateStr.split('/');return new Date(+year,+month-1,+day);};const calculateAge=dateObj=>{const today=new Date();let age=today.getFullYear()-dateObj.getFullYear();const m=today.getMonth()-dateObj.getMonth();if(m<0||m===0&&today.getDate()<dateObj.getDate()){age--;}return age;};// Форматирование суммы (например \"1.000.000\")\nconst formatSum=rawValue=>{let digits=rawValue.replace(/\\D/g,'');if(!digits)return'';let result='';while(digits.length>3){const chunk=digits.slice(-3);digits=digits.slice(0,-3);result='.'+chunk+result;}result=digits+result;return result;};const handleSumChange=e=>{setInsuranceSum(formatSum(e.target.value));};// Обработчики для деталей страхования (ветка \"Да\")\nconst handleTermChange=e=>{setInsuranceTerm(e.target.value);};const handleFrequencyChange=e=>{setInsuranceFrequency(e.target.value);};// Обработчики для ветки \"Нет\" (доходы)\nconst handleIncome2021Change=e=>{setIncome2021(formatSum(e.target.value));};const handleIncome2022Change=e=>{setIncome2022(formatSum(e.target.value));};const handleIncome2023Change=e=>{setIncome2023(formatSum(e.target.value));};const handleScholarshipChange=e=>{setScholarship(formatSum(e.target.value));};const handleUnsecuredLoansChange=e=>{setUnsecuredLoans(formatSum(e.target.value));};// Логирование изменения treatmentRegion для отладки\nuseEffect(()=>{console.log(\"treatmentRegion обновлён:\",treatmentRegion);},[treatmentRegion]);// Здесь не устанавливаем автоматически значение для treatmentRegion,\n// чтобы по умолчанию ни одна из кнопок не была выбрана.\n// ---------- Функция для проверки, можно ли перейти к следующему шагу ----------\nconst canGoNext=()=>{if(currentStep===1){return birthDate&&gender&&insuranceInfo;}else if(currentStep===2){if(insuranceInfo==='yes'){return insuranceTerm&&insuranceSum&&insuranceFrequency;}else{return hasJob&&income2021&&income2022&&income2023;}}else if(currentStep===3){if(insuranceInfo==='yes'){return accidentPackage&&criticalPackage&&(criticalPackage==='no'||treatmentRegion)&&sportPackage;}else{return breadwinnerStatus&&(breadwinnerStatus==='yes'||incomeShare)&&childrenCount!==''&&specialCareRelatives;}}else{return true;}};// ---------- Переходы между шагами ----------\nconst handleNext=()=>{if(!canGoNext()){alert('Не выполнены условия для перехода к следующему шагу');return;}if(currentStep===1){setCurrentStep(2);}else if(currentStep===2){setCurrentStep(3);}else if(currentStep===3){// Здесь не устанавливаем автоматически treatmentRegion – ждём выбора пользователя\nsetIsProcessing(true);// Формируем данные для калькулятора\nconst calculatorData={birthDate,gender,insuranceTerm,insuranceSum,insuranceFrequency,accidentPackage,criticalPackage,treatmentRegion,sportPackage,// для ветки \"Нет\"\nhasJob,income2021,income2022,income2023,scholarship,unsecuredLoans,breadwinnerStatus,incomeShare,childrenCount,specialCareRelatives};console.log(\"Отправляем данные калькулятора:\",calculatorData);// Отправляем запрос через прокси\nfetch('/api/proxy/calculator/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(calculatorData),credentials:'include'}).then(response=>response.json()).then(data=>{setResultData(data);setIsProcessing(false);setCurrentStep(4);// Переходим к шагу результатов\n}).catch(err=>{console.error(\"Ошибка сохранения данных калькулятора:\",err);setIsProcessing(false);alert(\"Ошибка сохранения данных калькулятора\");});}};const handlePrev=()=>{if(currentStep>1){setCurrentStep(currentStep-1);}};// Функция для обработки кнопки \"Меню\" – переход на страницу меню\nconst goToMenu=()=>{// Если вы используете React Router, можно использовать history.push('/menu')\n// Здесь для примера просто перенаправляем браузер\nwindow.location.href='/menu';};// Функция для обработки кнопки \"Повторить\" – сброс состояния и возврат к первому шагу\nconst repeatCalculation=()=>{// Сбросим состояние калькулятора, чтобы начать заново\nsetBirthDate(null);setGender(null);setInsuranceInfo(null);setInsuranceTerm('1');setInsuranceSum('');setInsuranceFrequency('');setAccidentPackage(null);setCriticalPackage(null);setTreatmentRegion(null);setSportPackage(null);setHasJob(null);setIncome2021('');setIncome2022('');setIncome2023('');setScholarship('');setUnsecuredLoans('');setBreadwinnerStatus(null);setIncomeShare('');setChildrenCount('0');setSpecialCareRelatives(null);setResultData(null);setCurrentStep(1);};// ---------- Рендер шагов ----------\nconst renderStep=()=>{if(isProcessing){return/*#__PURE__*/_jsxs(\"div\",{className:\"processing-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[userName,\", \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u043C \\u0440\\u0430\\u0441\\u0447\\u0435\\u0442...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"50\",height:\"50\",viewBox:\"0 0 50 50\",children:/*#__PURE__*/_jsx(\"circle\",{cx:\"25\",cy:\"25\",r:\"20\",stroke:\"#f00\",strokeWidth:\"5\",fill:\"none\",strokeLinecap:\"round\",children:/*#__PURE__*/_jsx(\"animateTransform\",{attributeName:\"transform\",type:\"rotate\",dur:\"1s\",from:\"0 25 25\",to:\"360 25 25\",repeatCount:\"indefinite\"})})})})]});}if(currentStep===4&&resultData){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0412\\u0430\\u0448\\u0430 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430 \\xAB\\u041D\\u0430 \\u0432\\u0441\\u044F\\u043A\\u0438\\u0439 \\u0441\\u043B\\u0443\\u0447\\u0430\\u0439\\xBB (\\u0440\\u0430\\u0441\\u0447\\u0435\\u0442 \\u043E\\u0442 \",resultData.calculationDate,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430: \",resultData.clientAge,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041F\\u043E\\u043B \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430: \",resultData.clientGender]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u0440\\u043E\\u043A \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F: \",resultData.insuranceTerm,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041E\\u0441\\u043D\\u043E\\u0432\\u043D\\u0430\\u044F \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430 (\\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0441\\u043B\\u0443\\u0447\\u0430\\u0439 \\u0443\\u0445\\u043E\\u0434\\u0430 \\u0438\\u0437 \\u0436\\u0438\\u0437\\u043D\\u0438 \\u0438 \\u0438\\u043D\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u043E\\u0441\\u0442\\u0438 I \\u0438 II \\u0433\\u0440\\u0443\\u043F\\u043F\\u044B):\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430: \",resultData.baseInsuranceSum]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u044F \\u043F\\u0440\\u0435\\u043C\\u0438\\u044F: \",resultData.basePremium,\" \\u0440\\u0443\\u0431.\"]}),resultData.accidentPackageIncluded&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041F\\u0430\\u043A\\u0435\\u0442 \\xAB\\u041D\\u0435\\u0441\\u0447\\u0430\\u0441\\u0442\\u043D\\u044B\\u0439 \\u0441\\u043B\\u0443\\u0447\\u0430\\u0439\\xBB:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430: \",resultData.accidentInsuranceSum]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u044F \\u043F\\u0440\\u0435\\u043C\\u0438\\u044F: \",resultData.accidentPremium,\" \\u0440\\u0443\\u0431.\"]})]}),resultData.criticalPackageIncluded&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041F\\u0430\\u043A\\u0435\\u0442 \\xAB\\u041A\\u0440\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0435 \\u0437\\u0430\\u0431\\u043E\\u043B\\u0435\\u0432\\u0430\\u043D\\u0438\\u044F\\xBB:\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 \\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430 60 000 000 \\u0440\\u0443\\u0431\\u043B\\u0435\\u0439, \\u0434\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E \\u043F\\u043E \\u0440\\u0435\\u0430\\u0431\\u0438\\u043B\\u0438\\u0442\\u0430\\u0446\\u0438\\u0438 \\u2013 100 000 \\u0440\\u0443\\u0431\\u043B\\u0435\\u0439.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u044F \\u043F\\u0440\\u0435\\u043C\\u0438\\u044F: \",resultData.criticalPremium,\" \\u0440\\u0443\\u0431.\"]})]}),resultData.sportOptionIncluded&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041E\\u043F\\u0446\\u0438\\u044F \\xAB\\u041B\\u044E\\u0431\\u0438\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u0438\\u0439 \\u0441\\u043F\\u043E\\u0440\\u0442\\xBB:\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u043E\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0418\\u0442\\u043E\\u0433\\u043E \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u044F \\u043F\\u0440\\u0435\\u043C\\u0438\\u044F:\"}),\" \",resultData.totalPremium,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u043E\\u0440\\u044F\\u0434\\u043E\\u043A \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B \\u043F\\u0440\\u0435\\u043C\\u0438\\u0438:\"}),\" \",resultData.paymentMethod]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0414\\u043B\\u044F \\u0434\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0439 \\u043A\\u043E\\u043D\\u0441\\u0443\\u043B\\u044C\\u0442\\u0430\\u0446\\u0438\\u0438 \\u0438 \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B \\u0441\\u0432\\u044F\\u0436\\u0438\\u0442\\u0435\\u0441\\u044C \\u0441 \\u043D\\u0430\\u0448\\u0438\\u043C \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u043E\\u043C: \",/*#__PURE__*/_jsx(\"a\",{href:\"/contact\",children:\"\\u041D\\u0430\\u0448 \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\"})]})]});}if(currentStep===1){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(DateWheelPicker,{onChange:dateString=>setBirthDate(dateString)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u043E\\u043B:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-selector\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`gender-option ${gender==='male'?'selected':''}`,onClick:()=>setGender('male'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"gender-label\",children:\"\\u041C\\u0443\\u0436\\u0441\\u043A\\u043E\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gender-icon\",children:\"\\uD83D\\uDC68\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`gender-option ${gender==='female'?'selected':''}`,onClick:()=>setGender('female'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"gender-label\",children:\"\\u0416\\u0435\\u043D\\u0441\\u043A\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gender-icon\",children:\"\\uD83D\\uDC69\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0417\\u043D\\u0430\\u0435\\u0442\\u0435 \\u043B\\u0438 \\u0412\\u044B \\u043D\\u0430 \\u043A\\u0430\\u043A\\u043E\\u0439 \\u0441\\u0440\\u043E\\u043A \\u0438 \\u043D\\u0430 \\u043A\\u0430\\u043A\\u0443\\u044E \\u0441\\u0443\\u043C\\u043C\\u0443 \\u043E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0439 \\u043F\\u043E\\u043B\\u0438\\u0441?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${insuranceInfo==='yes'?'selected':''}`,onClick:()=>setInsuranceInfo('yes'),children:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${insuranceInfo==='no'?'selected':''}`,onClick:()=>setInsuranceInfo('no'),children:\"\\u041D\\u0435\\u0442\"})]})]})]});}else if(currentStep===2){if(insuranceInfo==='yes'){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0441\\u0440\\u043E\\u043A \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F (\\u043B\\u0435\\u0442):\"}),/*#__PURE__*/_jsx(\"select\",{className:\"insurance-term-select\",value:insuranceTerm,onChange:handleTermChange,children:Array.from({length:30},(_,i)=>i+1).map(year=>/*#__PURE__*/_jsx(\"option\",{value:year,children:year},year))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0443\\u044E \\u0441\\u0443\\u043C\\u043C\\u0443 (\\u043E\\u0442 1 \\u043C\\u043B\\u043D \\u0440\\u0443\\u0431):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",placeholder:\"1.000.000\",value:insuranceSum,onChange:handleSumChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u0435\\u0440\\u0438\\u043E\\u0434\\u0438\\u0447\\u043D\\u043E\\u0441\\u0442\\u044C \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0439 \\u043F\\u0440\\u0435\\u043C\\u0438\\u0438:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"insurance-frequency-select\",value:insuranceFrequency,onChange:handleFrequencyChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434\"}),[\"Ежемесячно\",\"Ежегодно\",\"раз в пол года\",\"ежеквартально\"].map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]})]})]});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0415\\u0441\\u0442\\u044C \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${hasJob==='yes'?'selected':''}`,onClick:()=>setHasJob('yes'),children:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${hasJob==='no'?'selected':''}`,onClick:()=>setHasJob('no'),children:\"\\u041D\\u0435\\u0442\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group inline-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inline-label\",children:\"\\u0414\\u043E\\u0445\\u043E\\u0434 2021, \\u0440\\u0443\\u0431.:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"inline-input\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0443\\u043C\\u043C\\u0443\",value:income2021,onChange:handleIncome2021Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group inline-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inline-label\",children:\"\\u0414\\u043E\\u0445\\u043E\\u0434 2022, \\u0440\\u0443\\u0431.:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"inline-input\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0443\\u043C\\u043C\\u0443\",value:income2022,onChange:handleIncome2022Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group inline-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inline-label\",children:\"\\u0414\\u043E\\u0445\\u043E\\u0434 2023, \\u0440\\u0443\\u0431.:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"inline-input\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0443\\u043C\\u043C\\u0443\",value:income2023,onChange:handleIncome2023Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group inline-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inline-label\",children:\"\\u0421\\u0442\\u0438\\u043F\\u0435\\u043D\\u0434\\u0438\\u044F 2023, \\u0440\\u0443\\u0431.:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"inline-input\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0443\\u043C\\u043C\\u0443\",value:scholarship,onChange:handleScholarshipChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group inline-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"inline-label\",children:\"\\u041A\\u0440\\u0435\\u0434\\u0438\\u0442\\u044B, \\u0440\\u0443\\u0431.:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"inline-input\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0443\\u043C\\u043C\\u0443\",value:unsecuredLoans,onChange:handleUnsecuredLoansChange})]})]});}}else if(currentStep===3){if(insuranceInfo==='yes'){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0430\\u0435\\u043C \\u043F\\u0430\\u043A\\u0435\\u0442 \\xAB\\u041D\\u0435\\u0441\\u0447\\u0430\\u0441\\u0442\\u043D\\u044B\\u0439 \\u0441\\u043B\\u0443\\u0447\\u0430\\u0439\\xBB?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${accidentPackage==='yes'?'selected':''}`,onClick:()=>setAccidentPackage('yes'),children:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${accidentPackage==='no'?'selected':''}`,onClick:()=>setAccidentPackage('no'),children:\"\\u041D\\u0435\\u0442\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0430\\u0435\\u043C \\u043F\\u0430\\u043A\\u0435\\u0442 \\xAB\\u041A\\u0440\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0435 \\u0437\\u0430\\u0431\\u043E\\u043B\\u0435\\u0432\\u0430\\u043D\\u0438\\u044F\\xBB?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${criticalPackage==='yes'?'selected':''}`,onClick:()=>setCriticalPackage('yes'),children:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${criticalPackage==='no'?'selected':''}`,onClick:()=>setCriticalPackage('no'),children:\"\\u041D\\u0435\\u0442\"})]})]}),criticalPackage==='yes'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041A\\u0430\\u043A\\u043E\\u0439 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D \\u043B\\u0435\\u0447\\u0435\\u043D\\u0438\\u044F \\u043F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0430\\u0435\\u043C?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${treatmentRegion==='russia'?'selected':''}`,onClick:()=>setTreatmentRegion('russia'),children:\"\\u041B\\u0435\\u0447\\u0435\\u043D\\u0438\\u0435 \\u0432 \\u0420\\u0424\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${treatmentRegion==='abroad'?'selected':''}`,onClick:()=>setTreatmentRegion('abroad'),children:\"\\u041B\\u0435\\u0447\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430 \\u0440\\u0443\\u0431\\u0435\\u0436\\u043E\\u043C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0430\\u0435\\u043C \\u043E\\u043F\\u0446\\u0438\\u044E \\xAB\\u041B\\u044E\\u0431\\u0438\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u0438\\u0439 \\u0441\\u043F\\u043E\\u0440\\u0442\\xBB?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${sportPackage==='yes'?'selected':''}`,onClick:()=>setSportPackage('yes'),children:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${sportPackage==='no'?'selected':''}`,onClick:()=>setSportPackage('no'),children:\"\\u041D\\u0435\\u0442\"})]})]})]});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0412\\u044B \\u0435\\u0434\\u0438\\u043D\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u044B\\u0439 \\u043A\\u043E\\u0440\\u043C\\u0438\\u043B\\u0435\\u0446 \\u0432 \\u0441\\u0435\\u043C\\u044C\\u0435?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${breadwinnerStatus==='yes'?'selected':''}`,onClick:()=>setBreadwinnerStatus('yes'),children:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${breadwinnerStatus==='no'?'selected':''}`,onClick:()=>setBreadwinnerStatus('no'),children:\"\\u041D\\u0435\\u0442\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${breadwinnerStatus==='notMe'?'selected':''}`,onClick:()=>setBreadwinnerStatus('notMe'),children:\"\\u041D\\u0435 \\u044F\\u0432\\u043B\\u044F\\u044E\\u0441\\u044C \\u043A\\u043E\\u0440\\u043C\\u0438\\u043B\\u0446\\u0435\\u043C\"})]})]}),breadwinnerStatus!=='yes'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0414\\u043E\\u043B\\u044F \\u0432\\u0430\\u0448\\u0435\\u0433\\u043E \\u0434\\u043E\\u0445\\u043E\\u0434\\u0430 \\u0432 \\u0441\\u0435\\u043C\\u0435\\u0439\\u043D\\u043E\\u043C \\u0431\\u044E\\u0434\\u0436\\u0435\\u0442\\u0435:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"insurance-term-select\",value:incomeShare,onChange:e=>setIncomeShare(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u043E\\u043B\\u044E\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0434\\u043E 10%\",children:\"\\u0434\\u043E 10%\"}),/*#__PURE__*/_jsx(\"option\",{value:\"10-24%\",children:\"10\\u201324%\"}),/*#__PURE__*/_jsx(\"option\",{value:\"25-49%\",children:\"25\\u201349%\"}),/*#__PURE__*/_jsx(\"option\",{value:\"50-74%\",children:\"50\\u201374%\"}),/*#__PURE__*/_jsx(\"option\",{value:\"75-89%\",children:\"75\\u201389%\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0411\\u043E\\u043B\\u0435\\u0435 90%\",children:\"\\u0411\\u043E\\u043B\\u0435\\u0435 90%\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0434\\u0435\\u0442\\u0435\\u0439 \\u043D\\u0430 \\u0438\\u0436\\u0434\\u0438\\u0432\\u0435\\u043D\\u0438\\u0438?\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"insurance-term-select\",value:childrenCount,onChange:e=>setChildrenCount(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"0\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3 \\u0438 \\u0431\\u043E\\u043B\\u0435\\u0435\",children:\"3 \\u0438 \\u0431\\u043E\\u043B\\u0435\\u0435\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0415\\u0441\\u0442\\u044C \\u043B\\u0438 \\u0440\\u043E\\u0434\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u0438\\u043A\\u0438, \\u0442\\u0440\\u0435\\u0431\\u0443\\u044E\\u0449\\u0438\\u0435 \\u043E\\u0441\\u043E\\u0431\\u043E\\u0433\\u043E \\u0443\\u0445\\u043E\\u0434\\u0430?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${specialCareRelatives==='yes'?'selected':''}`,onClick:()=>setSpecialCareRelatives('yes'),children:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${specialCareRelatives==='no'?'selected':''}`,onClick:()=>setSpecialCareRelatives('no'),children:\"\\u041D\\u0435\\u0442\"})]})]})]});}}return null;};return/*#__PURE__*/_jsxs(\"div\",{className:\"justincase-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[currentStep!==4&&/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Logo\",className:\"logo-image\"})}),currentStep!==4&&/*#__PURE__*/_jsx(\"h1\",{className:\"justincase-title\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0435\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\\"\\u041D\\u0430 \\u0432\\u0441\\u044F\\u043A\\u0438\\u0439 \\u0441\\u043B\\u0443\\u0447\\u0430\\u0439\\\" \\u0434\\u043B\\u044F \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"justincase-form\",children:renderStep()}),currentStep>1&&currentStep<4&&/*#__PURE__*/_jsx(\"div\",{className:\"back-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:handlePrev,children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"none\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 20l-8-8 8-8\"})})})}),currentStep<3&&/*#__PURE__*/_jsx(\"div\",{className:\"top-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"top-btn\",onClick:handleNext,disabled:!canGoNext(),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"none\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 4l8 8-8 8\"})})})}),currentStep===3&&/*#__PURE__*/_jsx(\"div\",{className:\"top-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"top-btn\",onClick:handleNext,disabled:!canGoNext(),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"none\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M5 13l4 4L19 7\"})})})}),currentStep===4&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:goToMenu,children:\"\\u041C\\u0435\\u043D\\u044E\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"top-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"top-btn\",onClick:repeatCalculation,children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M17.65 6.35A7.95 7.95 0 0012 4a8 8 0 00-8 8h2.08a5.92 5.92 0 015.92-6 6 6 0 015.65 3.65L13 11h7V4l-2.35 2.35zM6.35 17.65A7.95 7.95 0 0012 20a8 8 0 008-8h-2.08a5.92 5.92 0 01-5.92 6 6 6 0 01-5.65-3.65L3.41 16.3 2 17.71l2.35-2.35z\"})})})})]})]});};export default JustincasePage;","map":{"version":3,"names":["React","useState","useEffect","backgroundImage","DateWheelPicker","logo","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","JustincasePage","userName","setUserName","storedName","localStorage","getItem","birthDate","setBirthDate","gender","setGender","insuranceInfo","setInsuranceInfo","insuranceTerm","setInsuranceTerm","insuranceSum","setInsuranceSum","insuranceFrequency","setInsuranceFrequency","accidentPackage","setAccidentPackage","criticalPackage","setCriticalPackage","treatmentRegion","setTreatmentRegion","sportPackage","setSportPackage","hasJob","setHasJob","income2021","setIncome2021","income2022","setIncome2022","income2023","setIncome2023","scholarship","setScholarship","unsecuredLoans","setUnsecuredLoans","breadwinnerStatus","setBreadwinnerStatus","incomeShare","setIncomeShare","childrenCount","setChildrenCount","specialCareRelatives","setSpecialCareRelatives","currentStep","setCurrentStep","isFinished","setIsFinished","isProcessing","setIsProcessing","resultData","setResultData","parseDate","dateStr","day","month","year","split","Date","calculateAge","dateObj","today","age","getFullYear","m","getMonth","getDate","formatSum","rawValue","digits","replace","result","length","chunk","slice","handleSumChange","e","target","value","handleTermChange","handleFrequencyChange","handleIncome2021Change","handleIncome2022Change","handleIncome2023Change","handleScholarshipChange","handleUnsecuredLoansChange","console","log","canGoNext","handleNext","alert","calculatorData","fetch","method","headers","body","JSON","stringify","credentials","then","response","json","data","catch","err","error","handlePrev","goToMenu","window","location","href","repeatCalculation","renderStep","className","children","width","height","viewBox","cx","cy","r","stroke","strokeWidth","fill","strokeLinecap","attributeName","type","dur","from","to","repeatCount","calculationDate","clientAge","clientGender","baseInsuranceSum","basePremium","accidentPackageIncluded","accidentInsuranceSum","accidentPremium","criticalPackageIncluded","criticalPremium","sportOptionIncluded","totalPremium","paymentMethod","onChange","dateString","onClick","Array","_","i","map","placeholder","option","style","src","alt","xmlns","d","disabled"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/JustincasePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport backgroundImage from './components/background.png';\r\nimport DateWheelPicker from './DateWheelPicker';\r\nimport logo from './components/logo.png';\r\nimport './JustincasePage.css';\r\n\r\nconst JustincasePage = () => {\r\n  // 1) Общее состояние пользователя\r\n  const [userName, setUserName] = useState('');\r\n  useEffect(() => {\r\n    const storedName = localStorage.getItem('userName');\r\n    setUserName(storedName || 'Гость');\r\n  }, []);\r\n\r\n  // 2) Собираемые данные\r\n  const [birthDate, setBirthDate] = useState(null);         // формат \"dd/mm/yyyy\"\r\n  const [gender, setGender] = useState(null);               // 'male' / 'female'\r\n  const [insuranceInfo, setInsuranceInfo] = useState(null);   // 'yes' / 'no'\r\n  const [insuranceTerm, setInsuranceTerm] = useState('1');    // срок страхования (лет)\r\n  const [insuranceSum, setInsuranceSum] = useState('');       // форматированная сумма\r\n  const [insuranceFrequency, setInsuranceFrequency] = useState(''); // периодичность оплаты\r\n\r\n  // Ветка \"Да\" – пакеты\r\n  const [accidentPackage, setAccidentPackage] = useState(null); // 'yes' / 'no'\r\n  const [criticalPackage, setCriticalPackage] = useState(null); // 'yes' / 'no'\r\n  const [treatmentRegion, setTreatmentRegion] = useState(null);   // 'russia' / 'abroad'\r\n  const [sportPackage, setSportPackage] = useState(null);         // 'yes' / 'no'\r\n\r\n  // Ветка \"Нет\" – вопросы о работе и доходах\r\n  const [hasJob, setHasJob] = useState(null);\r\n  const [income2021, setIncome2021] = useState('');\r\n  const [income2022, setIncome2022] = useState('');\r\n  const [income2023, setIncome2023] = useState('');\r\n  const [scholarship, setScholarship] = useState('');\r\n  const [unsecuredLoans, setUnsecuredLoans] = useState('');\r\n\r\n  // Новые состояния для дополнительного шага (при insuranceInfo === 'no')\r\n  const [breadwinnerStatus, setBreadwinnerStatus] = useState(null); // \"yes\", \"no\", \"notMe\"\r\n  const [incomeShare, setIncomeShare] = useState('');\r\n  const [childrenCount, setChildrenCount] = useState('0');\r\n  const [specialCareRelatives, setSpecialCareRelatives] = useState(null); // 'yes' / 'no'\r\n\r\n  // 3) Шаги:\r\n  // Шаг 1 – дата рождения, пол, знание параметров страхового полиса.\r\n  // Шаг 2 – если insuranceInfo === 'yes': детали страхования, иначе: вопросы о работе и доходах.\r\n  // Шаг 3 – если insuranceInfo === 'yes': вопросы по пакетам, иначе: дополнительные вопросы про семейный бюджет.\r\n  // Шаг 4 – результат расчёта (после сохранения в Excel)\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [isFinished, setIsFinished] = useState(false);\r\n\r\n  // Новые состояния для процесса расчёта\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [resultData, setResultData] = useState(null);\r\n\r\n  // ---------- Вспомогательные функции ----------\r\n  const parseDate = (dateStr) => {\r\n    const [day, month, year] = dateStr.split('/');\r\n    return new Date(+year, +month - 1, +day);\r\n  };\r\n\r\n  const calculateAge = (dateObj) => {\r\n    const today = new Date();\r\n    let age = today.getFullYear() - dateObj.getFullYear();\r\n    const m = today.getMonth() - dateObj.getMonth();\r\n    if (m < 0 || (m === 0 && today.getDate() < dateObj.getDate())) {\r\n      age--;\r\n    }\r\n    return age;\r\n  };\r\n\r\n  // Форматирование суммы (например \"1.000.000\")\r\n  const formatSum = (rawValue) => {\r\n    let digits = rawValue.replace(/\\D/g, '');\r\n    if (!digits) return '';\r\n    let result = '';\r\n    while (digits.length > 3) {\r\n      const chunk = digits.slice(-3);\r\n      digits = digits.slice(0, -3);\r\n      result = '.' + chunk + result;\r\n    }\r\n    result = digits + result;\r\n    return result;\r\n  };\r\n\r\n  const handleSumChange = (e) => {\r\n    setInsuranceSum(formatSum(e.target.value));\r\n  };\r\n\r\n  // Обработчики для деталей страхования (ветка \"Да\")\r\n  const handleTermChange = (e) => {\r\n    setInsuranceTerm(e.target.value);\r\n  };\r\n  const handleFrequencyChange = (e) => {\r\n    setInsuranceFrequency(e.target.value);\r\n  };\r\n\r\n  // Обработчики для ветки \"Нет\" (доходы)\r\n  const handleIncome2021Change = (e) => {\r\n    setIncome2021(formatSum(e.target.value));\r\n  };\r\n  const handleIncome2022Change = (e) => {\r\n    setIncome2022(formatSum(e.target.value));\r\n  };\r\n  const handleIncome2023Change = (e) => {\r\n    setIncome2023(formatSum(e.target.value));\r\n  };\r\n  const handleScholarshipChange = (e) => {\r\n    setScholarship(formatSum(e.target.value));\r\n  };\r\n  const handleUnsecuredLoansChange = (e) => {\r\n    setUnsecuredLoans(formatSum(e.target.value));\r\n  };\r\n\r\n  // Логирование изменения treatmentRegion для отладки\r\n  useEffect(() => {\r\n    console.log(\"treatmentRegion обновлён:\", treatmentRegion);\r\n  }, [treatmentRegion]);\r\n\r\n  // Здесь не устанавливаем автоматически значение для treatmentRegion,\r\n  // чтобы по умолчанию ни одна из кнопок не была выбрана.\r\n\r\n  // ---------- Функция для проверки, можно ли перейти к следующему шагу ----------\r\n  const canGoNext = () => {\r\n    if (currentStep === 1) {\r\n      return birthDate && gender && insuranceInfo;\r\n    } else if (currentStep === 2) {\r\n      if (insuranceInfo === 'yes') {\r\n        return insuranceTerm && insuranceSum && insuranceFrequency;\r\n      } else {\r\n        return hasJob && income2021 && income2022 && income2023;\r\n      }\r\n    } else if (currentStep === 3) {\r\n      if (insuranceInfo === 'yes') {\r\n        return accidentPackage && criticalPackage && (criticalPackage === 'no' || treatmentRegion) && sportPackage;\r\n      } else {\r\n        return breadwinnerStatus &&\r\n               (breadwinnerStatus === 'yes' || incomeShare) &&\r\n               childrenCount !== '' &&\r\n               specialCareRelatives;\r\n      }\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  // ---------- Переходы между шагами ----------\r\n  const handleNext = () => {\r\n    if (!canGoNext()) {\r\n      alert('Не выполнены условия для перехода к следующему шагу');\r\n      return;\r\n    }\r\n    if (currentStep === 1) {\r\n      setCurrentStep(2);\r\n    } else if (currentStep === 2) {\r\n      setCurrentStep(3);\r\n    } else if (currentStep === 3) {\r\n      // Здесь не устанавливаем автоматически treatmentRegion – ждём выбора пользователя\r\n      setIsProcessing(true);\r\n      // Формируем данные для калькулятора\r\n      const calculatorData = {\r\n        birthDate,\r\n        gender,\r\n        insuranceTerm,\r\n        insuranceSum,\r\n        insuranceFrequency,\r\n        accidentPackage,\r\n        criticalPackage,\r\n        treatmentRegion,\r\n        sportPackage,\r\n        // для ветки \"Нет\"\r\n        hasJob,\r\n        income2021,\r\n        income2022,\r\n        income2023,\r\n        scholarship,\r\n        unsecuredLoans,\r\n        breadwinnerStatus,\r\n        incomeShare,\r\n        childrenCount,\r\n        specialCareRelatives\r\n      };\r\n      console.log(\"Отправляем данные калькулятора:\", calculatorData);\r\n      // Отправляем запрос через прокси\r\n      fetch('/api/proxy/calculator/save', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(calculatorData),\r\n        credentials: 'include'\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setResultData(data);\r\n        setIsProcessing(false);\r\n        setCurrentStep(4); // Переходим к шагу результатов\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Ошибка сохранения данных калькулятора:\", err);\r\n        setIsProcessing(false);\r\n        alert(\"Ошибка сохранения данных калькулятора\");\r\n      });\r\n    }\r\n  };\r\n\r\n  const handlePrev = () => {\r\n    if (currentStep > 1) {\r\n      setCurrentStep(currentStep - 1);\r\n    }\r\n  };\r\n\r\n  // Функция для обработки кнопки \"Меню\" – переход на страницу меню\r\n  const goToMenu = () => {\r\n    // Если вы используете React Router, можно использовать history.push('/menu')\r\n    // Здесь для примера просто перенаправляем браузер\r\n    window.location.href = '/menu';\r\n  };\r\n\r\n  // Функция для обработки кнопки \"Повторить\" – сброс состояния и возврат к первому шагу\r\n  const repeatCalculation = () => {\r\n    // Сбросим состояние калькулятора, чтобы начать заново\r\n    setBirthDate(null);\r\n    setGender(null);\r\n    setInsuranceInfo(null);\r\n    setInsuranceTerm('1');\r\n    setInsuranceSum('');\r\n    setInsuranceFrequency('');\r\n    setAccidentPackage(null);\r\n    setCriticalPackage(null);\r\n    setTreatmentRegion(null);\r\n    setSportPackage(null);\r\n    setHasJob(null);\r\n    setIncome2021('');\r\n    setIncome2022('');\r\n    setIncome2023('');\r\n    setScholarship('');\r\n    setUnsecuredLoans('');\r\n    setBreadwinnerStatus(null);\r\n    setIncomeShare('');\r\n    setChildrenCount('0');\r\n    setSpecialCareRelatives(null);\r\n    setResultData(null);\r\n    setCurrentStep(1);\r\n  };\r\n\r\n  // ---------- Рендер шагов ----------\r\n  const renderStep = () => {\r\n    if (isProcessing) {\r\n      return (\r\n        <div className=\"processing-container\">\r\n          <h2>{userName}, производим расчет...</h2>\r\n          <div className=\"loading-spinner\">\r\n            <svg width=\"50\" height=\"50\" viewBox=\"0 0 50 50\">\r\n              <circle cx=\"25\" cy=\"25\" r=\"20\" stroke=\"#f00\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\">\r\n                <animateTransform attributeName=\"transform\" type=\"rotate\" dur=\"1s\" from=\"0 25 25\" to=\"360 25 25\" repeatCount=\"indefinite\" />\r\n              </circle>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (currentStep === 4 && resultData) {\r\n      return (\r\n        <div className=\"result-container\">\r\n          <h2>Ваша программа «На всякий случай» (расчет от {resultData.calculationDate})</h2>\r\n          <p>Возраст клиента: {resultData.clientAge} лет</p>\r\n          <p>Пол клиента: {resultData.clientGender}</p>\r\n          <p>Срок страхования: {resultData.insuranceTerm} лет</p>\r\n          <hr />\r\n          <h3>Основная программа (страхование на случай ухода из жизни и инвалидности I и II группы):</h3>\r\n          <p>Страховая сумма: {resultData.baseInsuranceSum}</p>\r\n          <p>Страховая премия: {resultData.basePremium} руб.</p>\r\n          {resultData.accidentPackageIncluded && (\r\n            <>\r\n              <hr />\r\n              <h3>Пакет «Несчастный случай»:</h3>\r\n              <p>Страховая сумма: {resultData.accidentInsuranceSum}</p>\r\n              <p>Страховая премия: {resultData.accidentPremium} руб.</p>\r\n            </>\r\n          )}\r\n          {resultData.criticalPackageIncluded && (\r\n            <>\r\n              <hr />\r\n              <h3>Пакет «Критические заболевания»:</h3>\r\n              <p>• Максимальная страховая сумма 60 000 000 рублей, дополнительно по реабилитации – 100 000 рублей.</p>\r\n              <p>Страховая премия: {resultData.criticalPremium} руб.</p>\r\n            </>\r\n          )}\r\n          {resultData.sportOptionIncluded && (\r\n            <>\r\n              <hr />\r\n              <h3>Опция «Любительский спорт»:</h3>\r\n              <p>Включено</p>\r\n            </>\r\n          )}\r\n          <hr />\r\n          <p><strong>Итого страховая премия:</strong> {resultData.totalPremium} руб.</p>\r\n          <p><strong>Порядок оплаты премии:</strong> {resultData.paymentMethod}</p>\r\n          <hr />\r\n          <p>Для дополнительной консультации и оформления программы свяжитесь с нашим менеджером: <a href=\"/contact\">Наш менеджер</a></p>\r\n        </div>\r\n      );\r\n    }\r\n    if (currentStep === 1) {\r\n      return (\r\n        <>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Дата рождения:</label>\r\n            <DateWheelPicker onChange={(dateString) => setBirthDate(dateString)} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Пол:</label>\r\n            <div className=\"gender-selector\">\r\n              <div className={`gender-option ${gender === 'male' ? 'selected' : ''}`} onClick={() => setGender('male')}>\r\n                <div className=\"gender-label\">Мужской</div>\r\n                <div className=\"gender-icon\">👨</div>\r\n              </div>\r\n              <div className={`gender-option ${gender === 'female' ? 'selected' : ''}`} onClick={() => setGender('female')}>\r\n                <div className=\"gender-label\">Женский</div>\r\n                <div className=\"gender-icon\">👩</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">\r\n              Знаете ли Вы на какой срок и на какую сумму оформить страховой полис?\r\n            </label>\r\n            <div className=\"insurance-options\">\r\n              <button className={`insurance-btn ${insuranceInfo === 'yes' ? 'selected' : ''}`} onClick={() => setInsuranceInfo('yes')}>\r\n                Да\r\n              </button>\r\n              <button className={`insurance-btn ${insuranceInfo === 'no' ? 'selected' : ''}`} onClick={() => setInsuranceInfo('no')}>\r\n                Нет\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      );\r\n    } else if (currentStep === 2) {\r\n      if (insuranceInfo === 'yes') {\r\n        return (\r\n          <>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Выберите срок страхования (лет):</label>\r\n              <select className=\"insurance-term-select\" value={insuranceTerm} onChange={handleTermChange}>\r\n                {Array.from({ length: 30 }, (_, i) => i + 1).map((year) => (\r\n                  <option key={year} value={year}>\r\n                    {year}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Введите страховую сумму (от 1 млн руб):</label>\r\n              <input type=\"text\" className=\"insurance-sum-input\" placeholder=\"1.000.000\" value={insuranceSum} onChange={handleSumChange} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Периодичность оплаты страховой премии:</label>\r\n              <select className=\"insurance-frequency-select\" value={insuranceFrequency} onChange={handleFrequencyChange}>\r\n                <option value=\"\">Выберите период</option>\r\n                {[\"Ежемесячно\", \"Ежегодно\", \"раз в пол года\", \"ежеквартально\"].map((option) => (\r\n                  <option key={option} value={option}>\r\n                    {option}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </>\r\n        );\r\n      } else {\r\n        return (\r\n          <>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Есть работа?</label>\r\n              <div className=\"insurance-options\">\r\n                <button className={`insurance-btn ${hasJob === 'yes' ? 'selected' : ''}`} onClick={() => setHasJob('yes')}>\r\n                  Да\r\n                </button>\r\n                <button className={`insurance-btn ${hasJob === 'no' ? 'selected' : ''}`} onClick={() => setHasJob('no')}>\r\n                  Нет\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group inline-group\">\r\n              <label className=\"inline-label\">Доход 2021, руб.:</label>\r\n              <input type=\"text\" className=\"inline-input\" placeholder=\"Введите сумму\" value={income2021} onChange={handleIncome2021Change} />\r\n            </div>\r\n            <div className=\"form-group inline-group\">\r\n              <label className=\"inline-label\">Доход 2022, руб.:</label>\r\n              <input type=\"text\" className=\"inline-input\" placeholder=\"Введите сумму\" value={income2022} onChange={handleIncome2022Change} />\r\n            </div>\r\n            <div className=\"form-group inline-group\">\r\n              <label className=\"inline-label\">Доход 2023, руб.:</label>\r\n              <input type=\"text\" className=\"inline-input\" placeholder=\"Введите сумму\" value={income2023} onChange={handleIncome2023Change} />\r\n            </div>\r\n            <div className=\"form-group inline-group\">\r\n              <label className=\"inline-label\">Стипендия 2023, руб.:</label>\r\n              <input type=\"text\" className=\"inline-input\" placeholder=\"Введите сумму\" value={scholarship} onChange={handleScholarshipChange} />\r\n            </div>\r\n            <div className=\"form-group inline-group\">\r\n              <label className=\"inline-label\">Кредиты, руб.:</label>\r\n              <input type=\"text\" className=\"inline-input\" placeholder=\"Введите сумму\" value={unsecuredLoans} onChange={handleUnsecuredLoansChange} />\r\n            </div>\r\n          </>\r\n        );\r\n      }\r\n    } else if (currentStep === 3) {\r\n      if (insuranceInfo === 'yes') {\r\n        return (\r\n          <>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">\r\n                Подключаем пакет «Несчастный случай»?\r\n              </label>\r\n              <div className=\"insurance-options\">\r\n                <button className={`insurance-btn ${accidentPackage === 'yes' ? 'selected' : ''}`} onClick={() => setAccidentPackage('yes')}>\r\n                  Да\r\n                </button>\r\n                <button className={`insurance-btn ${accidentPackage === 'no' ? 'selected' : ''}`} onClick={() => setAccidentPackage('no')}>\r\n                  Нет\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">\r\n                Подключаем пакет «Критические заболевания»?\r\n              </label>\r\n              <div className=\"insurance-options\">\r\n                <button className={`insurance-btn ${criticalPackage === 'yes' ? 'selected' : ''}`} onClick={() => setCriticalPackage('yes')}>\r\n                  Да\r\n                </button>\r\n                <button className={`insurance-btn ${criticalPackage === 'no' ? 'selected' : ''}`} onClick={() => setCriticalPackage('no')}>\r\n                  Нет\r\n                </button>\r\n              </div>\r\n            </div>\r\n            {criticalPackage === 'yes' && (\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">\r\n                  Какой регион лечения подключаем?\r\n                </label>\r\n                <div className=\"insurance-options\">\r\n                  <button className={`insurance-btn ${treatmentRegion === 'russia' ? 'selected' : ''}`} onClick={() => setTreatmentRegion('russia')}>\r\n                    Лечение в РФ\r\n                  </button>\r\n                  <button className={`insurance-btn ${treatmentRegion === 'abroad' ? 'selected' : ''}`} onClick={() => setTreatmentRegion('abroad')}>\r\n                    Лечение за рубежом\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">\r\n                Подключаем опцию «Любительский спорт»?\r\n              </label>\r\n              <div className=\"insurance-options\">\r\n                <button className={`insurance-btn ${sportPackage === 'yes' ? 'selected' : ''}`} onClick={() => setSportPackage('yes')}>\r\n                  Да\r\n                </button>\r\n                <button className={`insurance-btn ${sportPackage === 'no' ? 'selected' : ''}`} onClick={() => setSportPackage('no')}>\r\n                  Нет\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </>\r\n        );\r\n      } else {\r\n        return (\r\n          <>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Вы единственный кормилец в семье?</label>\r\n              <div className=\"insurance-options\">\r\n                <button className={`insurance-btn ${breadwinnerStatus === 'yes' ? 'selected' : ''}`} onClick={() => setBreadwinnerStatus('yes')}>\r\n                  Да\r\n                </button>\r\n                <button className={`insurance-btn ${breadwinnerStatus === 'no' ? 'selected' : ''}`} onClick={() => setBreadwinnerStatus('no')}>\r\n                  Нет\r\n                </button>\r\n                <button className={`insurance-btn ${breadwinnerStatus === 'notMe' ? 'selected' : ''}`} onClick={() => setBreadwinnerStatus('notMe')}>\r\n                  Не являюсь кормилцем\r\n                </button>\r\n              </div>\r\n            </div>\r\n            {breadwinnerStatus !== 'yes' && (\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Доля вашего дохода в семейном бюджете:</label>\r\n                <select className=\"insurance-term-select\" value={incomeShare} onChange={(e) => setIncomeShare(e.target.value)}>\r\n                  <option value=\"\">Выберите долю</option>\r\n                  <option value=\"до 10%\">до 10%</option>\r\n                  <option value=\"10-24%\">10–24%</option>\r\n                  <option value=\"25-49%\">25–49%</option>\r\n                  <option value=\"50-74%\">50–74%</option>\r\n                  <option value=\"75-89%\">75–89%</option>\r\n                  <option value=\"Более 90%\">Более 90%</option>\r\n                </select>\r\n              </div>\r\n            )}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Количество детей на иждивении?</label>\r\n              <select className=\"insurance-term-select\" value={childrenCount} onChange={(e) => setChildrenCount(e.target.value)}>\r\n                <option value=\"0\">0</option>\r\n                <option value=\"1\">1</option>\r\n                <option value=\"2\">2</option>\r\n                <option value=\"3 и более\">3 и более</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">Есть ли родственники, требующие особого ухода?</label>\r\n              <div className=\"insurance-options\">\r\n                <button className={`insurance-btn ${specialCareRelatives === 'yes' ? 'selected' : ''}`} onClick={() => setSpecialCareRelatives('yes')}>\r\n                  Да\r\n                </button>\r\n                <button className={`insurance-btn ${specialCareRelatives === 'no' ? 'selected' : ''}`} onClick={() => setSpecialCareRelatives('no')}>\r\n                  Нет\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </>\r\n        );\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"justincase-container\" style={{ backgroundImage: `url(${backgroundImage})` }}>\r\n      {currentStep !== 4 && (\r\n        <div className=\"logo-container\">\r\n          <img src={logo} alt=\"Logo\" className=\"logo-image\" />\r\n        </div>\r\n      )}\r\n      {currentStep !== 4 && (\r\n        <h1 className=\"justincase-title\">\r\n          Расчет по программе \"На всякий случай\" для сотрудника\r\n        </h1>\r\n      )}\r\n      <div className=\"justincase-form\">{renderStep()}</div>\r\n\r\n      {/* Кнопки навигации для шагов 1-3 */}\r\n      {currentStep > 1 && currentStep < 4 && (\r\n        <div className=\"back-btn-container\">\r\n          <button className=\"back-btn\" onClick={handlePrev}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M12 20l-8-8 8-8\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      )}\r\n      {currentStep < 3 && (\r\n        <div className=\"top-btn-container\">\r\n          <button className=\"top-btn\" onClick={handleNext} disabled={!canGoNext()}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M12 4l8 8-8 8\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      )}\r\n      {currentStep === 3 && (\r\n        <div className=\"top-btn-container\">\r\n          <button className=\"top-btn\" onClick={handleNext} disabled={!canGoNext()}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M5 13l4 4L19 7\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Кнопки на странице результата (шаг 4) */}\r\n      {currentStep === 4 && (\r\n        <>\r\n          <div className=\"back-btn-container\">\r\n            <button className=\"back-btn\" onClick={goToMenu}>\r\n              {/* Можно вставить SVG-иконку или текст, здесь текст \"Меню\" */}\r\n              Меню\r\n            </button>\r\n          </div>\r\n          <div className=\"top-btn-container\">\r\n            <button className=\"top-btn\" onClick={repeatCalculation}>\r\n              {/* SVG-иконка \"Повторить\" (иконка обновления) */}\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M17.65 6.35A7.95 7.95 0 0012 4a8 8 0 00-8 8h2.08a5.92 5.92 0 015.92-6 6 6 0 015.65 3.65L13 11h7V4l-2.35 2.35zM6.35 17.65A7.95 7.95 0 0012 20a8 8 0 008-8h-2.08a5.92 5.92 0 01-5.92 6 6 6 0 01-5.65-3.65L3.41 16.3 2 17.71l2.35-2.35z\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JustincasePage;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}