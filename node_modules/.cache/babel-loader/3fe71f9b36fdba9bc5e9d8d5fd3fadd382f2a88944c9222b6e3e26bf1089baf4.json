{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import mainmenuIcon from'./components/icons/mainmenu.png';import logoImage from'./components/logo.png';import backgroundImage from'./components/background.png';import DateWheelPicker from'./DateWheelPicker';import'./SNPPage.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function SNPPage(){const navigate=useNavigate();// === –®–∞–≥–∏ ===\nconst[step,setStep]=useState('email');// 'email' ‚Üí 'form' ‚Üí 'result' ‚Üí 'manager'\n// === Email ===\nconst[email,setEmail]=useState('');const[emailError,setEmailError]=useState('');// === –§–æ—Ä–º–∞ —Ä–∞—Å—á—ë—Ç–∞ ===\nconst[birthDateParts,setBirthDateParts]=useState({day:null,month:null,year:null});const[birthDate,setBirthDate]=useState(null);const[gender,setGender]=useState(null);// \"–º—É–∂—Å–∫–æ–π\" / \"–∂–µ–Ω—Å–∫–∏–π\"\nconst[calcType,setCalcType]=useState(null);// 'premium' –∏–ª–∏ 'sum'\nconst[amount,setAmount]=useState('');// —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞\nconst[amountError,setAmountError]=useState('');// —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ —Å—É–º–º–µ\nconst[isProcessing,setIsProcessing]=useState(false);// –∏–¥—ë—Ç –∑–∞–ø—Ä–æ—Å —Ä–∞—Å—á—ë—Ç–∞\nconst[resultData,setResultData]=useState(null);// –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ —Ä–∞—Å—á—ë—Ç—É\nconst[slideIndex,setSlideIndex]=useState(0);// —Ç–µ–∫—É—â–∏–π —Å–ª–∞–π–¥ –≤ —Ä–∞–∑–¥–µ–ª–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏\n// === –î–∞–Ω–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ===\nconst[mgrSurname,setMgrSurname]=useState('');const[mgrName,setMgrName]=useState('');const[mgrCity,setMgrCity]=useState('');const[mgrError,setMgrError]=useState('');// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã\nconst term=5;const periodicity='–µ–∂–µ–≥–æ–¥–Ω–æ';const currency='—Ä—É–±–ª–µ–π';// –°–æ–±–∏—Ä–∞–µ–º –æ–±—ä–µ–∫—Ç Date –∏–∑ birthDateParts\nuseEffect(()=>{const{day,month,year}=birthDateParts;if(day&&month&&year){const d=Number(day),m=Number(month),y=Number(year);const dt=new Date(y,m-1,d);if(!isNaN(dt.getTime())&&dt.getDate()===d&&dt.getMonth()+1===m&&dt.getFullYear()===y){setBirthDate(dt);}else{setBirthDate(null);}}else{setBirthDate(null);}},[birthDateParts]);// –£—Ç–∏–ª–∏—Ç–∞: —Ñ–æ—Ä–º–∞—Ç —Å—É–º–º—ã \"1234567\" ‚Üí \"1.234.567\"\nconst formatSum=raw=>{let digits=raw.replace(/\\D/g,'');if(!digits)return'';let out='';while(digits.length>3){out='.'+digits.slice(-3)+out;digits=digits.slice(0,-3);}return digits+out;};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ —Å—É–º–º—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª–∫–∏\nconst handleAmountChange=e=>{const fmt=formatSum(e.target.value);setAmount(fmt);const num=parseInt(fmt.replace(/\\./g,''),10)||0;if(calcType==='premium'){setAmountError(num<60000?'–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –æ—Ç 60 000 ‚ÇΩ':'');}else if(calcType==='sum'){setAmountError(num<450000?'–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –æ—Ç 450 000 ‚ÇΩ':'');}};// –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤–æ–∑—Ä–∞—Å—Ç\nconst getAge=d=>{if(!(d instanceof Date))return 0;const today=new Date();let age=today.getFullYear()-d.getFullYear();const m=today.getMonth()-d.getMonth();if(m<0||m===0&&today.getDate()<d.getDate())age--;return age;};// –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ ¬´–î–∞–ª–µ–µ¬ª –Ω–∞ —Ñ–æ—Ä–º–µ\nconst canGoNext=()=>birthDate instanceof Date&&!isNaN(birthDate.getTime())&&gender&&calcType&&amount&&!amountError&&getAge(birthDate)>=18;// –ü–µ—Ä–µ—Ö–æ–¥ —Å —à–∞–≥–∞ ¬´Email¬ª –Ω–∞ ¬´–§–æ—Ä–º–∞ —Ä–∞—Å—á—ë—Ç–∞¬ª\nconst handleEmailNext=()=>{if(!email.includes('@vtb.ru')){setEmailError('–î–æ–º–µ–Ω –≤–∞—à–µ–π –ø–æ—á—Ç—ã –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');}else{setEmailError('');setStep('form');}};// –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã —Ä–∞—Å—á—ë—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚Üí —à–∞–≥ ¬´–†–µ–∑—É–ª—å—Ç–∞—Ç—ã¬ª\nconst handleNext=async()=>{if(!canGoNext())return;const dateRu=birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});const age=getAge(birthDate);const payload={birthdate:dateRu,age,gender,payment:calcType==='premium'?'–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞':'–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã',sum:parseInt(amount.replace(/\\./g,''),10)};setIsProcessing(true);try{const res=await fetch('/api/snp/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(res.ok){setResultData(data);setSlideIndex(0);setStep('result');}}catch(err){console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—á—ë—Ç–∞:',err);}setIsProcessing(false);};// –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞ (–¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö)\nconst todayStr=new Date().toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});// –ú–∞—Å—Å–∏–≤ React-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç—Ä—ë—Ö —Å–ª–∞–π–¥–æ–≤ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏\nconst slides=resultData?[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slide\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"slide-header\",children:[\"\\u0412 \\u0422\\u0415\\u0427\\u0415\\u041D\\u0418\\u0415 \",term,\" \\u041B\\u0415\\u0422\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-title\",children:\"\\u0412\\u044B \\u0432\\u043D\\u043E\\u0441\\u0438\\u0442\\u0435 \\u0441\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432\\u0430 \\u0432 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0443\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.contribution)),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-period\",children:periodicity}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-subtitle\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0432\\u0430\\u0448\\u0438\\u0445 \\u0432\\u0437\\u043D\\u043E\\u0441\\u043E\\u0432\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.totalContribution)),\" \\u20BD\"]})]},0),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slide\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"slide-header\",children:\"\\u041D\\u0410\\u0427\\u0418\\u0421\\u041B\\u042F\\u0415\\u041C \\u0414\\u041E\\u041F\\u041E\\u041B\\u041D\\u0418\\u0422\\u0415\\u041B\\u042C\\u041D\\u041E\"}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-title\",children:`${Math.round(parseFloat(resultData.accrualPercent)*100)}% –æ—Ç –∫–∞–∂–¥–æ–≥–æ –≤–∑–Ω–æ—Å–∞`}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.accrualAmount)),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-period\",children:periodicity}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-subtitle\",children:\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430 \\u043D\\u0430\\u0447\\u0438\\u0441\\u043B\\u0435\\u043D\\u0438\\u0439\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.totalAccrual)),\" \\u20BD\"]})]},1),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slide\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"slide-header\",children:\"\\u0412\\u042B \\u041F\\u041E\\u041B\\u0423\\u0427\\u0410\\u0415\\u0422\\u0415:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-icon\",children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount-big\",children:[formatSum(String(resultData.finalAnnual)),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-period\",children:\"\\u0415\\u0436\\u0435\\u0433\\u043E\\u0434\\u043D\\u044B\\u0435 \\u043D\\u0430\\u043A\\u043E\\u043F\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.finalTotal)),\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-subtitle\",children:[\"\\u0412\\u0430\\u0448 \\u043A\\u0430\\u043F\\u0438\\u0442\\u0430\\u043B \\u0447\\u0435\\u0440\\u0435\\u0437 \",term,\" \\u043B\\u0435\\u0442\"]})]},2)]:[];// –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø–æ SMTP\nconst handleManagerSubmit=async()=>{if(!mgrSurname||!mgrName||!mgrCity){setMgrError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.');return;}const fio=`${mgrSurname} ${mgrName}`;const birthdate=birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});const age=getAge(birthDate);const payload={surname:mgrSurname,name:mgrName,city:mgrCity,email:email,// –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ—á—Ç–∞\ngender:resultData.gender,birthdate,age,contribution:resultData.contribution// –∏—Ç–æ–≥–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –≤–∑–Ω–æ—Å–∞\n};try{const res=await fetch('/api/snp/send_manager',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!res.ok){const err=await res.json();console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É:',err);setMgrError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');return;}// —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –º–µ–Ω—é\nnavigate('/Main-Menu');}catch(e){console.error('Network error –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É:',e);setMgrError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate('/Main-Menu'),children:/*#__PURE__*/_jsx(\"img\",{src:mainmenuIcon,alt:\"\\u0414\\u043E\\u043C\\u043E\\u0439\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:logoImage,alt:\"Logo\",className:\"logo-image\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"snp-title\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\\"\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\\"\"}),step==='email'&&/*#__PURE__*/_jsxs(\"div\",{className:\"snp-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041A\\u043E\\u0440\\u043F\\u043E\\u0440\\u0430\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430 \\u0412\\u0422\\u0411:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"insurance-sum-input\",value:email,placeholder:\"name@vtb.ru\",onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"insurance-btn selected\",onClick:handleEmailNext,children:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0443\"}),emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"email-error-message\",children:emailError})]}),step==='form'&&!isProcessing&&!resultData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"snp-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(DateWheelPicker,{value:birthDateParts,onChange:val=>{setBirthDateParts(prev=>{if(val instanceof Date){return{day:String(val.getDate()).padStart(2,'0'),month:String(val.getMonth()+1).padStart(2,'0'),year:String(val.getFullYear())};}if(Array.isArray(val)&&val.length===3){const[d,m,y]=val;return{day:d,month:m,year:y};}if(typeof val==='object'){return{...prev,...(val.day!=null?{day:String(val.day).padStart(2,'0')}:{}),...(val.month!=null?{month:String(val.month).padStart(2,'0')}:{}),...(val.year!=null?{year:String(val.year)}:{})};}if(typeof val==='string'){if(val.includes('.')){const[d,m,y]=val.split('.');return{day:d.padStart(2,'0'),month:m.padStart(2,'0'),year:y};}if(val.includes('-')){const[y,m,d]=val.split('-');return{day:d.padStart(2,'0'),month:m.padStart(2,'0'),year:y};}}return prev;});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u043E\\u043B:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gender-selector\",children:['–º—É–∂—Å–∫–æ–π','–∂–µ–Ω—Å–∫–∏–π'].map(v=>/*#__PURE__*/_jsxs(\"div\",{className:`gender-option ${gender===v?'selected':''}`,onClick:()=>setGender(v),children:[/*#__PURE__*/_jsx(\"div\",{className:\"gender-label\",children:v==='–º—É–∂—Å–∫–æ–π'?'–ú—É–∂—Å–∫–æ–π':'–ñ–µ–Ω—Å–∫–∏–π'}),/*#__PURE__*/_jsx(\"div\",{className:\"gender-icon\",children:v==='–º—É–∂—Å–∫–æ–π'?'üë®':'üë©'})]},v))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043E\\u0442\\u2026\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${calcType==='premium'?'selected':''}`,onClick:()=>{setCalcType('premium');setAmount('');setAmountError('');},children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0433\\u043E \\u0432\\u0437\\u043D\\u043E\\u0441\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${calcType==='sum'?'selected':''}`,onClick:()=>{setCalcType('sum');setAmount('');setAmountError('');},children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0439 \\u0441\\u0443\\u043C\\u043C\\u044B\"})]})]}),calcType&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0443\\u043C\\u043C\\u0443 \\u0432 \\u0440\\u0443\\u0431\\u043B\\u044F\\u0445\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:amount,onChange:handleAmountChange,placeholder:calcType==='premium'?'–ú–∏–Ω–∏–º—É–º 60 000':'–ú–∏–Ω–∏–º—É–º 450 000'}),amountError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error-message\",children:amountError})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"top-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"top-btn\",onClick:handleNext,disabled:!canGoNext(),children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 4l8 8-8 8\"})})})})]}),isProcessing&&/*#__PURE__*/_jsxs(\"div\",{className:\"processing-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442\\u0441\\u044F \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"arrow-animation\",children:\"\\u2192\"})]}),step==='result'&&!isProcessing&&resultData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430:\"}),\" \",todayStr]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u043E\\u043B:\"}),\" \",resultData.gender]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442 \\u0437\\u0430\\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u043D\\u043D\\u043E\\u0433\\u043E:\"}),\" \",resultData.age,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u0440\\u043E\\u043A \\u0441\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F:\"}),\" \",term,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u0435\\u0440\\u0438\\u043E\\u0434\\u0438\\u0447\\u043D\\u043E\\u0441\\u0442\\u044C \\u0432\\u0437\\u043D\\u043E\\u0441\\u043E\\u0432:\"}),\" \",periodicity]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0412\\u0430\\u043B\\u044E\\u0442\\u0430:\"}),\" \",currency]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slider-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"slider-indicators\",children:[0,1,2].map(i=>/*#__PURE__*/_jsx(\"div\",{className:`slider-dot ${i===slideIndex?'active':''}`},i))}),slides[slideIndex],/*#__PURE__*/_jsxs(\"div\",{className:\"detail-nav\",children:[slideIndex>0&&/*#__PURE__*/_jsx(\"button\",{className:\"nav-btn left\",onClick:()=>setSlideIndex(si=>si-1),children:\"\\u2190\"}),slideIndex<slides.length-1&&/*#__PURE__*/_jsx(\"button\",{className:\"nav-btn right\",onClick:()=>setSlideIndex(si=>si+1),children:\"\\u2192\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"snp-form\",children:/*#__PURE__*/_jsx(\"button\",{className:\"insurance-btn selected\",onClick:()=>setStep('manager'),children:\"\\u0421\\u0432\\u044F\\u0437\\u0430\\u0442\\u044C\\u0441\\u044F \\u0441 \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u043E\\u043C\"})})]}),step==='manager'&&/*#__PURE__*/_jsxs(\"div\",{className:\"snp-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:mgrSurname,onChange:e=>setMgrSurname(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0418\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:mgrName,onChange:e=>setMgrName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0413\\u043E\\u0440\\u043E\\u0434 \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:mgrCity,onChange:e=>setMgrCity(e.target.value)})]}),mgrError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error-message\",children:mgrError}),/*#__PURE__*/_jsx(\"button\",{className:\"insurance-btn selected\",onClick:handleManagerSubmit,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u0443\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","mainmenuIcon","logoImage","backgroundImage","DateWheelPicker","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","SNPPage","navigate","step","setStep","email","setEmail","emailError","setEmailError","birthDateParts","setBirthDateParts","day","month","year","birthDate","setBirthDate","gender","setGender","calcType","setCalcType","amount","setAmount","amountError","setAmountError","isProcessing","setIsProcessing","resultData","setResultData","slideIndex","setSlideIndex","mgrSurname","setMgrSurname","mgrName","setMgrName","mgrCity","setMgrCity","mgrError","setMgrError","term","periodicity","currency","d","Number","m","y","dt","Date","isNaN","getTime","getDate","getMonth","getFullYear","formatSum","raw","digits","replace","out","length","slice","handleAmountChange","e","fmt","target","value","num","parseInt","getAge","today","age","canGoNext","handleEmailNext","includes","handleNext","dateRu","toLocaleDateString","payload","birthdate","payment","sum","res","fetch","method","headers","body","JSON","stringify","data","json","ok","err","console","error","todayStr","slides","className","children","String","contribution","totalContribution","Math","round","parseFloat","accrualPercent","accrualAmount","totalAccrual","finalAnnual","finalTotal","handleManagerSubmit","fio","surname","name","city","style","onClick","src","alt","type","placeholder","onChange","val","prev","padStart","Array","isArray","split","map","v","disabled","viewBox","i","si"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/SNPPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport mainmenuIcon    from './components/icons/mainmenu.png';\nimport logoImage       from './components/logo.png';\nimport backgroundImage from './components/background.png';\nimport DateWheelPicker from './DateWheelPicker';\nimport './SNPPage.css';\n\nexport default function SNPPage() {\n  const navigate = useNavigate();\n\n  // === –®–∞–≥–∏ ===\n  const [step, setStep] = useState('email'); // 'email' ‚Üí 'form' ‚Üí 'result' ‚Üí 'manager'\n\n  // === Email ===\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n\n  // === –§–æ—Ä–º–∞ —Ä–∞—Å—á—ë—Ç–∞ ===\n  const [birthDateParts, setBirthDateParts] = useState({ day: null, month: null, year: null });\n  const [birthDate,      setBirthDate]      = useState(null);\n  const [gender,         setGender]         = useState(null);   // \"–º—É–∂—Å–∫–æ–π\" / \"–∂–µ–Ω—Å–∫–∏–π\"\n  const [calcType,       setCalcType]       = useState(null);   // 'premium' –∏–ª–∏ 'sum'\n  const [amount,         setAmount]         = useState('');     // —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞\n  const [amountError,    setAmountError]    = useState('');     // —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ —Å—É–º–º–µ\n  const [isProcessing,   setIsProcessing]   = useState(false);  // –∏–¥—ë—Ç –∑–∞–ø—Ä–æ—Å —Ä–∞—Å—á—ë—Ç–∞\n  const [resultData,     setResultData]     = useState(null);   // –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ —Ä–∞—Å—á—ë—Ç—É\n  const [slideIndex,     setSlideIndex]     = useState(0);      // —Ç–µ–∫—É—â–∏–π —Å–ª–∞–π–¥ –≤ —Ä–∞–∑–¥–µ–ª–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏\n\n  // === –î–∞–Ω–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ===\n  const [mgrSurname, setMgrSurname] = useState('');\n  const [mgrName,    setMgrName]    = useState('');\n  const [mgrCity,    setMgrCity]    = useState('');\n  const [mgrError,   setMgrError]   = useState('');\n\n  // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã\n  const term        = 5;\n  const periodicity = '–µ–∂–µ–≥–æ–¥–Ω–æ';\n  const currency    = '—Ä—É–±–ª–µ–π';\n\n  // –°–æ–±–∏—Ä–∞–µ–º –æ–±—ä–µ–∫—Ç Date –∏–∑ birthDateParts\n  useEffect(() => {\n    const { day, month, year } = birthDateParts;\n    if (day && month && year) {\n      const d = Number(day), m = Number(month), y = Number(year);\n      const dt = new Date(y, m - 1, d);\n      if (\n        !isNaN(dt.getTime()) &&\n        dt.getDate()     === d &&\n        dt.getMonth() + 1 === m &&\n        dt.getFullYear() === y\n      ) {\n        setBirthDate(dt);\n      } else {\n        setBirthDate(null);\n      }\n    } else {\n      setBirthDate(null);\n    }\n  }, [birthDateParts]);\n\n  // –£—Ç–∏–ª–∏—Ç–∞: —Ñ–æ—Ä–º–∞—Ç —Å—É–º–º—ã \"1234567\" ‚Üí \"1.234.567\"\n  const formatSum = raw => {\n    let digits = raw.replace(/\\D/g, '');\n    if (!digits) return '';\n    let out = '';\n    while (digits.length > 3) {\n      out = '.' + digits.slice(-3) + out;\n      digits = digits.slice(0, -3);\n    }\n    return digits + out;\n  };\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ —Å—É–º–º—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª–∫–∏\n  const handleAmountChange = e => {\n    const fmt = formatSum(e.target.value);\n    setAmount(fmt);\n    const num = parseInt(fmt.replace(/\\./g, ''), 10) || 0;\n    if (calcType === 'premium') {\n      setAmountError(num < 60000 ? '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –æ—Ç 60 000 ‚ÇΩ' : '');\n    } else if (calcType === 'sum') {\n      setAmountError(num < 450000 ? '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –æ—Ç 450 000 ‚ÇΩ' : '');\n    }\n  };\n\n  // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤–æ–∑—Ä–∞—Å—Ç\n  const getAge = d => {\n    if (!(d instanceof Date)) return 0;\n    const today = new Date();\n    let age = today.getFullYear() - d.getFullYear();\n    const m = today.getMonth() - d.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < d.getDate())) age--;\n    return age;\n  };\n\n  // –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ ¬´–î–∞–ª–µ–µ¬ª –Ω–∞ —Ñ–æ—Ä–º–µ\n  const canGoNext = () =>\n    birthDate instanceof Date &&\n    !isNaN(birthDate.getTime()) &&\n    gender &&\n    calcType &&\n    amount &&\n    !amountError &&\n    getAge(birthDate) >= 18;\n\n  // –ü–µ—Ä–µ—Ö–æ–¥ —Å —à–∞–≥–∞ ¬´Email¬ª –Ω–∞ ¬´–§–æ—Ä–º–∞ —Ä–∞—Å—á—ë—Ç–∞¬ª\n  const handleEmailNext = () => {\n    if (!email.includes('@vtb.ru')) {\n      setEmailError('–î–æ–º–µ–Ω –≤–∞—à–µ–π –ø–æ—á—Ç—ã –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');\n    } else {\n      setEmailError('');\n      setStep('form');\n    }\n  };\n\n  // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã —Ä–∞—Å—á—ë—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚Üí —à–∞–≥ ¬´–†–µ–∑—É–ª—å—Ç–∞—Ç—ã¬ª\n  const handleNext = async () => {\n    if (!canGoNext()) return;\n    const dateRu = birthDate.toLocaleDateString('ru-RU', {\n      day: '2-digit', month: '2-digit', year: 'numeric'\n    });\n    const age = getAge(birthDate);\n    const payload = {\n      birthdate: dateRu,\n      age,\n      gender,\n      payment: calcType === 'premium' ? '–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞' : '–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã',\n      sum: parseInt(amount.replace(/\\./g, ''), 10)\n    };\n    setIsProcessing(true);\n    try {\n      const res = await fetch('/api/snp/save', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setResultData(data);\n        setSlideIndex(0);\n        setStep('result');\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—á—ë—Ç–∞:', err);\n    }\n    setIsProcessing(false);\n  };\n\n  // –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞ (–¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö)\n  const todayStr = new Date().toLocaleDateString('ru-RU', {\n    day: '2-digit', month: '2-digit', year: 'numeric'\n  });\n\n  // –ú–∞—Å—Å–∏–≤ React-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç—Ä—ë—Ö —Å–ª–∞–π–¥–æ–≤ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏\n  const slides = resultData ? [\n    <div key={0} className=\"detail-slide\">\n      <div className=\"slide-header\">–í –¢–ï–ß–ï–ù–ò–ï {term} –õ–ï–¢</div>\n      <div className=\"slide-title\">–í—ã –≤–Ω–æ—Å–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.contribution))} ‚ÇΩ</div>\n      <div className=\"slide-period\">{periodicity}</div>\n      <div className=\"slide-subtitle\">–°—É–º–º–∞ –≤–∞—à–∏—Ö –≤–∑–Ω–æ—Å–æ–≤</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.totalContribution))} ‚ÇΩ</div>\n    </div>,\n    <div key={1} className=\"detail-slide\">\n      <div className=\"slide-header\">–ù–ê–ß–ò–°–õ–Ø–ï–ú –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û</div>\n      <div className=\"slide-title\">\n        {`${Math.round(parseFloat(resultData.accrualPercent) * 100)}% –æ—Ç –∫–∞–∂–¥–æ–≥–æ –≤–∑–Ω–æ—Å–∞`}\n      </div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.accrualAmount))} ‚ÇΩ</div>\n      <div className=\"slide-period\">{periodicity}</div>\n      <div className=\"slide-subtitle\">–û–±—â–∞—è —Å—É–º–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.totalAccrual))} ‚ÇΩ</div>\n    </div>,\n    <div key={2} className=\"detail-slide\">\n      <div className=\"slide-header\">–í–´ –ü–û–õ–£–ß–ê–ï–¢–ï:</div>\n      <div className=\"slide-icon\">üí∞</div>\n      <div className=\"slide-amount-big\">{formatSum(String(resultData.finalAnnual))} ‚ÇΩ</div>\n      <div className=\"slide-period\">–ï–∂–µ–≥–æ–¥–Ω—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.finalTotal))} ‚ÇΩ</div>\n      <div className=\"slide-subtitle\">–í–∞—à –∫–∞–ø–∏—Ç–∞–ª —á–µ—Ä–µ–∑ {term} –ª–µ—Ç</div>\n    </div>\n  ] : [];\n\n  // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø–æ SMTP\n  const handleManagerSubmit = async () => {\n    if (!mgrSurname || !mgrName || !mgrCity) {\n      setMgrError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.');\n      return;\n    }\n\n    const fio       = `${mgrSurname} ${mgrName}`;\n    const birthdate = birthDate.toLocaleDateString('ru-RU', {\n      day: '2-digit', month: '2-digit', year: 'numeric'\n    });\n    const age       = getAge(birthDate);\n\n    const payload = {\n      surname:      mgrSurname,\n      name:         mgrName,\n      city:         mgrCity,\n      email:        email,                  // –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ—á—Ç–∞\n      gender:       resultData.gender,\n      birthdate,\n      age,\n      contribution: resultData.contribution  // –∏—Ç–æ–≥–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –≤–∑–Ω–æ—Å–∞\n    };\n\n    try {\n      const res = await fetch('/api/snp/send_manager', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) {\n        const err = await res.json();\n        console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É:', err);\n        setMgrError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');\n        return;\n      }\n      // —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –º–µ–Ω—é\n      navigate('/Main-Menu');\n    } catch (e) {\n      console.error('Network error –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É:', e);\n      setMgrError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.');\n    }\n  };\n\n  return (\n    <div className=\"snp-container\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n\n      {/* –ö–Ω–æ–ø–∫–∞ ¬´–î–æ–º–æ–π¬ª */}\n      <div className=\"back-btn-container\">\n        <button className=\"back-btn\" onClick={() => navigate('/Main-Menu')}>\n          <img src={mainmenuIcon} alt=\"–î–æ–º–æ–π\"/>\n        </button>\n      </div>\n\n      {/* –õ–æ–≥–æ—Ç–∏–ø */}\n      <div className=\"logo-container\">\n        <img src={logoImage} alt=\"Logo\" className=\"logo-image\"/>\n      </div>\n\n      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}\n      <h1 className=\"snp-title\">–†–∞—Å—á—ë—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ \"–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç\"</h1>\n\n      {/* === –®–∞–≥ 1: Email === */}\n      {step === 'email' && (\n        <div className=\"snp-form\">\n          <div className=\"form-group\">\n            <label className=\"form-label\">–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ—á—Ç–∞ –í–¢–ë:</label>\n            <input\n              type=\"email\"\n              className=\"insurance-sum-input\"\n              value={email}\n              placeholder=\"name@vtb.ru\"\n              onChange={e => setEmail(e.target.value)}\n            />\n          </div>\n          <button className=\"insurance-btn selected\" onClick={handleEmailNext}>\n            –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å—á—ë—Ç—É\n          </button>\n          {emailError && (\n            <div className=\"email-error-message\">{emailError}</div>\n          )}\n        </div>\n      )}\n\n      {/* === –®–∞–≥ 2: –§–æ—Ä–º–∞ —Ä–∞—Å—á—ë—Ç–∞ === */}\n      {step === 'form' && !isProcessing && !resultData && (\n        <>\n          <div className=\"snp-form\">\n            {/* –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è */}\n            <div className=\"form-group\">\n              <label className=\"form-label\">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>\n              <DateWheelPicker\n                value={birthDateParts}\n                onChange={val => {\n                  setBirthDateParts(prev => {\n                    if (val instanceof Date) {\n                      return {\n                        day:   String(val.getDate()).padStart(2,'0'),\n                        month: String(val.getMonth()+1).padStart(2,'0'),\n                        year:  String(val.getFullYear())\n                      };\n                    }\n                    if (Array.isArray(val) && val.length===3) {\n                      const [d,m,y] = val;\n                      return { day: d, month: m, year: y };\n                    }\n                    if (typeof val==='object') {\n                      return {\n                        ...prev,\n                        ...(val.day   != null ? { day:   String(val.day).padStart(2,'0')   } : {}),\n                        ...(val.month != null ? { month: String(val.month).padStart(2,'0') } : {}),\n                        ...(val.year  != null ? { year:  String(val.year)                } : {})\n                      };\n                    }\n                    if (typeof val==='string') {\n                      if (val.includes('.')) {\n                        const [d,m,y] = val.split('.');\n                        return { day: d.padStart(2,'0'), month: m.padStart(2,'0'), year: y };\n                      }\n                      if (val.includes('-')) {\n                        const [y,m,d] = val.split('-');\n                        return { day: d.padStart(2,'0'), month: m.padStart(2,'0'), year: y };\n                      }\n                    }\n                    return prev;\n                  });\n                }}\n              />\n            </div>\n\n            {/* –ü–æ–ª */}\n            <div className=\"form-group\">\n              <label className=\"form-label\">–ü–æ–ª:</label>\n              <div className=\"gender-selector\">\n                {['–º—É–∂—Å–∫–æ–π','–∂–µ–Ω—Å–∫–∏–π'].map(v => (\n                  <div\n                    key={v}\n                    className={`gender-option ${gender===v?'selected':''}`}\n                    onClick={()=>setGender(v)}\n                  >\n                    <div className=\"gender-label\">{v==='–º—É–∂—Å–∫–æ–π'?'–ú—É–∂—Å–∫–æ–π':'–ñ–µ–Ω—Å–∫–∏–π'}</div>\n                    <div className=\"gender-icon\">{v==='–º—É–∂—Å–∫–æ–π'?'üë®':'üë©'}</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* –†–∞—Å—á—ë—Ç –æ—Ç‚Ä¶ */}\n            <div className=\"form-group\">\n              <label className=\"form-label\">–†–∞—Å—á—ë—Ç –æ—Ç‚Ä¶</label>\n              <div className=\"insurance-options\">\n                <button\n                  className={`insurance-btn ${calcType==='premium'?'selected':''}`}\n                  onClick={()=>{ setCalcType('premium'); setAmount(''); setAmountError(''); }}\n                >\n                  –°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞\n                </button>\n                <button\n                  className={`insurance-btn ${calcType==='sum'?'selected':''}`}\n                  onClick={()=>{ setCalcType('sum'); setAmount(''); setAmountError(''); }}\n                >\n                  –°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã\n                </button>\n              </div>\n            </div>\n\n            {/* –í–≤–æ–¥ —Å—É–º–º—ã */}\n            {calcType && (\n              <div className=\"form-group\">\n                <label className=\"form-label\">–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ —Ä—É–±–ª—è—Ö</label>\n                <input\n                  type=\"text\"\n                  className=\"insurance-sum-input\"\n                  value={amount}\n                  onChange={handleAmountChange}\n                  placeholder={calcType==='premium'?'–ú–∏–Ω–∏–º—É–º 60 000':'–ú–∏–Ω–∏–º—É–º 450 000'}\n                />\n                {amountError && (\n                  <div className=\"input-error-message\">{amountError}</div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* –ö–Ω–æ–ø–∫–∞ ¬´–î–∞–ª–µ–µ¬ª */}\n          <div className=\"top-btn-container\">\n            <button\n              className=\"top-btn\"\n              onClick={handleNext}\n              disabled={!canGoNext()}\n            >\n              <svg viewBox=\"0 0 24 24\"><path d=\"M12 4l8 8-8 8\"/></svg>\n            </button>\n          </div>\n        </>\n      )}\n\n      {/* === –®–∞–≥ 3: Processing === */}\n      {isProcessing && (\n        <div className=\"processing-container\">\n          <p>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á—ë—Ç...</p>\n          <div className=\"arrow-animation\">‚Üí</div>\n        </div>\n      )}\n\n      {/* === –®–∞–≥ 4: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã === */}\n      {step==='result' && !isProcessing && resultData && (\n        <>\n          <div className=\"result-container\">\n            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞</h2>\n            <p><strong>–î–∞—Ç–∞ —Ä–∞—Å—á—ë—Ç–∞:</strong> {todayStr}</p>\n            <p><strong>–ü–æ–ª:</strong> {resultData.gender}</p>\n            <p><strong>–í–æ–∑—Ä–∞—Å—Ç –∑–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–Ω–æ–≥–æ:</strong> {resultData.age} –ª–µ—Ç</p>\n            <p><strong>–°—Ä–æ–∫ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è:</strong> {term} –ª–µ—Ç</p>\n            <p><strong>–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –≤–∑–Ω–æ—Å–æ–≤:</strong> {periodicity}</p>\n            <p><strong>–í–∞–ª—é—Ç–∞:</strong> {currency}</p>\n          </div>\n\n          <div className=\"detail-slider-container\">\n            <div className=\"slider-indicators\">\n              {[0,1,2].map(i=>(\n                <div key={i} className={`slider-dot ${i===slideIndex?'active':''}`}/>\n              ))}\n            </div>\n\n            {slides[slideIndex]}\n\n            <div className=\"detail-nav\">\n              {slideIndex>0 && (\n                <button className=\"nav-btn left\" onClick={()=>setSlideIndex(si=>si-1)}>‚Üê</button>\n              )}\n              {slideIndex<slides.length-1 && (\n                <button className=\"nav-btn right\" onClick={()=>setSlideIndex(si=>si+1)}>‚Üí</button>\n              )}\n            </div>\n          </div>\n\n          {/* –ö–Ω–æ–ø–∫–∞ ¬´–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª */}\n          <div className=\"snp-form\">\n            <button\n              className=\"insurance-btn selected\"\n              onClick={()=>setStep('manager')}\n            >\n              –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º\n            </button>\n          </div>\n        </>\n      )}\n\n      {/* === –®–∞–≥ 5: –§–æ—Ä–º–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ === */}\n      {step==='manager' && (\n        <div className=\"snp-form\">\n          <div className=\"form-group\">\n            <label className=\"form-label\">–§–∞–º–∏–ª–∏—è:</label>\n            <input\n              type=\"text\"\n              className=\"insurance-sum-input\"\n              value={mgrSurname}\n              onChange={e=>setMgrSurname(e.target.value)}\n            />\n          </div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">–ò–º—è:</label>\n            <input\n              type=\"text\"\n              className=\"insurance-sum-input\"\n              value={mgrName}\n              onChange={e=>setMgrName(e.target.value)}\n            />\n          </div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">–ì–æ—Ä–æ–¥ —Ä–∞–±–æ—Ç—ã:</label>\n            <input\n              type=\"text\"\n              className=\"insurance-sum-input\"\n              value={mgrCity}\n              onChange={e=>setMgrCity(e.target.value)}\n            />\n          </div>\n\n          {mgrError && (\n            <div className=\"input-error-message\">{mgrError}</div>\n          )}\n\n          <button\n            className=\"insurance-btn selected\"\n            onClick={handleManagerSubmit}\n          >\n            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}