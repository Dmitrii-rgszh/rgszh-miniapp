{"ast":null,"code":"// CareFuturePage.js\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import mainmenuIcon from'./components/icons/mainmenu.png';import logoImage from'./components/logo.png';import backgroundImage from'./components/background.png';import DateWheelPicker from'./DateWheelPicker';import'./CareFuturePage.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CareFuturePage(){const navigate=useNavigate();// === состояния ===\nconst[step,setStep]=useState('email');// email → form → processing → result → manager\nconst[email,setEmail]=useState('');const[emailError,setEmailError]=useState('');const[birthDateParts,setBirthDateParts]=useState({day:null,month:null,year:null});const[birthDate,setBirthDate]=useState(null);const[gender,setGender]=useState(null);const[programTerm,setProgramTerm]=useState(5);// срок программы в годах\nconst[termError,setTermError]=useState('');const[calcType,setCalcType]=useState(null);const[amount,setAmount]=useState('');const[amountError,setAmountError]=useState('');const[isProcessing,setIsProcessing]=useState(false);const[resultData,setResultData]=useState(null);const[mgrSurname,setMgrSurname]=useState('');const[mgrName,setMgrName]=useState('');const[mgrCity,setMgrCity]=useState('');const[mgrError,setMgrError]=useState('');const[slideIndex,setSlideIndex]=useState(0);// === константы ===\nconst periodicity='ежегодно';const minAmount=100000;// новая минималка\n// === эффект: собираем Date из birthDateParts ===\nuseEffect(()=>{const{day,month,year}=birthDateParts;if(day&&month&&year){const d=Number(day),m=Number(month),y=Number(year);const dt=new Date(y,m-1,d);if(!isNaN(dt.getTime())&&dt.getDate()===d&&dt.getMonth()+1===m&&dt.getFullYear()===y){setBirthDate(dt);}else{setBirthDate(null);}}else{setBirthDate(null);}},[birthDateParts]);// === утилиты ===\nconst formatSum=raw=>{let digits=raw.replace(/\\D/g,'');if(!digits)return'';let out='';while(digits.length>3){out='.'+digits.slice(-3)+out;digits=digits.slice(0,-3);}return digits+out;};const getAge=date=>{if(!(date instanceof Date))return 0;const today=new Date();let age=today.getFullYear()-date.getFullYear();const m=today.getMonth()-date.getMonth();if(m<0||m===0&&today.getDate()<date.getDate())age--;return age;};// === валидации ===\nconst handleEmailNext=()=>{if(!email.endsWith('@vtb.ru')){setEmailError('Домен вашей почты не является корпоративным. Попробуйте ещё раз.');}else{setEmailError('');setStep('form');}};const handleAmountChange=e=>{const fmt=formatSum(e.target.value);setAmount(fmt);const num=parseInt(fmt.replace(/\\./g,''),10)||0;setAmountError(num<minAmount?`Введите сумму от ${minAmount.toLocaleString('ru-RU')} ₽`:'');};// проверяем условия перед кнопкой \"Далее\"\nconst canGoNext=()=>{if(!(birthDate instanceof Date)||!gender||!calcType||!amount||amountError)return false;const age=getAge(birthDate);if(age<18)return false;// минимум 18 полных лет\nconst endAge=age+programTerm;if(endAge>70)return false;// не старше 70 полных на конец\nreturn true;};// валидация срока программы\nuseEffect(()=>{if(birthDate){const age=getAge(birthDate);const endAge=age+programTerm;if(age>=18&&endAge>70){if(programTerm===5){setTermError('К сожалению, данная программа Вам не подойдёт');}else{setTermError('Возраст на дату окончания не должен превышать 70 лет. Попробуйте уменьшить срок.');}}else{setTermError('');}}},[programTerm,birthDate]);// === переход к расчёту ===\nconst handleNext=async()=>{if(!canGoNext())return;const dateRu=birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});const payload={birthdate:dateRu,age:getAge(birthDate),gender,term:programTerm,payment:calcType==='premium'?'Страхового взноса':'Страховой суммы',sum:parseInt(amount.replace(/\\./g,''),10)};setIsProcessing(true);try{const res=await fetch('/api/carefuture/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(res.ok){setResultData(data);setSlideIndex(0);setStep('result');}}catch(err){console.error(err);}setIsProcessing(false);};// === слайды результата ===\nconst slides=resultData?[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slide\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"slide-header\",children:[\"\\u0412 \\u0422\\u0415\\u0427\\u0415\\u041D\\u0418\\u0415 \",programTerm,\" \\u041B\\u0415\\u0422\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-title\",children:\"\\u0412\\u044B \\u0432\\u043D\\u043E\\u0441\\u0438\\u0442\\u0435 \\u0441\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.contribution)),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-period\",children:periodicity}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-subtitle\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0432\\u0430\\u0448\\u0438\\u0445 \\u0432\\u0437\\u043D\\u043E\\u0441\\u043E\\u0432\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.totalContribution)),\" \\u20BD\"]})]},0),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slide\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"slide-header\",children:\"\\u041D\\u0410\\u0427\\u0418\\u0421\\u041B\\u042F\\u0415\\u041C \\u0414\\u041E\\u041F\\u041E\\u041B\\u041D\\u0418\\u0422\\u0415\\u041B\\u042C\\u041D\\u041E\"}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-title\",children:`${resultData.accrualPercent}% от каждого взноса`}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.accrualAmount)),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-period\",children:periodicity}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-subtitle\",children:\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430 \\u043D\\u0430\\u0447\\u0438\\u0441\\u043B\\u0435\\u043D\\u0438\\u0439\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.totalAccrual)),\" \\u20BD\"]})]},1),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slide\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"slide-header\",children:\"\\u0412\\u042B \\u041F\\u041E\\u041B\\u0423\\u0427\\u0410\\u0415\\u0422\\u0415:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-icon\",children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount-big\",children:[formatSum(String(resultData.finalAnnual)),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"slide-period\",children:\"\\u0415\\u0436\\u0435\\u0433\\u043E\\u0434\\u043D\\u044B\\u0435 \\u043D\\u0430\\u043A\\u043E\\u043F\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-amount\",children:[formatSum(String(resultData.finalTotal)),\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"slide-subtitle\",children:[\"\\u0412\\u0430\\u0448 \\u043A\\u0430\\u043F\\u0438\\u0442\\u0430\\u043B \\u0447\\u0435\\u0440\\u0435\\u0437 \",programTerm,\" \\u043B\\u0435\\u0442\"]})]},2)]:[];// === отправка менеджеру ===\nconst handleManagerSubmit=async()=>{if(!mgrSurname||!mgrName||!mgrCity){setMgrError('Заполните все поля');return;}const payload={surname:mgrSurname.trim(),name:mgrName.trim(),city:mgrCity.trim(),email,gender,birthdate:birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'}),age:getAge(birthDate),term:programTerm,contribution:resultData.contribution};try{const res=await fetch('/api/carefuture/send_manager',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(res.ok)navigate('/main-menu');else setMgrError('Ошибка отправки');}catch{setMgrError('Сетевая ошибка');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate('/main-menu'),children:/*#__PURE__*/_jsx(\"img\",{src:mainmenuIcon,alt:\"\\u0414\\u043E\\u043C\\u043E\\u0439\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\",className:\"logo-image\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"snp-title\",children:\"\\u0417\\u0430\\u0431\\u043E\\u0442\\u0430 \\u043E \\u0431\\u0443\\u0434\\u0443\\u0449\\u0435\\u043C\"}),step==='email'&&/*#__PURE__*/_jsxs(\"div\",{className:\"snp-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041A\\u043E\\u0440\\u043F\\u043E\\u0440\\u0430\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430 \\u0412\\u0422\\u0411:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"insurance-sum-input\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"name@vtb.ru\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"insurance-btn selected\",onClick:handleEmailNext,children:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0443\"}),emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error-message\",children:emailError})]}),step==='form'&&!isProcessing&&!resultData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"snp-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(DateWheelPicker,{value:birthDateParts,onChange:val=>{if(val instanceof Date){setBirthDateParts({day:String(val.getDate()).padStart(2,'0'),month:String(val.getMonth()+1).padStart(2,'0'),year:String(val.getFullYear())});}else if(typeof val==='object'){setBirthDateParts(prev=>({...prev,...(val.day!=null?{day:String(val.day).padStart(2,'0')}:{}),...(val.month!=null?{month:String(val.month).padStart(2,'0')}:{}),...(val.year!=null?{year:String(val.year)}:{})}));}else if(typeof val==='string'){const parts=val.includes('.')?val.split('.'):val.includes('-')?val.split('-').reverse():[];if(parts.length===3){setBirthDateParts({day:parts[0].padStart(2,'0'),month:parts[1].padStart(2,'0'),year:parts[2]});}}}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0421\\u0440\\u043E\\u043A \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B (\\u043B\\u0435\\u0442):\"}),/*#__PURE__*/_jsx(\"select\",{className:\"insurance-sum-input\",value:programTerm,onChange:e=>setProgramTerm(Number(e.target.value)),children:Array.from({length:16},(_,i)=>5+i).map(v=>/*#__PURE__*/_jsx(\"option\",{value:v,children:v},v))}),termError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error-message\",children:termError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u041F\\u043E\\u043B:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gender-selector\",children:['мужской','женский'].map(v=>/*#__PURE__*/_jsxs(\"div\",{className:`gender-option ${gender===v?'selected':''}`,onClick:()=>setGender(v),children:[/*#__PURE__*/_jsx(\"div\",{className:\"gender-label\",children:v==='мужской'?'Мужской':'Женский'}),/*#__PURE__*/_jsx(\"div\",{className:\"gender-icon\",children:v==='мужской'?'👨':'👩'})]},v))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043E\\u0442\\u2026\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${calcType==='premium'?'selected':''}`,onClick:()=>{setCalcType('premium');setAmount('');setAmountError('');},children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0433\\u043E \\u0432\\u0437\\u043D\\u043E\\u0441\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:`insurance-btn ${calcType==='sum'?'selected':''}`,onClick:()=>{setCalcType('sum');setAmount('');setAmountError('');},children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0439 \\u0441\\u0443\\u043C\\u043C\\u044B\"})]})]}),calcType&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0443\\u043C\\u043C\\u0443 \\u0432 \\u0440\\u0443\\u0431\\u043B\\u044F\\u0445\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:amount,onChange:handleAmountChange,placeholder:`Минимум ${minAmount.toLocaleString('ru-RU')}`}),amountError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error-message\",children:amountError})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"top-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"top-btn\",onClick:handleNext,disabled:!canGoNext(),children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 4l8 8-8 8\"})})})})]}),isProcessing&&/*#__PURE__*/_jsxs(\"div\",{className:\"processing-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442\\u0441\\u044F \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"arrow-animation\",children:\"\\u2192\"})]}),step==='result'&&resultData&&!isProcessing&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442:\"}),\" \",resultData.age,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u043E\\u043B:\"}),\" \",resultData.gender]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u0440\\u043E\\u043A:\"}),\" \",resultData.term,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u0443\\u043C\\u043C\\u0430:\"}),\" \",formatSum(String(resultData.sum)),\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0418\\u0442\\u043E\\u0433\\u043E\\u0432\\u0430\\u044F \\u043F\\u0440\\u0435\\u043C\\u0438\\u044F:\"}),\" \",formatSum(String(resultData.totalPremium||0)),\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-slider-container\",children:[slides[slideIndex],/*#__PURE__*/_jsxs(\"div\",{className:\"detail-nav\",children:[slideIndex>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSlideIndex(i=>i-1),className:\"nav-btn left\",children:\"\\u2190\"}),slideIndex<slides.length-1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSlideIndex(i=>i+1),className:\"nav-btn right\",children:\"\\u2192\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"insurance-btn selected\",onClick:()=>setStep('manager'),children:\"\\u0421\\u0432\\u044F\\u0437\\u0430\\u0442\\u044C\\u0441\\u044F \\u0441 \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u043E\\u043C\"})]}),step==='manager'&&/*#__PURE__*/_jsxs(\"div\",{className:\"snp-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:mgrSurname,onChange:e=>setMgrSurname(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0418\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:mgrName,onChange:e=>setMgrName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0413\\u043E\\u0440\\u043E\\u0434 \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"insurance-sum-input\",value:mgrCity,onChange:e=>setMgrCity(e.target.value)})]}),mgrError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error-message\",children:mgrError}),/*#__PURE__*/_jsx(\"div\",{className:\"top-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"top-btn\",onClick:handleManagerSubmit,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u0443\"})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","mainmenuIcon","logoImage","backgroundImage","DateWheelPicker","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","CareFuturePage","navigate","step","setStep","email","setEmail","emailError","setEmailError","birthDateParts","setBirthDateParts","day","month","year","birthDate","setBirthDate","gender","setGender","programTerm","setProgramTerm","termError","setTermError","calcType","setCalcType","amount","setAmount","amountError","setAmountError","isProcessing","setIsProcessing","resultData","setResultData","mgrSurname","setMgrSurname","mgrName","setMgrName","mgrCity","setMgrCity","mgrError","setMgrError","slideIndex","setSlideIndex","periodicity","minAmount","d","Number","m","y","dt","Date","isNaN","getTime","getDate","getMonth","getFullYear","formatSum","raw","digits","replace","out","length","slice","getAge","date","today","age","handleEmailNext","endsWith","handleAmountChange","e","fmt","target","value","num","parseInt","toLocaleString","canGoNext","endAge","handleNext","dateRu","toLocaleDateString","payload","birthdate","term","payment","sum","res","fetch","method","headers","body","JSON","stringify","data","json","ok","err","console","error","slides","className","children","String","contribution","totalContribution","accrualPercent","accrualAmount","totalAccrual","finalAnnual","finalTotal","handleManagerSubmit","surname","trim","name","city","style","onClick","src","alt","type","onChange","placeholder","val","padStart","prev","parts","includes","split","reverse","Array","from","_","i","map","v","disabled","viewBox","totalPremium"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/CareFuturePage.js"],"sourcesContent":["// CareFuturePage.js\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport mainmenuIcon    from './components/icons/mainmenu.png';\nimport logoImage       from './components/logo.png';\nimport backgroundImage from './components/background.png';\nimport DateWheelPicker from './DateWheelPicker';\nimport './CareFuturePage.css';\n\nexport default function CareFuturePage() {\n  const navigate = useNavigate();\n\n  // === состояния ===\n  const [step,           setStep]           = useState('email'); // email → form → processing → result → manager\n  const [email,          setEmail]          = useState('');\n  const [emailError,     setEmailError]     = useState('');\n  const [birthDateParts, setBirthDateParts] = useState({ day:null, month:null, year:null });\n  const [birthDate,      setBirthDate]      = useState(null);\n  const [gender,         setGender]         = useState(null);\n  const [programTerm,    setProgramTerm]    = useState(5);       // срок программы в годах\n  const [termError,      setTermError]      = useState('');\n  const [calcType,       setCalcType]       = useState(null);\n  const [amount,         setAmount]         = useState('');\n  const [amountError,    setAmountError]    = useState('');\n  const [isProcessing,   setIsProcessing]   = useState(false);\n  const [resultData,     setResultData]     = useState(null);\n  const [mgrSurname,     setMgrSurname]     = useState('');\n  const [mgrName,        setMgrName]        = useState('');\n  const [mgrCity,        setMgrCity]        = useState('');\n  const [mgrError,       setMgrError]       = useState('');\n  const [slideIndex,     setSlideIndex]     = useState(0);\n\n  // === константы ===\n  const periodicity = 'ежегодно';\n  const minAmount   = 100000; // новая минималка\n\n  // === эффект: собираем Date из birthDateParts ===\n  useEffect(() => {\n    const { day, month, year } = birthDateParts;\n    if (day && month && year) {\n      const d = Number(day), m = Number(month), y = Number(year);\n      const dt = new Date(y, m - 1, d);\n      if (!isNaN(dt.getTime())\n          && dt.getDate()     === d\n          && dt.getMonth()+1  === m\n          && dt.getFullYear() === y) {\n        setBirthDate(dt);\n      } else {\n        setBirthDate(null);\n      }\n    } else {\n      setBirthDate(null);\n    }\n  }, [birthDateParts]);\n\n  // === утилиты ===\n  const formatSum = raw => {\n    let digits = raw.replace(/\\D/g,'');\n    if (!digits) return '';\n    let out = '';\n    while (digits.length > 3) {\n      out = '.' + digits.slice(-3) + out;\n      digits = digits.slice(0, -3);\n    }\n    return digits + out;\n  };\n\n  const getAge = date => {\n    if (!(date instanceof Date)) return 0;\n    const today = new Date();\n    let age = today.getFullYear() - date.getFullYear();\n    const m = today.getMonth() - date.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < date.getDate())) age--;\n    return age;\n  };\n\n  // === валидации ===\n  const handleEmailNext = () => {\n    if (!email.endsWith('@vtb.ru')) {\n      setEmailError('Домен вашей почты не является корпоративным. Попробуйте ещё раз.');\n    } else {\n      setEmailError('');\n      setStep('form');\n    }\n  };\n\n  const handleAmountChange = e => {\n    const fmt = formatSum(e.target.value);\n    setAmount(fmt);\n    const num = parseInt(fmt.replace(/\\./g,''),10) || 0;\n    setAmountError(num < minAmount\n      ? `Введите сумму от ${minAmount.toLocaleString('ru-RU')} ₽`\n      : '');\n  };\n\n  // проверяем условия перед кнопкой \"Далее\"\n  const canGoNext = () => {\n    if (!(birthDate instanceof Date) || !gender || !calcType || !amount || amountError) return false;\n    const age = getAge(birthDate);\n    if (age < 18) return false;           // минимум 18 полных лет\n    const endAge = age + programTerm;\n    if (endAge > 70) return false;        // не старше 70 полных на конец\n    return true;\n  };\n\n  // валидация срока программы\n  useEffect(() => {\n    if (birthDate) {\n      const age = getAge(birthDate);\n      const endAge = age + programTerm;\n      if (age >= 18 && endAge > 70) {\n        if (programTerm === 5) {\n          setTermError('К сожалению, данная программа Вам не подойдёт');\n        } else {\n          setTermError('Возраст на дату окончания не должен превышать 70 лет. Попробуйте уменьшить срок.');\n        }\n      } else {\n        setTermError('');\n      }\n    }\n  }, [programTerm, birthDate]);\n\n  // === переход к расчёту ===\n  const handleNext = async () => {\n    if (!canGoNext()) return;\n    const dateRu = birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});\n    const payload = {\n      birthdate: dateRu,\n      age:        getAge(birthDate),\n      gender,\n      term:       programTerm,\n      payment:    calcType === 'premium' ? 'Страхового взноса' : 'Страховой суммы',\n      sum:        parseInt(amount.replace(/\\./g,''),10)\n    };\n    setIsProcessing(true);\n    try {\n      const res = await fetch('/api/carefuture/save', {\n        method:'POST',\n        headers:{'Content-Type':'application/json'},\n        body:JSON.stringify(payload)\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setResultData(data);\n        setSlideIndex(0);\n        setStep('result');\n      }\n    } catch(err) {\n      console.error(err);\n    }\n    setIsProcessing(false);\n  };\n\n  // === слайды результата ===\n  const slides = resultData ? [\n    <div key={0} className=\"detail-slide\">\n      <div className=\"slide-header\">В ТЕЧЕНИЕ {programTerm} ЛЕТ</div>\n      <div className=\"slide-title\">Вы вносите средства</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.contribution))} ₽</div>\n      <div className=\"slide-period\">{periodicity}</div>\n      <div className=\"slide-subtitle\">Сумма ваших взносов</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.totalContribution))} ₽</div>\n    </div>,\n    <div key={1} className=\"detail-slide\">\n      <div className=\"slide-header\">НАЧИСЛЯЕМ ДОПОЛНИТЕЛЬНО</div>\n      <div className=\"slide-title\">{`${resultData.accrualPercent}% от каждого взноса`}</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.accrualAmount))} ₽</div>\n      <div className=\"slide-period\">{periodicity}</div>\n      <div className=\"slide-subtitle\">Общая сумма начислений</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.totalAccrual))} ₽</div>\n    </div>,\n    <div key={2} className=\"detail-slide\">\n      <div className=\"slide-header\">ВЫ ПОЛУЧАЕТЕ:</div>\n      <div className=\"slide-icon\">💰</div>\n      <div className=\"slide-amount-big\">{formatSum(String(resultData.finalAnnual))} ₽</div>\n      <div className=\"slide-period\">Ежегодные накопления</div>\n      <div className=\"slide-amount\">{formatSum(String(resultData.finalTotal))} ₽</div>\n      <div className=\"slide-subtitle\">Ваш капитал через {programTerm} лет</div>\n    </div>\n  ] : [];\n\n  // === отправка менеджеру ===\n  const handleManagerSubmit = async () => {\n    if (!mgrSurname||!mgrName||!mgrCity) {\n      setMgrError('Заполните все поля');\n      return;\n    }\n    const payload = {\n      surname:      mgrSurname.trim(),\n      name:         mgrName.trim(),\n      city:         mgrCity.trim(),\n      email,\n      gender,\n      birthdate:    birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'}),\n      age:          getAge(birthDate),\n      term:         programTerm,\n      contribution: resultData.contribution\n    };\n    try {\n      const res = await fetch('/api/carefuture/send_manager',{\n        method:'POST',\n        headers:{'Content-Type':'application/json'},\n        body:JSON.stringify(payload)\n      });\n      if (res.ok) navigate('/main-menu');\n      else       setMgrError('Ошибка отправки');\n    } catch {\n      setMgrError('Сетевая ошибка');\n    }\n  };\n\n  return (\n    <div className=\"snp-container\" style={{ backgroundImage:`url(${backgroundImage})` }}>\n\n      {/* кнопка Домой */}\n      <div className=\"back-btn-container\">\n        <button className=\"back-btn\" onClick={()=>navigate('/main-menu')}>\n          <img src={mainmenuIcon} alt=\"Домой\"/>\n        </button>\n      </div>\n      {/* логотип */}\n      <div className=\"logo-container\">\n        <img src={logoImage} alt=\"Логотип\" className=\"logo-image\"/>\n      </div>\n      {/* заголовок */}\n      <h1 className=\"snp-title\">Забота о будущем</h1>\n\n      {/* Шаг 1 — EMAIL */}\n      {step==='email' && (\n        <div className=\"snp-form\">\n          <div className=\"form-group\">\n            <label className=\"form-label\">Корпоративная почта ВТБ:</label>\n            <input type=\"email\" className=\"insurance-sum-input\"\n                   value={email} onChange={e=>setEmail(e.target.value)}\n                   placeholder=\"name@vtb.ru\"/>\n          </div>\n          <button className=\"insurance-btn selected\" onClick={handleEmailNext}>\n            Перейти к расчёту\n          </button>\n          {emailError && <div className=\"input-error-message\">{emailError}</div>}\n        </div>\n      )}\n\n      {/* Шаг 2 — ФОРМА */}\n      {step==='form' && !isProcessing && !resultData && (\n        <>\n          <div className=\"snp-form\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">Дата рождения:</label>\n              <DateWheelPicker value={birthDateParts}\n                onChange={val=>{\n                  if (val instanceof Date) {\n                    setBirthDateParts({\n                      day: String(val.getDate()).padStart(2,'0'),\n                      month: String(val.getMonth()+1).padStart(2,'0'),\n                      year: String(val.getFullYear())\n                    });\n                  } else if (typeof val==='object') {\n                    setBirthDateParts(prev=>({\n                      ...prev,\n                      ...(val.day   != null ? {day:String(val.day).padStart(2,'0')}   :{}),\n                      ...(val.month != null ? {month:String(val.month).padStart(2,'0')}:{}),\n                      ...(val.year  != null ? {year:String(val.year)}                  :{})\n                    }));\n                  } else if (typeof val==='string') {\n                    const parts = val.includes('.') ? val.split('.') :\n                                  val.includes('-') ? val.split('-').reverse() : [];\n                    if (parts.length===3) {\n                      setBirthDateParts({\n                        day:   parts[0].padStart(2,'0'),\n                        month: parts[1].padStart(2,'0'),\n                        year:  parts[2]\n                      });\n                    }\n                  }\n                }}/>\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">Срок программы (лет):</label>\n              <select className=\"insurance-sum-input\"\n                      value={programTerm}\n                      onChange={e=>setProgramTerm(Number(e.target.value))}>\n                {Array.from({length:16},(_,i)=>5+i).map(v=>(\n                  <option key={v} value={v}>{v}</option>\n                ))}\n              </select>\n              {termError && <div className=\"input-error-message\">{termError}</div>}\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">Пол:</label>\n              <div className=\"gender-selector\">\n                {['мужской','женский'].map(v=>(\n                  <div key={v}\n                    className={`gender-option ${gender===v?'selected':''}`}\n                    onClick={()=>setGender(v)}>\n                    <div className=\"gender-label\">{v==='мужской'?'Мужской':'Женский'}</div>\n                    <div className=\"gender-icon\">{v==='мужской'?'👨':'👩'}</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">Расчёт от…</label>\n              <div className=\"insurance-options\">\n                <button className={`insurance-btn ${calcType==='premium'?'selected':''}`}\n                        onClick={()=>{ setCalcType('premium'); setAmount(''); setAmountError(''); }}>\n                  Страхового взноса\n                </button>\n                <button className={`insurance-btn ${calcType==='sum'?'selected':''}`}\n                        onClick={()=>{ setCalcType('sum'); setAmount(''); setAmountError(''); }}>\n                  Страховой суммы\n                </button>\n              </div>\n            </div>\n\n            {calcType && (\n              <div className=\"form-group\">\n                <label className=\"form-label\">Введите сумму в рублях</label>\n                <input type=\"text\" className=\"insurance-sum-input\"\n                       value={amount}\n                       onChange={handleAmountChange}\n                       placeholder={`Минимум ${minAmount.toLocaleString('ru-RU')}`}/>\n                {amountError && <div className=\"input-error-message\">{amountError}</div>}\n              </div>\n            )}\n          </div>\n\n          <div className=\"top-btn-container\">\n            <button className=\"top-btn\"\n                    onClick={handleNext}\n                    disabled={!canGoNext()}>\n              <svg viewBox=\"0 0 24 24\"><path d=\"M12 4l8 8-8 8\"/></svg>\n            </button>\n          </div>\n        </>\n      )}\n\n      {/* Processing */}\n      {isProcessing && (\n        <div className=\"processing-container\">\n          <p>Выполняется расчёт...</p>\n          <div className=\"arrow-animation\">→</div>\n        </div>\n      )}\n\n      {/* Результат + slider + менеджер */}\n      {step==='result' && resultData && !isProcessing && (\n        <>\n          <div className=\"result-container\">\n            <h2>Результаты расчёта</h2>\n            <p><strong>Возраст:</strong> {resultData.age} лет</p>\n            <p><strong>Пол:</strong> {resultData.gender}</p>\n            <p><strong>Срок:</strong> {resultData.term} лет</p>\n            <p><strong>Сумма:</strong> {formatSum(String(resultData.sum))} ₽</p>\n            <p><strong>Итоговая премия:</strong> {formatSum(String(resultData.totalPremium||0))} ₽</p>\n          </div>\n          <div className=\"detail-slider-container\">\n            {slides[slideIndex]}\n            <div className=\"detail-nav\">\n              {slideIndex>0 &&\n                <button onClick={()=>setSlideIndex(i=>i-1)} className=\"nav-btn left\">←</button>}\n              {slideIndex<slides.length-1 &&\n                <button onClick={()=>setSlideIndex(i=>i+1)} className=\"nav-btn right\">→</button>}\n            </div>\n          </div>\n          <button className=\"insurance-btn selected\"\n                  onClick={()=>setStep('manager')}>\n            Связаться с менеджером\n          </button>\n        </>\n      )}\n\n      {/* Форма менеджера */}\n      {step==='manager' && (\n        <div className=\"snp-form\">\n          <div className=\"form-group\">\n            <label className=\"form-label\">Фамилия:</label>\n            <input type=\"text\" className=\"insurance-sum-input\"\n                   value={mgrSurname}\n                   onChange={e=>setMgrSurname(e.target.value)}/>\n          </div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Имя:</label>\n            <input type=\"text\" className=\"insurance-sum-input\"\n                   value={mgrName}\n                   onChange={e=>setMgrName(e.target.value)}/>\n          </div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Город работы:</label>\n            <input type=\"text\" className=\"insurance-sum-input\"\n                   value={mgrCity}\n                   onChange={e=>setMgrCity(e.target.value)}/>\n          </div>\n          {mgrError && <div className=\"input-error-message\">{mgrError}</div>}\n          <div className=\"top-btn-container\">\n            <button className=\"top-btn\"\n                    onClick={handleManagerSubmit}>\n              Отправить менеджеру\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}