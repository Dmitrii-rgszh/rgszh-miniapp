{"ast":null,"code":"// src/SNPPage.js\nimport React,{useState}from'react';import{useNavigate}from'react-router-dom';import logoImage from'./components/logo.png';import backgroundImage from'./components/background.png';import DateWheelPicker from'./DateWheelPicker';import'./PollsPage.css';import'./SNPPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function SNPPage(){const navigate=useNavigate();// ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏—è —à–∞–≥–∞, —Ñ–æ—Ä–º—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –∫–∞—Ä—É—Å–µ–ª–∏ ‚Äî\nconst[step,setStep]=useState(1);const[email,setEmail]=useState('');const[emailError,setEmailError]=useState('');const[birthDate,setBirthDate]=useState(new Date());const[gender,setGender]=useState(null);const[calcType,setCalcType]=useState(null);const[amountRaw,setAmountRaw]=useState('');const[amountDisplay,setAmountDisplay]=useState('');const[amountError,setAmountError]=useState('');const[isProcessing,setIsProcessing]=useState(false);const[resultData,setResultData]=useState(null);// –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π ¬´—Å—Ç—Ä–∞–Ω–∏—Ü—ã¬ª –≤ –∫–∞—Ä—É—Å–µ–ª–∏ –∏—Ç–æ–≥–æ–≤ (0, 1, 2)\nconst[carouselIndex,setCarouselIndex]=useState(0);// –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã\nconst emailValid=email.toLowerCase().endsWith('@vtb.ru');// –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞\nfunction getAge(d){if(!(d instanceof Date))return 0;const today=new Date();let age=today.getFullYear()-d.getFullYear();if(today.getMonth()<d.getMonth()||today.getMonth()===d.getMonth()&&today.getDate()<d.getDate()){age--;}return age;}// –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã\nfunction isAmountValid(){const n=parseInt(amountRaw,10)||0;return calcType==='premium'&&n>=60000||calcType==='sum'&&n>=450000;}// –º–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å—á—ë—Ç—É\nfunction canGoNext(){return step===2&&getAge(birthDate)>=18&&gender&&calcType&&amountRaw&&isAmountValid();}// ‚Äî‚Äî‚Äî –®–∞–≥ 1 ‚Üí –®–∞–≥ 2 ‚Äî –≤–≤–æ–¥ e-mail ‚Äî‚Äî‚Äî\nfunction handleEmailNext(){if(!emailValid){setEmailError('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–æ—á—Ç—É –¥–æ–º–µ–Ω–∞ @vtb.ru');return;}setEmailError('');// —Å–±—Ä–æ—Å —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ª–µ–π\nsetGender(null);setCalcType(null);setAmountRaw('');setAmountDisplay('');setAmountError('');setStep(2);}// —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤–≤–æ–¥ —Å—É–º–º—ã –≤ ¬´123.456¬ª\nfunction onAmountChange(e){const raw=e.target.value.replace(/\\D/g,'');setAmountRaw(raw);let d=raw,o='';while(d.length>3){o='.'+d.slice(-3)+o;d=d.slice(0,-3);}setAmountDisplay(d+o);const n=parseInt(raw,10)||0;if(calcType==='premium'&&n<60000)setAmountError('–ú–∏–Ω. 60 000 ‚ÇΩ');else if(calcType==='sum'&&n<450000)setAmountError('–ú–∏–Ω. 450 000 ‚ÇΩ');else setAmountError('');}// ‚Äî‚Äî‚Äî –®–∞–≥ 2 ‚Üí –∑–∞–ø—Ä–æ—Å ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî‚Äî‚Äî\nasync function handleNext(){if(!canGoNext())return;setIsProcessing(true);const dateStr=birthDate.toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});const payload={email,birthdate:dateStr,age:getAge(birthDate),gender,payment:calcType==='premium'?'–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞':'–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã',sum:parseInt(amountRaw,10)};try{const res=await fetch('/api/proxy/snp/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!res.ok){console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞',res.status,await res.text());alert(`–û—à–∏–±–∫–∞ ${res.status}: —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å`);}else{setResultData(await res.json());}}catch(err){console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:',err);alert('–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å');}finally{setIsProcessing(false);}}// –∫–Ω–æ–ø–∫–∞ ¬´–î–æ–º–æ–π¬ª\nfunction goHome(){navigate(-1);}// ‚Äî‚Äî‚Äî –≠–∫—Ä–∞–Ω ¬´–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á—ë—Ç‚Ä¶¬ª ‚Äî‚Äî‚Äî\nif(isProcessing){return/*#__PURE__*/_jsxs(\"div\",{className:\"processing-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"processing-title\",children:[\"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442\\u0441\\u044F \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435\",/*#__PURE__*/_jsx(\"br\",{}),\"\\xAB\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\xBB\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"arrow-animation\",children:\"\\u2192\"})]});}// ‚Äî‚Äî‚Äî –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –¥–≤—É–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏ –∫–∞—Ä—É—Å–µ–ª—å—é ‚Äî‚Äî‚Äî\nif(resultData){const todayStr=new Date().toLocaleDateString('ru-RU',{day:'2-digit',month:'2-digit',year:'numeric'});// –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª c13 –∏ c16\nconst{c13='‚Äì',c16='‚Äì'}=resultData;return/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"polls-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:goHome,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"repeat-btn\",onClick:()=>{setResultData(null);setGender(null);setCalcType(null);setAmountRaw('');setAmountDisplay('');setAmountError('');setStep(2);},children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 4V1L8 5l4 4V6 c4.41 0 8 3.59 8 8 s-3.59 8-8 8-8-3.59-8-8h2 c0 3.31 2.69 6 6 6s6-2.69 6-6 -2.69-6-6-6v3l-4-4 4-4z\",fill:\"currentColor\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"polls-title\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\xAB\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\xBB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"params-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430: \",todayStr]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442: \",getAge(birthDate),\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041F\\u043E\\u043B: \",gender]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u0430\\u0440\\u0438\\u0430\\u043D\\u0442 \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u0430:\",calcType==='premium'?'–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞':'–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"carousel-indicators\",children:[0,1,2].map(i=>/*#__PURE__*/_jsx(\"span\",{className:i===carouselIndex?'active':''},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-wrapper\",style:{transform:`translateX(-${carouselIndex*100}%)`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-page\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"first-line\",children:\"\\u0412 \\u0442\\u0435\\u0447\\u0435\\u043D\\u0438\\u0435 5 \\u043B\\u0435\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"line-pair\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"value\",children:c13}),/*#__PURE__*/_jsx(\"p\",{className:\"unit\",children:\"\\u0415\\u0436\\u0435\\u0433\\u043E\\u0434\\u043D\\u043E\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"line-pair\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"value\",children:c16}),/*#__PURE__*/_jsx(\"p\",{className:\"unit\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0432\\u0430\\u0448\\u0438\\u0445 \\u0432\\u0437\\u043D\\u043E\\u0441\\u043E\\u0432\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-page\"}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-page\"})]}),carouselIndex>0&&/*#__PURE__*/_jsx(\"button\",{className:\"carousel-control prev\",onClick:()=>setCarouselIndex(i=>i-1),children:\"\\u2039\"}),carouselIndex<2&&/*#__PURE__*/_jsx(\"button\",{className:\"carousel-control next\",onClick:()=>setCarouselIndex(i=>i+1),children:\"\\u203A\"})]})]})]});}// ‚Äî‚Äî‚Äî –û—Å–Ω–æ–≤–Ω–æ–π UI: —à–∞–≥ 1 –∏ —à–∞–≥ 2 ‚Äî‚Äî‚Äî\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"snp-container\",style:{backgroundImage:`url(${backgroundImage})`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"polls-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:goHome,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-wrapper animate-logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"poll-logo\",src:logoImage,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"forward-btn\",onClick:step===1?handleEmailNext:handleNext,disabled:step===1?!emailValid:!canGoNext(),children:/*#__PURE__*/_jsx(\"span\",{className:\"arrow-icon\",children:\"\\u2192\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[step===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"email-step\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"email-label\",children:\"\\u041A\\u043E\\u0440\\u043F\\u043E\\u0440\\u0430\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430 \\u0412\\u0422\\u0411:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"example@vtb.ru\",value:email,onChange:e=>setEmail(e.target.value)})]}),emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error\",children:emailError}),/*#__PURE__*/_jsx(\"button\",{className:\"polls-btn btn1\",onClick:handleEmailNext,disabled:!emailValid,children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"})]}),step===2&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"polls-title\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\xAB\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F \\u043D\\u0430 \\u043F\\u044F\\u0442\\u044C. \\u0413\\u0430\\u0440\\u0430\\u043D\\u0442\\xBB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"section-label\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(DateWheelPicker,{value:birthDate,onChange:val=>{if(val instanceof Date)setBirthDate(val);else if(val!==null&&val!==void 0&&val.day)setBirthDate(new Date(val.year,val.month-1,val.day));}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${gender==='–º—É–∂—Å–∫–æ–π'?'selected':''}`,onClick:()=>setGender('–º—É–∂—Å–∫–æ–π'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u041C\\u0443\\u0436\\u0441\\u043A\\u043E\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDC68\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${gender==='–∂–µ–Ω—Å–∫–∏–π'?'selected':''}`,onClick:()=>setGender('–∂–µ–Ω—Å–∫–∏–π'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0416\\u0435\\u043D\\u0441\\u043A\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDC69\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0420\\u0430\\u0441\\u0447\\u0451\\u0442 \\u043E\\u0442\\u2026\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insurance-options\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${calcType==='premium'?'selected':''}`,onClick:()=>setCalcType('premium'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0433\\u043E\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0432\\u0437\\u043D\\u043E\\u0441\\u0430\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`insurance-btn ${calcType==='sum'?'selected':''}`,onClick:()=>setCalcType('sum'),children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043E\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0441\\u0443\\u043C\\u043C\\u044B\"})]})]}),calcType&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-subtitle\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430 (\\u20BD):\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sum-section\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:calcType==='premium'?'–ú–∏–Ω. 60 000':'–ú–∏–Ω. 450 000',value:amountDisplay,onChange:onAmountChange})}),amountError&&/*#__PURE__*/_jsx(\"div\",{className:\"input-error\",children:amountError})]})]})]})]});}","map":{"version":3,"names":["React","useState","useNavigate","logoImage","backgroundImage","DateWheelPicker","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SNPPage","navigate","step","setStep","email","setEmail","emailError","setEmailError","birthDate","setBirthDate","Date","gender","setGender","calcType","setCalcType","amountRaw","setAmountRaw","amountDisplay","setAmountDisplay","amountError","setAmountError","isProcessing","setIsProcessing","resultData","setResultData","carouselIndex","setCarouselIndex","emailValid","toLowerCase","endsWith","getAge","d","today","age","getFullYear","getMonth","getDate","isAmountValid","n","parseInt","canGoNext","handleEmailNext","onAmountChange","e","raw","target","value","replace","o","length","slice","handleNext","dateStr","toLocaleDateString","day","month","year","payload","birthdate","payment","sum","res","fetch","method","headers","body","JSON","stringify","ok","console","error","status","text","alert","json","err","goHome","className","children","src","alt","todayStr","c13","c16","style","onClick","viewBox","fill","map","i","transform","disabled","type","placeholder","onChange","val"],"sources":["C:/Users/shapeless/Desktop/miniapp/src/SNPPage.js"],"sourcesContent":["// src/SNPPage.js\n\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport logoImage       from './components/logo.png';\nimport backgroundImage from './components/background.png';\nimport DateWheelPicker from './DateWheelPicker';\n\nimport './PollsPage.css';\nimport './SNPPage.css';\n\nexport default function SNPPage() {\n  const navigate = useNavigate();\n\n  // ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏—è —à–∞–≥–∞, —Ñ–æ—Ä–º—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –∫–∞—Ä—É—Å–µ–ª–∏ ‚Äî\n  const [step, setStep]                   = useState(1);\n  const [email, setEmail]                 = useState('');\n  const [emailError, setEmailError]       = useState('');\n  const [birthDate, setBirthDate]         = useState(new Date());\n  const [gender, setGender]               = useState(null);\n  const [calcType, setCalcType]           = useState(null);\n  const [amountRaw, setAmountRaw]         = useState('');\n  const [amountDisplay, setAmountDisplay] = useState('');\n  const [amountError, setAmountError]     = useState('');\n  const [isProcessing, setIsProcessing]   = useState(false);\n  const [resultData, setResultData]       = useState(null);\n\n  // –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π ¬´—Å—Ç—Ä–∞–Ω–∏—Ü—ã¬ª –≤ –∫–∞—Ä—É—Å–µ–ª–∏ –∏—Ç–æ–≥–æ–≤ (0, 1, 2)\n  const [carouselIndex, setCarouselIndex] = useState(0);\n\n  // –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã\n  const emailValid = email.toLowerCase().endsWith('@vtb.ru');\n\n  // –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞\n  function getAge(d) {\n    if (!(d instanceof Date)) return 0;\n    const today = new Date();\n    let age = today.getFullYear() - d.getFullYear();\n    if (\n      today.getMonth() < d.getMonth() ||\n      (today.getMonth() === d.getMonth() && today.getDate() < d.getDate())\n    ) {\n      age--;\n    }\n    return age;\n  }\n\n  // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã\n  function isAmountValid() {\n    const n = parseInt(amountRaw, 10) || 0;\n    return (calcType === 'premium' && n >= 60000)\n        || (calcType === 'sum'     && n >= 450000);\n  }\n\n  // –º–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å—á—ë—Ç—É\n  function canGoNext() {\n    return step === 2 &&\n           getAge(birthDate) >= 18 &&\n           gender &&\n           calcType &&\n           amountRaw &&\n           isAmountValid();\n  }\n\n  // ‚Äî‚Äî‚Äî –®–∞–≥ 1 ‚Üí –®–∞–≥ 2 ‚Äî –≤–≤–æ–¥ e-mail ‚Äî‚Äî‚Äî\n  function handleEmailNext() {\n    if (!emailValid) {\n      setEmailError('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–æ—á—Ç—É –¥–æ–º–µ–Ω–∞ @vtb.ru');\n      return;\n    }\n    setEmailError('');\n    // —Å–±—Ä–æ—Å —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–ª–µ–π\n    setGender(null);\n    setCalcType(null);\n    setAmountRaw('');\n    setAmountDisplay('');\n    setAmountError('');\n    setStep(2);\n  }\n\n  // —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤–≤–æ–¥ —Å—É–º–º—ã –≤ ¬´123.456¬ª\n  function onAmountChange(e) {\n    const raw = e.target.value.replace(/\\D/g, '');\n    setAmountRaw(raw);\n    let d = raw, o = '';\n    while (d.length > 3) {\n      o = '.' + d.slice(-3) + o;\n      d = d.slice(0, -3);\n    }\n    setAmountDisplay(d + o);\n\n    const n = parseInt(raw, 10) || 0;\n    if      (calcType === 'premium' && n < 60000) setAmountError('–ú–∏–Ω. 60 000 ‚ÇΩ');\n    else if (calcType === 'sum'     && n < 450000) setAmountError('–ú–∏–Ω. 450 000 ‚ÇΩ');\n    else                                           setAmountError('');\n  }\n\n  // ‚Äî‚Äî‚Äî –®–∞–≥ 2 ‚Üí –∑–∞–ø—Ä–æ—Å ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî‚Äî‚Äî\n  async function handleNext() {\n    if (!canGoNext()) return;\n    setIsProcessing(true);\n\n    const dateStr = birthDate.toLocaleDateString('ru-RU', {\n      day: '2-digit', month: '2-digit', year: 'numeric'\n    });\n    const payload = {\n      email,\n      birthdate: dateStr,\n      age:        getAge(birthDate),\n      gender,\n      payment:    calcType === 'premium'\n                  ? '–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞'\n                  : '–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã',\n      sum:        parseInt(amountRaw, 10)\n    };\n\n    try {\n      const res = await fetch('/api/proxy/snp/save', {\n        method:  'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body:    JSON.stringify(payload)\n      });\n      if (!res.ok) {\n        console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞', res.status, await res.text());\n        alert(`–û—à–∏–±–∫–∞ ${res.status}: —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å`);\n      } else {\n        setResultData(await res.json());\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', err);\n      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å');\n    } finally {\n      setIsProcessing(false);\n    }\n  }\n\n  // –∫–Ω–æ–ø–∫–∞ ¬´–î–æ–º–æ–π¬ª\n  function goHome() {\n    navigate(-1);\n  }\n\n  // ‚Äî‚Äî‚Äî –≠–∫—Ä–∞–Ω ¬´–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á—ë—Ç‚Ä¶¬ª ‚Äî‚Äî‚Äî\n  if (isProcessing) {\n    return (\n      <div className=\"processing-screen\">\n        <div className=\"logo-wrapper animate-logo\">\n          <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n        </div>\n        <h2 className=\"processing-title\">\n          –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á—ë—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ<br/>\n          ¬´–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç¬ª\n        </h2>\n        <div className=\"arrow-animation\">‚Üí</div>\n      </div>\n    );\n  }\n\n  // ‚Äî‚Äî‚Äî –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –¥–≤—É–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏ –∫–∞—Ä—É—Å–µ–ª—å—é ‚Äî‚Äî‚Äî\n  if (resultData) {\n    const todayStr = new Date().toLocaleDateString('ru-RU', {\n      day: '2-digit', month: '2-digit', year: 'numeric'\n    });\n\n    // –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª c13 –∏ c16\n    const { c13 = '‚Äì', c16 = '‚Äì' } = resultData;\n\n    return (\n      <div className=\"snp-container\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n        <div className=\"polls-header\">\n          <button className=\"back-btn\" onClick={goHome}>\n            <svg viewBox=\"0 0 24 24\">\n              <path d=\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\"/>\n            </svg>\n          </button>\n          <div className=\"logo-wrapper animate-logo\">\n            <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n          </div>\n          <button\n            className=\"repeat-btn\"\n            onClick={() => {\n              setResultData(null);\n              setGender(null);\n              setCalcType(null);\n              setAmountRaw('');\n              setAmountDisplay('');\n              setAmountError('');\n              setStep(2);\n            }}\n          >\n            <svg viewBox=\"0 0 24 24\">\n              <path\n                d=\"M12 4V1L8 5l4 4V6\n                   c4.41 0 8 3.59 8 8\n                   s-3.59 8-8 8-8-3.59-8-8h2\n                   c0 3.31 2.69 6 6 6s6-2.69 6-6\n                   -2.69-6-6-6v3l-4-4 4-4z\"\n                fill=\"currentColor\"/>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"content-wrapper\">\n          {/* –ø–µ—Ä–≤—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */}\n          <h1 className=\"polls-title\">\n            –†–∞—Å—á—ë—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç¬ª\n          </h1>\n          <div className=\"params-container\">\n            <h2>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>\n            <p>–î–∞—Ç–∞ —Ä–∞—Å—á—ë—Ç–∞: {todayStr}</p>\n            <p>–í–æ–∑—Ä–∞—Å—Ç: {getAge(birthDate)} –ª–µ—Ç</p>\n            <p>–ü–æ–ª: {gender}</p>\n            <p>\n              –í–∞—Ä–∏–∞–Ω—Ç —Ä–∞—Å—á—ë—Ç–∞:\n              {calcType === 'premium'\n                ? '–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞'\n                : '–°—Ç—Ä–∞—Ö–æ–≤–æ–π —Å—É–º–º—ã'}\n            </p>\n          </div>\n\n          {/* –≤—Ç–æ—Ä–æ–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –∫–∞—Ä—É—Å–µ–ª—å */}\n          <div className=\"carousel-container\">\n            {/* –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü */}\n            <div className=\"carousel-indicators\">\n              {[0,1,2].map(i => (\n                <span\n                  key={i}\n                  className={i === carouselIndex ? 'active' : ''}\n                />\n              ))}\n            </div>\n\n            {/* —Å—Ç—Ä–∞–Ω–∏—Ü—ã */}\n            <div\n              className=\"carousel-wrapper\"\n              style={{ transform: `translateX(-${carouselIndex * 100}%)` }}\n            >\n              {/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 */}\n              <div className=\"carousel-page\">\n                <p className=\"first-line\">–í —Ç–µ—á–µ–Ω–∏–µ 5 –ª–µ—Ç</p>\n                <div className=\"line-pair\">\n                  <p className=\"value\">{c13}</p>\n                  <p className=\"unit\">–ï–∂–µ–≥–æ–¥–Ω–æ</p>\n                </div>\n                <div className=\"line-pair\">\n                  <p className=\"value\">{c16}</p>\n                  <p className=\"unit\">–°—É–º–º–∞ –≤–∞—à–∏—Ö –≤–∑–Ω–æ—Å–æ–≤</p>\n                </div>\n              </div>\n              {/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2 */}\n              <div className=\"carousel-page\">\n                {/* –∑–∞–ø–æ–ª–Ω–∏–º –ø–æ–∑–∂–µ */}\n              </div>\n              {/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ 3 */}\n              <div className=\"carousel-page\">\n                {/* –∑–∞–ø–æ–ª–Ω–∏–º –ø–æ–∑–∂–µ */}\n              </div>\n            </div>\n\n            {/* —Å—Ç—Ä–µ–ª–∫–∏ –ø–æ –±–æ–∫–∞–º, –ø–æ —Å–µ—Ä–µ–¥–∏–Ω–µ */}\n            {carouselIndex > 0 && (\n              <button\n                className=\"carousel-control prev\"\n                onClick={() => setCarouselIndex(i => i - 1)}\n              >‚Äπ</button>\n            )}\n            {carouselIndex < 2 && (\n              <button\n                className=\"carousel-control next\"\n                onClick={() => setCarouselIndex(i => i + 1)}\n              >‚Ä∫</button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // ‚Äî‚Äî‚Äî –û—Å–Ω–æ–≤–Ω–æ–π UI: —à–∞–≥ 1 –∏ —à–∞–≥ 2 ‚Äî‚Äî‚Äî\n  return (\n    <div className=\"snp-container\" style={{ backgroundImage: `url(${backgroundImage})` }}>\n      <div className=\"polls-header\">\n        <button className=\"back-btn\" onClick={goHome}>\n          <svg viewBox=\"0 0 24 24\">\n            <path d=\"M3 11l9-8 9 8v10a1 1 0 0 1-1 1h-5v-7h-6v7H4a1 1 0 0 1-1-1V11z\"/>\n          </svg>\n        </button>\n        <div className=\"logo-wrapper animate-logo\">\n          <img className=\"poll-logo\" src={logoImage} alt=\"–õ–æ–≥–æ—Ç–∏–ø\" />\n        </div>\n        <button\n          className=\"forward-btn\"\n          onClick={step === 1 ? handleEmailNext : handleNext}\n          disabled={step === 1 ? !emailValid : !canGoNext()}\n        >\n          <span className=\"arrow-icon\">‚Üí</span>\n        </button>\n      </div>\n\n      <div className=\"content-wrapper\">\n        {step === 1 && (\n          <>\n            <div className=\"email-step\">\n              <label className=\"email-label\">\n                –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ—á—Ç–∞ –í–¢–ë:\n              </label>\n              <input\n                type=\"email\"\n                placeholder=\"example@vtb.ru\"\n                value={email}\n                onChange={e => setEmail(e.target.value)}\n              />\n            </div>\n            {emailError && <div className=\"input-error\">{emailError}</div>}\n            <button\n              className=\"polls-btn btn1\"\n              onClick={handleEmailNext}\n              disabled={!emailValid}\n            >\n              –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å\n            </button>\n          </>\n        )}\n\n        {step === 2 && (\n          <>\n            <h1 className=\"polls-title\">\n              –†–∞—Å—á—ë—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –ø—è—Ç—å. –ì–∞—Ä–∞–Ω—Ç¬ª\n            </h1>\n\n            <div className=\"date-section\">\n              <label className=\"section-label\">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>\n              <DateWheelPicker\n                value={birthDate}\n                onChange={val => {\n                  if (val instanceof Date) setBirthDate(val);\n                  else if (val?.day)\n                    setBirthDate(new Date(val.year, val.month - 1, val.day));\n                }}\n              />\n            </div>\n\n            <div className=\"section-subtitle\">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª:</div>\n            <div className=\"gender-section\">\n              <button\n                className={`insurance-btn ${gender === '–º—É–∂—Å–∫–æ–π' ? 'selected' : ''}`}\n                onClick={() => setGender('–º—É–∂—Å–∫–æ–π')}\n              >\n                <div>–ú—É–∂—Å–∫–æ–π</div>\n                <div className=\"emoji\">üë®</div>\n              </button>\n              <button\n                className={`insurance-btn ${gender === '–∂–µ–Ω—Å–∫–∏–π' ? 'selected' : ''}`}\n                onClick={() => setGender('–∂–µ–Ω—Å–∫–∏–π')}\n              >\n                <div>–ñ–µ–Ω—Å–∫–∏–π</div>\n                <div className=\"emoji\">üë©</div>\n              </button>\n            </div>\n\n            <div className=\"section-subtitle\">–†–∞—Å—á—ë—Ç –æ—Ç‚Ä¶</div>\n            <div className=\"insurance-options\">\n              <button\n                className={`insurance-btn ${calcType === 'premium' ? 'selected' : ''}`}\n                onClick={() => setCalcType('premium')}\n              >\n                <div>–°—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ</div>\n                <div>–≤–∑–Ω–æ—Å–∞</div>\n              </button>\n              <button\n                className={`insurance-btn ${calcType === 'sum' ? 'selected' : ''}`}\n                onClick={() => setCalcType('sum')}\n              >\n                <div>–°—Ç—Ä–∞—Ö–æ–≤–æ–π</div>\n                <div>—Å—É–º–º—ã</div>\n              </button>\n            </div>\n\n            {calcType && (\n              <>\n                <div className=\"section-subtitle\">–°—É–º–º–∞ (‚ÇΩ):</div>\n                <div className=\"sum-section\">\n                  <input\n                    type=\"text\"\n                    placeholder={calcType === 'premium' ? '–ú–∏–Ω. 60 000' : '–ú–∏–Ω. 450 000'}\n                    value={amountDisplay}\n                    onChange={onAmountChange}\n                  />\n                </div>\n                {amountError && <div className=\"input-error\">{amountError}</div>}\n              </>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}